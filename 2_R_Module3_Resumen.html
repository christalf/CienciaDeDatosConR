<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>R Programming - Module 3</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Aprendiendo ciencia de datos con R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-hand-spock"></span>
     
    Resumen del contenido
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bars"></span>
     
    Contenido
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">Data Science Toolbox</li>
    <li class="divider"></li>
    <li>
      <a href="1_DataScienceToolBox_Resumen.html">Módulo único</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">R</li>
    <li class="divider"></li>
    <li>
      <a href="2_R_Module1_Resumen.html">Módulo 1</a>
    </li>
    <li>
      <a href="2_R_Module2_Resumen.html">Módulo 2</a>
    </li>
    <li>
      <a href="2_R_Module2_ProgAssmt_PrevPract.html">_práctica</a>
    </li>
    <li>
      <a href="2_R_Module2_ProgAssmt.html">_ejercicio</a>
    </li>
    <li>
      <a href="2_R_Module3_Resumen.html">Módulo 3</a>
    </li>
    <li>
      <a href="2_R_Module3_ProgAssmt.html">_ejercicio</a>
    </li>
    <li>
      <a href="2_R_Module4_Resumen.html">Módulo 4</a>
    </li>
    <li>
      <a href="2_R_Module4_ProgAssmt.html">Ejercicio final</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Getting &amp; Cleaning Data</li>
    <li class="divider"></li>
    <li>
      <a href="3_GettingAndCleaningData_Module1_Resumen.html">Módulo 1</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module2_Resumen.html">Módulo 2</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module2_Ejercicios.html">_ejercicios</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module3_Resumen.html">Módulo 3</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module3_Ejercicios.html">_ejercicios</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module4.html">Módulo 4</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module4_Ejercicios.html">_ejercicios</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_FinalProj.html">Proyecto final</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Exploratory Data Analysis</li>
    <li class="divider"></li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module1.html">Módulo 1</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module1_Ejercicios.html">_ejercicios</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module2.html">Módulo 2</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module3.html">Módulo 3</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module4.html">Módulo 4</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_FinalProj.html">Proyecto final</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Reproducible Research</li>
    <li class="divider"></li>
    <li>
      <a href="5_ReproducibleResearch_Module1.html">Módulo 1</a>
    </li>
    <li>
      <a href="5_ReproducibleResearch_Module2.html">Módulo 2</a>
    </li>
    <li>
      <a href="5_ReproducibleResearch_Module3.html">Módulo 3</a>
    </li>
    <li>
      <a href="5_ReproducibleResearch_Module4.html">Módulo 4</a>
    </li>
    <li>
      <a href="5_ReproducibleResearch_FinalProj.html">Proyectos finales</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://bookdown.org/yihui/rmarkdown/rmarkdown-site.html">
    <span class="fa fa-gears"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">R Programming - Module 3</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#loop-functions." id="toc-loop-functions."><span
class="toc-section-number">1</span> Loop functions.</a>
<ul>
<li><a href="#a-brief-overview-of-the-main-of-these-functions."
id="toc-a-brief-overview-of-the-main-of-these-functions."><span
class="toc-section-number">1.1</span> A brief overview of the main of
these functions.</a></li>
<li><a href="#lapply-function." id="toc-lapply-function."><span
class="toc-section-number">1.2</span> <code>lapply()</code>
function.</a>
<ul>
<li><a
href="#using-lapply-to-evaluate-a-function-multiple-times-each-with-a-different-argument."
id="toc-using-lapply-to-evaluate-a-function-multiple-times-each-with-a-different-argument."><span
class="toc-section-number">1.2.1</span> Using <code>lapply</code> to
evaluate a function multiple times, each with a different argument.</a>
<ul>
<li><a href="#applying-mean-function-to-all-elements-of-a-list."
id="toc-applying-mean-function-to-all-elements-of-a-list."><span
class="toc-section-number">1.2.1.1</span> Applying <code>mean()</code>
function to all elements of a list.</a></li>
<li><a
href="#generating-different-number-of-random-uniformly-distributed-variables."
id="toc-generating-different-number-of-random-uniformly-distributed-variables."><span
class="toc-section-number">1.2.1.2</span> Generating different number of
random uniformly distributed variables.</a></li>
<li><a href="#applying-class-function-to-every-column-of-a-data-frame."
id="toc-applying-class-function-to-every-column-of-a-data-frame."><span
class="toc-section-number">1.2.1.3</span> Applying <code>class()</code>
function to every column of a data frame.</a></li>
<li><a href="#reading-a-list-of-files-data-frames-from-disk."
id="toc-reading-a-list-of-files-data-frames-from-disk."><span
class="toc-section-number">1.2.1.4</span> Reading a list of files (data
frames) from disk.</a></li>
<li><a href="#loading-multiple-packages-at-once."
id="toc-loading-multiple-packages-at-once."><span
class="toc-section-number">1.2.1.5</span> Loading multiple packages at
once.</a></li>
</ul></li>
<li><a href="#lapply-makes-heavy-use-of-anonymous-functions."
id="toc-lapply-makes-heavy-use-of-anonymous-functions."><span
class="toc-section-number">1.2.2</span> <code>lapply</code> makes heavy
use of anonymous functions.</a>
<ul>
<li><a href="#extracting-a-column-of-each-matrix-in-a-list-of-matrices."
id="toc-extracting-a-column-of-each-matrix-in-a-list-of-matrices."><span
class="toc-section-number">1.2.2.1</span> Extracting a column of each
matrix in a list of matrices.</a></li>
<li><a href="#unloading-multiple-packages-at-once."
id="toc-unloading-multiple-packages-at-once."><span
class="toc-section-number">1.2.2.2</span> Unloading multiple packages at
once.</a></li>
</ul></li>
</ul></li>
<li><a href="#sapply-function." id="toc-sapply-function."><span
class="toc-section-number">1.3</span> <code>sapply()</code>
function.</a>
<ul>
<li><a
href="#using-sapply-to-evaluate-a-function-multiple-times-trying-to-simplify-the-result."
id="toc-using-sapply-to-evaluate-a-function-multiple-times-trying-to-simplify-the-result."><span
class="toc-section-number">1.3.1</span> Using <code>sapply</code> to
evaluate a function multiple times, trying to simplify the result.</a>
<ul>
<li><a href="#applying-the-mean-function-to-all-elements-of-a-list."
id="toc-applying-the-mean-function-to-all-elements-of-a-list."><span
class="toc-section-number">1.3.1.1</span> Applying the
<code>mean()</code> function to all elements of a list.</a></li>
<li><a
href="#applying-the-class-function-to-all-columns-of-a-data-frame."
id="toc-applying-the-class-function-to-all-columns-of-a-data-frame."><span
class="toc-section-number">1.3.1.2</span> Applying the
<code>class()</code> function to all columns of a data frame.</a></li>
<li><a
href="#applying-the-range-function-to-the-columns-of-a-data-frame."
id="toc-applying-the-range-function-to-the-columns-of-a-data-frame."><span
class="toc-section-number">1.3.1.3</span> Applying the
<code>range()</code> function to the columns of a data frame.</a></li>
<li><a
href="#applying-the-unique-function-to-the-columns-of-a-data-frame."
id="toc-applying-the-unique-function-to-the-columns-of-a-data-frame."><span
class="toc-section-number">1.3.1.4</span> Applying the
<code>unique()</code> function to the columns of a data frame.</a></li>
</ul></li>
</ul></li>
<li><a href="#vapply-function." id="toc-vapply-function."><span
class="toc-section-number">1.4</span> <code>vapply()</code>
function.</a></li>
<li><a href="#split-function.-combination-with-lapply-and-sapply."
id="toc-split-function.-combination-with-lapply-and-sapply."><span
class="toc-section-number">1.5</span> <code>split()</code> function.
Combination with <code>lapply()</code> and <code>sapply()</code>.</a>
<ul>
<li><a href="#basic-example." id="toc-basic-example."><span
class="toc-section-number">1.5.1</span> Basic example.</a></li>
<li><a href="#splitting-a-data-frame."
id="toc-splitting-a-data-frame."><span
class="toc-section-number">1.5.2</span> Splitting a data frame.</a></li>
<li><a
href="#splitting-according-to-levels-defined-in-more-than-one-variable.-the-interaction-function."
id="toc-splitting-according-to-levels-defined-in-more-than-one-variable.-the-interaction-function."><span
class="toc-section-number">1.5.3</span> Splitting according to levels
defined in more than one variable. The <code>interaction()</code>
function.</a></li>
</ul></li>
<li><a href="#tapply-function." id="toc-tapply-function."><span
class="toc-section-number">1.6</span> <code>tapply()</code>
function.</a>
<ul>
<li><a href="#group-means-and-ranges-from-a-vector-of-numbers."
id="toc-group-means-and-ranges-from-a-vector-of-numbers."><span
class="toc-section-number">1.6.1</span> Group means and ranges, from a
vector of numbers.</a></li>
<li><a
href="#proportion-of-an-indicator-variable-within-each-group-determined-by-another-variable."
id="toc-proportion-of-an-indicator-variable-within-each-group-determined-by-another-variable."><span
class="toc-section-number">1.6.2</span> Proportion of an
<em>indicator</em> variable within each group determined by another
variable.</a></li>
<li><a
href="#summary-of-a-numerical-variable-within-both-groups-of-an-indicator-variable."
id="toc-summary-of-a-numerical-variable-within-both-groups-of-an-indicator-variable."><span
class="toc-section-number">1.6.3</span> Summary of a numerical variable
within both groups of an <em>indicator</em> variable.</a></li>
</ul></li>
<li><a
href="#apply-function-and-its-shortcuts-rowsums-rowmeans-colsums-colmeans."
id="toc-apply-function-and-its-shortcuts-rowsums-rowmeans-colsums-colmeans."><span
class="toc-section-number">1.7</span> <code>apply()</code> function, and
it’s shortcuts <code>rowSums()</code>, <code>rowMeans()</code>,
<code>colSums()</code>, <code>colMeans()</code>.</a>
<ul>
<li><a
href="#most-often-use-apply-a-function-to-the-rows-or-columns-of-a-matrix."
id="toc-most-often-use-apply-a-function-to-the-rows-or-columns-of-a-matrix."><span
class="toc-section-number">1.7.1</span> Most often use: apply a function
to the rows or columns of a matrix.</a></li>
<li><a
href="#special-shortcuts-for-rowcolumn-sums-and-means-of-matrices."
id="toc-special-shortcuts-for-rowcolumn-sums-and-means-of-matrices."><span
class="toc-section-number">1.7.2</span> Special shortcuts for row/column
sums and means of matrices.</a></li>
<li><a
href="#a-higher-dimensional-example-applying-a-function-to-a-3-dimensional-array-like-an-array-of-matrices."
id="toc-a-higher-dimensional-example-applying-a-function-to-a-3-dimensional-array-like-an-array-of-matrices."><span
class="toc-section-number">1.7.3</span> A higher dimensional example:
applying a function to a 3-dimensional array (like an array of
matrices).</a></li>
</ul></li>
<li><a href="#mapply-function." id="toc-mapply-function."><span
class="toc-section-number">1.8</span> <code>mapply()</code>
function.</a>
<ul>
<li><a
href="#applying-rep-function-over-two-sequences-two-r-objects-to-construct-a-list."
id="toc-applying-rep-function-over-two-sequences-two-r-objects-to-construct-a-list."><span
class="toc-section-number">1.8.1</span> Applying <code>rep()</code>
function over two sequences (two R objects) to construct a
list.</a></li>
<li><a
href="#generating-multiple-sets-of-random-numbers-each-with-a-different-length-and-mean."
id="toc-generating-multiple-sets-of-random-numbers-each-with-a-different-length-and-mean."><span
class="toc-section-number">1.8.2</span> Generating multiple sets of
random numbers, each with a different length and mean.</a></li>
<li><a
href="#using-mapply-for-vectorizing-a-function.-theres-also-a-vectorize-function-for-this."
id="toc-using-mapply-for-vectorizing-a-function.-theres-also-a-vectorize-function-for-this."><span
class="toc-section-number">1.8.3</span> Using <code>mapply</code> for
vectorizing a function. There’s also a <code>Vectorize()</code> function
for this.</a>
<ul>
<li><a
href="#example-vectorizing-the-function-that-computes-the-sum-of-squares."
id="toc-example-vectorizing-the-function-that-computes-the-sum-of-squares."><span
class="toc-section-number">1.8.3.1</span> Example: vectorizing the
function that computes the sum of squares.</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#debugging." id="toc-debugging."><span
class="toc-section-number">2</span> Debugging.</a>
<ul>
<li><a href="#different-ways-r-indicates-that-somethings-not-right."
id="toc-different-ways-r-indicates-that-somethings-not-right."><span
class="toc-section-number">2.1</span> Different ways R indicates that
something’s not right.</a></li>
<li><a
href="#most-fundamental-debugging-measure-prevent-strange-inputs-from-the-caller."
id="toc-most-fundamental-debugging-measure-prevent-strange-inputs-from-the-caller."><span
class="toc-section-number">2.2</span> Most fundamental debugging
measure: prevent strange inputs from the caller.</a>
<ul>
<li><a href="#preventing-from-missing-values."
id="toc-preventing-from-missing-values."><span
class="toc-section-number">2.2.1</span> Preventing from missing
values.</a></li>
<li><a
href="#deciding-what-to-do-with-vectorized-inputs-stop-the-function-or-vectorize-it."
id="toc-deciding-what-to-do-with-vectorized-inputs-stop-the-function-or-vectorize-it."><span
class="toc-section-number">2.2.2</span> Deciding what to do with
vectorized inputs: <code>stop()</code> the function or
<code>Vectorize()</code> it.</a></li>
</ul></li>
<li><a href="#debugging-tools-in-r."
id="toc-debugging-tools-in-r."><span
class="toc-section-number">2.3</span> Debugging tools in R.</a>
<ul>
<li><a href="#traceback." id="toc-traceback."><span
class="toc-section-number">2.3.1</span>
<code>traceback()</code>.</a></li>
<li><a href="#debug." id="toc-debug."><span
class="toc-section-number">2.3.2</span> <code>debug()</code>.</a></li>
<li><a href="#recover." id="toc-recover."><span
class="toc-section-number">2.3.3</span> <code>recover()</code>.</a></li>
</ul></li>
</ul></li>
<li><a href="#session-info." id="toc-session-info."><span
class="toc-section-number">3</span> Session Info.</a></li>
</ul>
</div>

<div id="loop-functions." class="section level1" number="1">
<h1><span class="header-section-number">1</span> Loop functions.</h1>
<p>When working interactively on the command line, <em>multi-line
expressions with curly braces</em>, like <code>for</code> and
<code>while</code> loops, are <em>just not that easy to sort
through</em>.</p>
<p>So, R has some <strong>functions that implement looping in a compact
form</strong>:</p>
<ul>
<li><code>lapply()</code> (and it’s paradigmatic combination with the
auxiliary <code>split()</code> function).<br />
</li>
<li><code>sapply()</code> (and it’s paradigmatic combination with the
auxiliary <code>split()</code> function).
<ul>
<li><code>vapply()</code>.</li>
</ul></li>
<li><code>apply()</code>.<br />
</li>
<li><code>tapply()</code>.<br />
</li>
<li><code>mapply()</code>.</li>
</ul>
<p>But, most of all, loop functions offer a <strong>concise and
convinient means</strong> of implementing the
<strong><em>SPLIT-APPLY-COMBINE</em></strong> <strong>strategy for data
analysis</strong>.</p>
<div id="a-brief-overview-of-the-main-of-these-functions."
class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> A brief overview of
the main of these functions.</h2>
<ul>
<li><code>lapply()</code> and <code>sapply()</code>:
<ul>
<li>Both take a list as input.<br />
</li>
<li>Apply a function to each element of the list.<br />
</li>
<li>Then combine and return the result.
<ul>
<li>lapply() always returns a list,<br />
</li>
<li>whereas sapply() attempts to simplify the result.<br />
</li>
</ul></li>
</ul></li>
<li><code>vapply()</code> and <code>tapply()</code>:
<ul>
<li>Each serves a <strong>very specific purpose</strong> within the
Split-Apply-Combine methodology.<br />
</li>
<li><code>vapply</code> is a <em>safer</em> alternative to sapply(),
which is most helpful when writing our own functions.<br />
</li>
<li><code>tapply</code> allows us <em>to split</em> our data into groups
based on the value of some variable, then apply a function to each
group.</li>
</ul></li>
</ul>
</div>
<div id="lapply-function." class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> <code>lapply()</code>
function.</h2>
<p>Let’s see the arguments and body of this function.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>lapply</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (X, FUN, ...) </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    FUN <span class="ot">&lt;-</span> <span class="fu">match.fun</span>(FUN)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.vector</span>(X) <span class="sc">||</span> <span class="fu">is.object</span>(X)) </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        X <span class="ot">&lt;-</span> <span class="fu">as.list</span>(X)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">.Internal</span>(<span class="fu">lapply</span>(X, FUN))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>bytecode<span class="sc">:</span> <span class="dv">0x55ab54fb52e0</span><span class="sc">&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="er">&lt;</span>environment<span class="sc">:</span> namespace<span class="sc">:</span>base<span class="sc">&gt;</span></span></code></pre></div>
<p>This function does the following simple series of operations:</p>
<ul>
<li>It <strong>loops over a list</strong>, iterating over each element
in that list.
<ul>
<li>The first argument <code>X</code> is a <strong>list</strong>.<br />
</li>
<li>Any other object given in input, will be <strong>coerced to a list
using as.list()</strong>.<br />
</li>
</ul></li>
<li>It <strong>applies a given</strong> <strong><em>function
<code>FUN</code></em></strong> to <strong>each element</strong> of the
list.
<ul>
<li>It passes each element of the list as the <strong>first
argument</strong> of <code>FUN</code>.<br />
</li>
<li>Any arguments included in the <strong>ellipses “…” argument</strong>
of <code>lapply</code>, will get <strong>passed</strong>
<strong>down</strong> to <code>FUN</code>.<br />
</li>
<li>Notice the statement <code>.Internal(lapply(X, FUN))</code>. It
means that the <em>actual looping</em> <em>is done internally in C
code</em> for efficiency reasons.<br />
</li>
</ul></li>
<li>Always <strong>returns a list</strong> regardless of the class of
the input.
<ul>
<li>The returned list has the <strong>same length as the input/coerced
list</strong>.<br />
</li>
<li>If the original list has names, then <strong>the names will be
preserved in the output</strong>.</li>
</ul></li>
</ul>
<div
id="using-lapply-to-evaluate-a-function-multiple-times-each-with-a-different-argument."
class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Using
<code>lapply</code> to evaluate a function multiple times, each with a
different argument.</h3>
<div id="applying-mean-function-to-all-elements-of-a-list."
class="section level4" number="1.2.1.1">
<h4><span class="header-section-number">1.2.1.1</span> Applying
<code>mean()</code> function to all elements of a list.</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>), <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">5</span>))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(x, mean)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>a</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>b</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.3474802</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>c</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">4.980159</span></span></code></pre></div>
</div>
<div
id="generating-different-number-of-random-uniformly-distributed-variables."
class="section level4" number="1.2.1.2">
<h4><span class="header-section-number">1.2.1.2</span> Generating
different number of random uniformly distributed variables.</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(x, runif)                        <span class="co"># the integer vector &quot;x&quot; is converted into a list.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.4347176</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.5147327</span> <span class="fl">0.6630110</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.1431666</span> <span class="fl">0.3444874</span> <span class="fl">0.4057636</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">4</span>]]</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.08531101</span> <span class="fl">0.93257193</span> <span class="fl">0.83838407</span> <span class="fl">0.87943330</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(x, runif, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">10</span>)     <span class="co"># additional &quot;min&quot; and &quot;max&quot; argutments for runif().</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">9.357125</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.7246063</span> <span class="fl">3.7875944</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">5.378649</span> <span class="fl">1.050501</span> <span class="fl">8.016877</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">4</span>]]</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">7.3964175</span> <span class="fl">0.5214901</span> <span class="fl">4.8216957</span> <span class="fl">9.2051784</span></span></code></pre></div>
</div>
<div id="applying-class-function-to-every-column-of-a-data-frame."
class="section level4" number="1.2.1.3">
<h4><span class="header-section-number">1.2.1.3</span> Applying
<code>class()</code> function to every column of a data frame.</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airquality)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  Ozone Solar.R Wind Temp Month Day</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    <span class="dv">41</span>     <span class="dv">190</span>  <span class="fl">7.4</span>   <span class="dv">67</span>     <span class="dv">5</span>   <span class="dv">1</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">36</span>     <span class="dv">118</span>  <span class="fl">8.0</span>   <span class="dv">72</span>     <span class="dv">5</span>   <span class="dv">2</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    <span class="dv">12</span>     <span class="dv">149</span> <span class="fl">12.6</span>   <span class="dv">74</span>     <span class="dv">5</span>   <span class="dv">3</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    <span class="dv">18</span>     <span class="dv">313</span> <span class="fl">11.5</span>   <span class="dv">62</span>     <span class="dv">5</span>   <span class="dv">4</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    <span class="cn">NA</span>      <span class="cn">NA</span> <span class="fl">14.3</span>   <span class="dv">56</span>     <span class="dv">5</span>   <span class="dv">5</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>    <span class="dv">28</span>      <span class="cn">NA</span> <span class="fl">14.9</span>   <span class="dv">66</span>     <span class="dv">5</span>   <span class="dv">6</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(airquality, class) <span class="co"># the data frame airquality is converted into a list (of vectors).</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>Ozone</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>Solar.R</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>Wind</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;numeric&quot;</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>Temp</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>Month</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>Day</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;integer&quot;</span></span></code></pre></div>
</div>
<div id="reading-a-list-of-files-data-frames-from-disk."
class="section level4" number="1.2.1.4">
<h4><span class="header-section-number">1.2.1.4</span> Reading a list of
files (data frames) from disk.</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>file_paths <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;2_TestingFolder&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>file_paths</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2_TestingFolder/Andy.csv&quot;</span>  <span class="st">&quot;2_TestingFolder/David.csv&quot;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;2_TestingFolder/John.csv&quot;</span>  <span class="st">&quot;2_TestingFolder/Mike.csv&quot;</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;2_TestingFolder/Steve.csv&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>dframes_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(file_paths, read.csv)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dframes_list)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>List of <span class="dv">5</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>   <span class="dv">30</span> obs. of  <span class="dv">4</span> variables<span class="sc">:</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Patient.Name<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">1</span> level <span class="st">&quot;Andy&quot;</span><span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Age         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> ...</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Weight      <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">140</span> <span class="dv">140</span> <span class="dv">140</span> <span class="dv">139</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> ...</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>   <span class="dv">30</span> obs. of  <span class="dv">4</span> variables<span class="sc">:</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Patient.Name<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">1</span> level <span class="st">&quot;David&quot;</span><span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Age         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">35</span> <span class="dv">35</span> <span class="dv">35</span> <span class="dv">35</span> <span class="dv">35</span> <span class="dv">35</span> <span class="dv">35</span> <span class="dv">35</span> <span class="dv">35</span> <span class="dv">35</span> ...</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Weight      <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">210</span> <span class="dv">209</span> <span class="dv">209</span> <span class="dv">209</span> <span class="dv">209</span> <span class="dv">209</span> <span class="dv">209</span> <span class="dv">208</span> <span class="dv">208</span> <span class="dv">208</span> ...</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>   <span class="dv">30</span> obs. of  <span class="dv">4</span> variables<span class="sc">:</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Patient.Name<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">1</span> level <span class="st">&quot;John&quot;</span><span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Age         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">22</span> <span class="dv">22</span> <span class="dv">22</span> <span class="dv">22</span> <span class="dv">22</span> <span class="dv">22</span> <span class="dv">22</span> <span class="dv">22</span> <span class="dv">22</span> <span class="dv">22</span> ...</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Weight      <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">175</span> <span class="dv">175</span> <span class="dv">175</span> <span class="dv">175</span> <span class="dv">175</span> <span class="dv">175</span> <span class="dv">175</span> <span class="dv">175</span> <span class="dv">175</span> <span class="dv">175</span> ...</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>   <span class="dv">30</span> obs. of  <span class="dv">4</span> variables<span class="sc">:</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Patient.Name<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">1</span> level <span class="st">&quot;Mike&quot;</span><span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Age         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">40</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">40</span> <span class="dv">40</span> ...</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Weight      <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">188</span> <span class="dv">188</span> <span class="dv">188</span> <span class="dv">188</span> <span class="dv">189</span> <span class="dv">189</span> <span class="dv">189</span> <span class="dv">189</span> <span class="dv">189</span> <span class="dv">189</span> ...</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="er">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>   <span class="dv">30</span> obs. of  <span class="dv">4</span> variables<span class="sc">:</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Patient.Name<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">1</span> level <span class="st">&quot;Steve&quot;</span><span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Age         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">55</span> <span class="dv">55</span> <span class="dv">55</span> <span class="dv">55</span> <span class="dv">55</span> <span class="dv">55</span> <span class="dv">55</span> <span class="dv">55</span> <span class="dv">55</span> <span class="dv">55</span> ...</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Weight      <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">225</span> <span class="dv">225</span> <span class="dv">225</span> <span class="dv">224</span> <span class="dv">224</span> <span class="dv">224</span> <span class="dv">223</span> <span class="dv">223</span> <span class="dv">223</span> <span class="dv">223</span> ...</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day         <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span></code></pre></div>
<p>So, <code>lapply</code> returned to us a <strong>list of data frame
objects</strong>.</p>
<p>But we are interested now on creating a <strong>single data
frame</strong>.</p>
<p>It’s worth remembering here what we saw in “R_Module1_Resumen” file
(paragraph 13.3). We constructed there a single data frame, following
different paths:</p>
<ol style="list-style-type: decimal">
<li>First we made a single data frame, <strong>not from a list of data
frames objects</strong> (that’s what <code>lapply</code> returned
above), but <strong>from a list of path-names</strong> (a character
vector) to the files where the original data frames were stored.<br />
And we did that by <strong>row-binding</strong> each data frame
<em>readed from disk at each step</em> of a <strong>for
loop</strong>.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(path <span class="cf">in</span> file_paths) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data, <span class="fu">read.csv</span>(path))</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>   <span class="dv">150</span> obs. of  <span class="dv">4</span> variables<span class="sc">:</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a> <span class="er">$</span> Patient.Name<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">5</span> levels <span class="st">&quot;Andy&quot;</span>,<span class="st">&quot;David&quot;</span>,..<span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> Age         <span class="sc">:</span> int  <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> ...</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> Weight      <span class="sc">:</span> int  <span class="dv">140</span> <span class="dv">140</span> <span class="dv">140</span> <span class="dv">139</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> ...</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> Day         <span class="sc">:</span> int  <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>The other way in which we obtanined the same result, was putting all
data frames into a list (that’s just what <code>lapply</code> did
before) and <strong>from that list of data frame objects</strong>
creating our single data frame using the <strong><code>do.call()</code>
function</strong> to execute <code>rbind()</code> over that list.</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, dframes_list)   <span class="co"># Notice: no previous empty data frame needed.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>   <span class="dv">150</span> obs. of  <span class="dv">4</span> variables<span class="sc">:</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a> <span class="er">$</span> Patient.Name<span class="sc">:</span> Factor w<span class="sc">/</span> <span class="dv">5</span> levels <span class="st">&quot;Andy&quot;</span>,<span class="st">&quot;David&quot;</span>,..<span class="sc">:</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> ...</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> Age         <span class="sc">:</span> int  <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> <span class="dv">30</span> ...</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> Weight      <span class="sc">:</span> int  <span class="dv">140</span> <span class="dv">140</span> <span class="dv">140</span> <span class="dv">139</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> <span class="dv">138</span> ...</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> Day         <span class="sc">:</span> int  <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span></code></pre></div>
</div>
<div id="loading-multiple-packages-at-once." class="section level4"
number="1.2.1.5">
<h4><span class="header-section-number">1.2.1.5</span> Loading multiple
packages at once.</h4>
<p><code>library()</code> or <code>require()</code> functions
<strong>only load one package at a time</strong>. So, if we want or have
to load multiple packages, we could do this “at once” with
<code>lapply()</code> and <code>library()</code> as follows:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;readr&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(packages, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>Attaching package<span class="sc">:</span> <span class="st">&#39;ggplot2&#39;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>The following object is masked _by_ <span class="st">&#39;.GlobalEnv&#39;</span><span class="sc">:</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    diamonds</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>Attaching package<span class="sc">:</span> <span class="st">&#39;dplyr&#39;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>The following objects are masked from <span class="st">&#39;package:plyr&#39;</span><span class="sc">:</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    arrange, count, desc, failwith, id, mutate, rename, summarise,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    summarize</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>The following objects are masked from <span class="st">&#39;package:stats&#39;</span><span class="sc">:</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    filter, lag</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>The following objects are masked from <span class="st">&#39;package:base&#39;</span><span class="sc">:</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    intersect, setdiff, setequal, union</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;ggplot2&quot;</span>   <span class="st">&quot;plyr&quot;</span>      <span class="st">&quot;stats&quot;</span>     <span class="st">&quot;graphics&quot;</span>  <span class="st">&quot;grDevices&quot;</span> <span class="st">&quot;utils&quot;</span>    </span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">&quot;datasets&quot;</span>  <span class="st">&quot;methods&quot;</span>   <span class="st">&quot;base&quot;</span>     </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;dplyr&quot;</span>     <span class="st">&quot;ggplot2&quot;</span>   <span class="st">&quot;plyr&quot;</span>      <span class="st">&quot;stats&quot;</span>     <span class="st">&quot;graphics&quot;</span>  <span class="st">&quot;grDevices&quot;</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">&quot;utils&quot;</span>     <span class="st">&quot;datasets&quot;</span>  <span class="st">&quot;methods&quot;</span>   <span class="st">&quot;base&quot;</span>     </span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;readr&quot;</span>     <span class="st">&quot;dplyr&quot;</span>     <span class="st">&quot;ggplot2&quot;</span>   <span class="st">&quot;plyr&quot;</span>      <span class="st">&quot;stats&quot;</span>     <span class="st">&quot;graphics&quot;</span> </span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">&quot;grDevices&quot;</span> <span class="st">&quot;utils&quot;</span>     <span class="st">&quot;datasets&quot;</span>  <span class="st">&quot;methods&quot;</span>   <span class="st">&quot;base&quot;</span>     </span></code></pre></div>
<p>There’s also <strong>miscellaneous package</strong>,
<code>xfun</code>, that provides the <code>pkg_attach()</code> function
that is a <em>vectorized version of <code>library()</code></em>.</p>
<ul>
<li>See the <a
href="https://cran.r-project.org/web/packages/xfun/xfun.pdf">package
manual here</a>.</li>
</ul>
</div>
</div>
<div id="lapply-makes-heavy-use-of-anonymous-functions."
class="section level3" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> <code>lapply</code>
makes heavy use of anonymous functions.</h3>
<div id="extracting-a-column-of-each-matrix-in-a-list-of-matrices."
class="section level4" number="1.2.2.1">
<h4><span class="header-section-number">1.2.2.1</span> Extracting a
column of each matrix in a list of matrices.</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>lm <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>), <span class="at">b =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">2</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>lm</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>a</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">3</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">4</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>b</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>]</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">1</span>    <span class="dv">4</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">2</span>    <span class="dv">5</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">3</span>    <span class="dv">6</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(lm, <span class="cf">function</span>(m) { m[, <span class="dv">1</span>] })        <span class="co"># extract the first column of all matrices in the list.</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>a</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>b</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
</div>
<div id="unloading-multiple-packages-at-once." class="section level4"
number="1.2.2.2">
<h4><span class="header-section-number">1.2.2.2</span> Unloading
multiple packages at once.</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ggplot2&quot;</span>, <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;readr&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(packages, <span class="cf">function</span>(p) { </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">detach</span>( <span class="fu">paste</span>(<span class="st">&quot;package:&quot;</span>, p, <span class="at">sep =</span> <span class="st">&#39;&#39;</span>, <span class="at">collapse =</span> <span class="st">&#39;&#39;</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">unload =</span> <span class="cn">TRUE</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                 })</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="cn">NULL</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="cn">NULL</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="cn">NULL</span></span></code></pre></div>
</div>
</div>
</div>
<div id="sapply-function." class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> <code>sapply()</code>
function.</h2>
<p>Let’s see only the arguments of this function.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(sapply)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (X, FUN, ..., <span class="at">simplify =</span> <span class="cn">TRUE</span>, <span class="at">USE.NAMES =</span> <span class="cn">TRUE</span>)  </span></code></pre></div>
<p>The <strong>only real difference</strong> with <code>lapply</code> is
that <code>sapply</code> will <strong>try to simplify</strong> the
result of <code>lapply</code>.</p>
<p>Infact, <code>sapply</code> <strong>calls <code>lapply</code> in it’s
body</strong> and then applies the following algorithm:</p>
<ul>
<li>If the result given by <code>lapply</code> is a list where all
elements have length 1, then <strong>a vector</strong> <strong>is
returned</strong>.<br />
</li>
<li>If the result given by <code>lapply</code> is a list where all
elements are a vector of the same length (&gt; 1), then <strong>a matrix
is returned</strong>.<br />
</li>
<li>If it can’t figure things out, <strong>a list is
returned</strong>.</li>
</ul>
<div
id="using-sapply-to-evaluate-a-function-multiple-times-trying-to-simplify-the-result."
class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Using
<code>sapply</code> to evaluate a function multiple times, trying to
simplify the result.</h3>
<div id="applying-the-mean-function-to-all-elements-of-a-list."
class="section level4" number="1.3.1.1">
<h4><span class="header-section-number">1.3.1.1</span> Applying the
<code>mean()</code> function to all elements of a list.</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>), <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">5</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(x, mean)    <span class="co"># result of `lapply` collapsed into a numeric vector (names are still mantained).</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>         a          b          c </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a> <span class="fl">3.0000000</span> <span class="sc">-</span><span class="fl">0.3532062</span>  <span class="fl">5.0772957</span> </span></code></pre></div>
</div>
<div id="applying-the-class-function-to-all-columns-of-a-data-frame."
class="section level4" number="1.3.1.2">
<h4><span class="header-section-number">1.3.1.2</span> Applying the
<code>class()</code> function to all columns of a data frame.</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(airquality)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  Ozone Solar.R Wind Temp Month Day</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    <span class="dv">41</span>     <span class="dv">190</span>  <span class="fl">7.4</span>   <span class="dv">67</span>     <span class="dv">5</span>   <span class="dv">1</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    <span class="dv">36</span>     <span class="dv">118</span>  <span class="fl">8.0</span>   <span class="dv">72</span>     <span class="dv">5</span>   <span class="dv">2</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    <span class="dv">12</span>     <span class="dv">149</span> <span class="fl">12.6</span>   <span class="dv">74</span>     <span class="dv">5</span>   <span class="dv">3</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    <span class="dv">18</span>     <span class="dv">313</span> <span class="fl">11.5</span>   <span class="dv">62</span>     <span class="dv">5</span>   <span class="dv">4</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>    <span class="cn">NA</span>      <span class="cn">NA</span> <span class="fl">14.3</span>   <span class="dv">56</span>     <span class="dv">5</span>   <span class="dv">5</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>    <span class="dv">28</span>      <span class="cn">NA</span> <span class="fl">14.9</span>   <span class="dv">66</span>     <span class="dv">5</span>   <span class="dv">6</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(airquality, class) <span class="co"># result of &#39;lapply&#39; collapsed into a character vector.</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    Ozone   Solar.R      Wind      Temp     Month       Day </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;integer&quot;</span> <span class="st">&quot;integer&quot;</span> <span class="st">&quot;numeric&quot;</span> <span class="st">&quot;integer&quot;</span> <span class="st">&quot;integer&quot;</span> <span class="st">&quot;integer&quot;</span> </span></code></pre></div>
</div>
<div id="applying-the-range-function-to-the-columns-of-a-data-frame."
class="section level4" number="1.3.1.3">
<h4><span class="header-section-number">1.3.1.3</span> Applying the
<code>range()</code> function to the columns of a data frame.</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>Mazda RX4         <span class="fl">21.0</span>   <span class="dv">6</span>  <span class="dv">160</span> <span class="dv">110</span> <span class="fl">3.90</span> <span class="fl">2.620</span> <span class="fl">16.46</span>  <span class="dv">0</span>  <span class="dv">1</span>    <span class="dv">4</span>    <span class="dv">4</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>Mazda RX4 Wag     <span class="fl">21.0</span>   <span class="dv">6</span>  <span class="dv">160</span> <span class="dv">110</span> <span class="fl">3.90</span> <span class="fl">2.875</span> <span class="fl">17.02</span>  <span class="dv">0</span>  <span class="dv">1</span>    <span class="dv">4</span>    <span class="dv">4</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>Datsun <span class="dv">710</span>        <span class="fl">22.8</span>   <span class="dv">4</span>  <span class="dv">108</span>  <span class="dv">93</span> <span class="fl">3.85</span> <span class="fl">2.320</span> <span class="fl">18.61</span>  <span class="dv">1</span>  <span class="dv">1</span>    <span class="dv">4</span>    <span class="dv">1</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>Hornet <span class="dv">4</span> Drive    <span class="fl">21.4</span>   <span class="dv">6</span>  <span class="dv">258</span> <span class="dv">110</span> <span class="fl">3.08</span> <span class="fl">3.215</span> <span class="fl">19.44</span>  <span class="dv">1</span>  <span class="dv">0</span>    <span class="dv">3</span>    <span class="dv">1</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>Hornet Sportabout <span class="fl">18.7</span>   <span class="dv">8</span>  <span class="dv">360</span> <span class="dv">175</span> <span class="fl">3.15</span> <span class="fl">3.440</span> <span class="fl">17.02</span>  <span class="dv">0</span>  <span class="dv">0</span>    <span class="dv">3</span>    <span class="dv">2</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>Valiant           <span class="fl">18.1</span>   <span class="dv">6</span>  <span class="dv">225</span> <span class="dv">105</span> <span class="fl">2.76</span> <span class="fl">3.460</span> <span class="fl">20.22</span>  <span class="dv">1</span>  <span class="dv">0</span>    <span class="dv">3</span>    <span class="dv">1</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>                            carname</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>Mazda RX4                 Mazda RX4</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>Mazda RX4 Wag         Mazda RX4 Wag</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>Datsun <span class="dv">710</span>               Datsun <span class="dv">710</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>Hornet <span class="dv">4</span> Drive       Hornet <span class="dv">4</span> Drive</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>Hornet Sportabout Hornet Sportabout</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>Valiant                     Valiant</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Only the four first colums of this data frame interest us, so let</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co"># select them first.</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>main_characteristics <span class="ot">&lt;-</span> mtcars[, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(main_characteristics)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;data.frame&quot;</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Now let&#39;s compute the &#39;range&#39; over this sub-data frame.</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(main_characteristics, range)        <span class="co"># This time sapply returns a matrix.</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>      mpg cyl  disp  hp</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="fl">10.4</span>   <span class="dv">4</span>  <span class="fl">71.1</span>  <span class="dv">52</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="fl">33.9</span>   <span class="dv">8</span> <span class="fl">472.0</span> <span class="dv">335</span></span></code></pre></div>
</div>
<div id="applying-the-unique-function-to-the-columns-of-a-data-frame."
class="section level4" number="1.3.1.4">
<h4><span class="header-section-number">1.3.1.4</span> Applying the
<code>unique()</code> function to the columns of a data frame.</h4>
<p>The <code>unique()</code> function returns a vector with all
duplicate elements removed.</p>
<p>So we are interested in knowing the <em>unique values</em> for
<em>each variable</em> in our previous sub-data frame of
<code>mtcars</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>unique_vals <span class="ot">&lt;-</span> <span class="fu">sapply</span>(main_characteristics, unique) <span class="co"># sapply can&#39;t simplify, returns a list</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>unique_vals</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>mpg</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="fl">21.0</span> <span class="fl">22.8</span> <span class="fl">21.4</span> <span class="fl">18.7</span> <span class="fl">18.1</span> <span class="fl">14.3</span> <span class="fl">24.4</span> <span class="fl">19.2</span> <span class="fl">17.8</span> <span class="fl">16.4</span> <span class="fl">17.3</span> <span class="fl">15.2</span> <span class="fl">10.4</span> <span class="fl">14.7</span> <span class="fl">32.4</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] <span class="fl">30.4</span> <span class="fl">33.9</span> <span class="fl">21.5</span> <span class="fl">15.5</span> <span class="fl">13.3</span> <span class="fl">27.3</span> <span class="fl">26.0</span> <span class="fl">15.8</span> <span class="fl">19.7</span> <span class="fl">15.0</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>cyl</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">6</span> <span class="dv">4</span> <span class="dv">8</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>disp</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="fl">160.0</span> <span class="fl">108.0</span> <span class="fl">258.0</span> <span class="fl">360.0</span> <span class="fl">225.0</span> <span class="fl">146.7</span> <span class="fl">140.8</span> <span class="fl">167.6</span> <span class="fl">275.8</span> <span class="fl">472.0</span> <span class="fl">460.0</span> <span class="fl">440.0</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>]  <span class="fl">78.7</span>  <span class="fl">75.7</span>  <span class="fl">71.1</span> <span class="fl">120.1</span> <span class="fl">318.0</span> <span class="fl">304.0</span> <span class="fl">350.0</span> <span class="fl">400.0</span>  <span class="fl">79.0</span> <span class="fl">120.3</span>  <span class="fl">95.1</span> <span class="fl">351.0</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">25</span>] <span class="fl">145.0</span> <span class="fl">301.0</span> <span class="fl">121.0</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>hp</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">110</span>  <span class="dv">93</span> <span class="dv">175</span> <span class="dv">105</span> <span class="dv">245</span>  <span class="dv">62</span>  <span class="dv">95</span> <span class="dv">123</span> <span class="dv">180</span> <span class="dv">205</span> <span class="dv">215</span> <span class="dv">230</span>  <span class="dv">66</span>  <span class="dv">52</span>  <span class="dv">65</span>  <span class="dv">97</span> <span class="dv">150</span>  <span class="dv">91</span> <span class="dv">113</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">20</span>] <span class="dv">264</span> <span class="dv">335</span> <span class="dv">109</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s see the length of each element of unique_vals</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(unique_vals, length)</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a> mpg  cyl disp   hp </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">25</span>    <span class="dv">3</span>   <span class="dv">27</span>   <span class="dv">22</span> </span></code></pre></div>
</div>
</div>
</div>
<div id="vapply-function." class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> <code>vapply()</code>
function.</h2>
<p>Whereas <code>sapply</code> tries to <em>guess</em> the correct
<strong>format of the result</strong>, <code>vapply</code> allows us to
<strong>specify it explicitly</strong>.</p>
<ul>
<li>If the result <em>doesn’t match</em> the specified format,
<code>vapply</code> will <strong>throw an error</strong> causing the
operation to stop.<br />
</li>
<li>This can <strong>prevent significant problems</strong> coming from
<strong>unexpected return values from</strong>
<strong><code>sapply</code></strong>.<br />
</li>
<li>We might think of <code>vapply</code> as being
<strong>safer</strong> than <code>sapply</code>, since it requires us to
specify the format of the output in advance, instead of just allowing R
to <em>guess</em> what we wanted.<br />
</li>
<li>In addition, <code>vapply</code> <strong>may perform faster</strong>
than <code>sapply</code> for <em>large datasets</em>.
<ul>
<li>However, when doing data analysis interactively (at the prompt),
sapply() saves us some typing and will often be good enough.</li>
</ul></li>
</ul>
<p>Example:</p>
<ul>
<li>Let’s suppose that <em>we are not sure</em> whereas the
<code>unique()</code> function returns “the number” of unique values or
a list with the unique values itself.<br />
</li>
<li>And suppose also that we need the <strong>result</strong> to be a
<strong>numeric vector of length 1</strong>, when we apply the
<code>unique()</code> function to each column of our dataset.<br />
</li>
<li>So what we do is use <code>vapply()</code> to avoid unexpected or
unwanted results.</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vapply</span>(main_characteristics, unique, <span class="fu">numeric</span>(<span class="dv">1</span>))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">vapply</span>(main_characteristics, unique, <span class="fu">numeric</span>(<span class="dv">1</span>))<span class="sc">:</span> Los valores deben ser de longitud <span class="dv">1</span>, </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>pero el resultado <span class="fu">FUN</span>(X [[<span class="dv">1</span>]]) es la longitud <span class="dv">25</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">vapply</span>(airquality, class, <span class="fu">character</span>(<span class="dv">1</span>))</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    Ozone   Solar.R      Wind      Temp     Month       Day </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;integer&quot;</span> <span class="st">&quot;integer&quot;</span> <span class="st">&quot;numeric&quot;</span> <span class="st">&quot;integer&quot;</span> <span class="st">&quot;integer&quot;</span> <span class="st">&quot;integer&quot;</span> </span></code></pre></div>
</div>
<div id="split-function.-combination-with-lapply-and-sapply."
class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> <code>split()</code>
function. Combination with <code>lapply()</code> and
<code>sapply()</code>.</h2>
<p>This function takes a vector, list or dataframe and <strong>splits it
into</strong> <strong><em>groups</em></strong> <strong>determined by
the</strong> <strong><em>levels of a factor or list of
factors</em></strong>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(split)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, f, <span class="at">drop =</span> <span class="cn">FALSE</span>, ...)  </span></code></pre></div>
<ul>
<li>So <code>x</code> is a <em>vector</em> or <em>list</em> or <em>data
frame</em>.<br />
</li>
<li><code>f</code> is a <em>factor</em> or a <em>list of factors</em>.
<ul>
<li>if <code>f</code> don’t have the same <em>length</em> of
<code>x</code>, it is recycled as necessary (and if the length of
<code>x</code> is not a multiple of the length of <code>f</code> a
warning is printed).<br />
</li>
<li>if <code>f</code> is not a factor, then it <strong>is coerced to
factor</strong>.<br />
</li>
<li>if <code>f</code> is a list of factors, an
<strong><code>interaction</code> occurs</strong> (a new factor with
concatenated levels is created with the <code>interaction()</code>
function -see below-).<br />
</li>
</ul></li>
<li><code>drop</code> indicates whether <em>empty levels</em> of the
factor should be dropped or not.<br />
</li>
<li>This function always <em>returns a list</em>.</li>
</ul>
<blockquote>
<p>A <strong>common paradigm in R</strong> is the
<strong>combination</strong> of <code>split()</code> with
<code>lapply()</code> and <code>sapply()</code>.<br />
The <strong>basic idea</strong> is as follows:</p>
</blockquote>
<blockquote>
<ul>
<li>Take a dataset in a “canonical” form (besides the <em>column</em>
containing the <em>values to calculate a</em> <em>satistic for</em>,
there’s must be another <em>column</em> containing the <em>group to
which each value belongs</em> -this is a factor variable which levels
defines the different groups-).<br />
</li>
<li><strong>Split</strong> it into subsets (groups) defined by the
grouping variable.<br />
</li>
<li><strong>Apply</strong> the function you want to the members of each
subset (group).<br />
</li>
<li><strong>Combine</strong> the results.</li>
</ul>
</blockquote>
<div id="basic-example." class="section level3" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Basic example.</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>), <span class="fu">runif</span>(<span class="dv">10</span>), <span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="dv">1</span>))  <span class="co"># 3 groups of 10 random distributed numbers.</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="dv">3</span>, <span class="dv">10</span>)    <span class="co"># we want to split those 3 groups of 10, so we create a factor variable with</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                  <span class="co"># 3 levels, repeted 10 times each.</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>f</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">split</span>(x, f)       <span class="co"># voilá.</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">1</span><span class="st">`</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="sc">-</span><span class="fl">0.327101015</span> <span class="sc">-</span><span class="fl">1.569082185</span> <span class="sc">-</span><span class="fl">0.367450756</span>  <span class="fl">1.364434929</span> <span class="sc">-</span><span class="fl">0.334281365</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a> [<span class="dv">6</span>]  <span class="fl">0.732750042</span>  <span class="fl">0.946585640</span>  <span class="fl">0.004398704</span> <span class="sc">-</span><span class="fl">0.352322306</span> <span class="sc">-</span><span class="fl">0.529695509</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">2</span><span class="st">`</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="fl">0.77022536</span> <span class="fl">0.77818130</span> <span class="fl">0.14378728</span> <span class="fl">0.51552615</span> <span class="fl">0.59724049</span> <span class="fl">0.50584302</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="fl">0.38609963</span> <span class="fl">0.42609810</span> <span class="fl">0.01175973</span> <span class="fl">0.91933177</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">3</span><span class="st">`</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="sc">-</span><span class="fl">0.4088505</span>  <span class="fl">1.9160193</span>  <span class="fl">0.8087210</span>  <span class="fl">1.8032832</span>  <span class="fl">2.8874745</span>  <span class="fl">2.4738812</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>]  <span class="fl">1.6772685</span>  <span class="fl">1.3799627</span>  <span class="fl">0.8072016</span>  <span class="fl">2.5778918</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we want to calculate the mean of each of those three groups.</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(<span class="fu">split</span>(x, f), mean)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">1</span><span class="st">`</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">0.04317638</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">2</span><span class="st">`</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.5054093</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">3</span><span class="st">`</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">1.592285</span></span></code></pre></div>
</div>
<div id="splitting-a-data-frame." class="section level3" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Splitting a data
frame.</h3>
<p>Let’s split the <code>airquality</code> data frame by the
<code>Month</code> variable.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">&lt;-</span> <span class="fu">split</span>(airquality, airquality<span class="sc">$</span>Month)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(s)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>List of <span class="dv">5</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="dv">5</span><span class="sc">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>  <span class="dv">31</span> obs. of  <span class="dv">6</span> variables<span class="sc">:</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Ozone  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">41</span> <span class="dv">36</span> <span class="dv">12</span> <span class="dv">18</span> <span class="cn">NA</span> <span class="dv">28</span> <span class="dv">23</span> <span class="dv">19</span> <span class="dv">8</span> <span class="cn">NA</span> ...</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Solar.R<span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">190</span> <span class="dv">118</span> <span class="dv">149</span> <span class="dv">313</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="dv">299</span> <span class="dv">99</span> <span class="dv">19</span> <span class="dv">194</span> ...</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Wind   <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="fl">7.4</span> <span class="dv">8</span> <span class="fl">12.6</span> <span class="fl">11.5</span> <span class="fl">14.3</span> <span class="fl">14.9</span> <span class="fl">8.6</span> <span class="fl">13.8</span> <span class="fl">20.1</span> <span class="fl">8.6</span> ...</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Temp   <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">67</span> <span class="dv">72</span> <span class="dv">74</span> <span class="dv">62</span> <span class="dv">56</span> <span class="dv">66</span> <span class="dv">65</span> <span class="dv">59</span> <span class="dv">61</span> <span class="dv">69</span> ...</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Month  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> <span class="dv">5</span> ...</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day    <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="dv">6</span><span class="sc">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>  <span class="dv">30</span> obs. of  <span class="dv">6</span> variables<span class="sc">:</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Ozone  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="dv">29</span> <span class="cn">NA</span> <span class="dv">71</span> <span class="dv">39</span> ...</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Solar.R<span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">286</span> <span class="dv">287</span> <span class="dv">242</span> <span class="dv">186</span> <span class="dv">220</span> <span class="dv">264</span> <span class="dv">127</span> <span class="dv">273</span> <span class="dv">291</span> <span class="dv">323</span> ...</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Wind   <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="fl">8.6</span> <span class="fl">9.7</span> <span class="fl">16.1</span> <span class="fl">9.2</span> <span class="fl">8.6</span> <span class="fl">14.3</span> <span class="fl">9.7</span> <span class="fl">6.9</span> <span class="fl">13.8</span> <span class="fl">11.5</span> ...</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Temp   <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">78</span> <span class="dv">74</span> <span class="dv">67</span> <span class="dv">84</span> <span class="dv">85</span> <span class="dv">79</span> <span class="dv">82</span> <span class="dv">87</span> <span class="dv">90</span> <span class="dv">87</span> ...</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Month  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> <span class="dv">6</span> ...</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day    <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="dv">7</span><span class="sc">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>  <span class="dv">31</span> obs. of  <span class="dv">6</span> variables<span class="sc">:</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Ozone  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">135</span> <span class="dv">49</span> <span class="dv">32</span> <span class="cn">NA</span> <span class="dv">64</span> <span class="dv">40</span> <span class="dv">77</span> <span class="dv">97</span> <span class="dv">97</span> <span class="dv">85</span> ...</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Solar.R<span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">269</span> <span class="dv">248</span> <span class="dv">236</span> <span class="dv">101</span> <span class="dv">175</span> <span class="dv">314</span> <span class="dv">276</span> <span class="dv">267</span> <span class="dv">272</span> <span class="dv">175</span> ...</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Wind   <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="fl">4.1</span> <span class="fl">9.2</span> <span class="fl">9.2</span> <span class="fl">10.9</span> <span class="fl">4.6</span> <span class="fl">10.9</span> <span class="fl">5.1</span> <span class="fl">6.3</span> <span class="fl">5.7</span> <span class="fl">7.4</span> ...</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Temp   <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">84</span> <span class="dv">85</span> <span class="dv">81</span> <span class="dv">84</span> <span class="dv">83</span> <span class="dv">83</span> <span class="dv">88</span> <span class="dv">92</span> <span class="dv">92</span> <span class="dv">89</span> ...</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Month  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">7</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">7</span> ...</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day    <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="dv">8</span><span class="sc">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>  <span class="dv">31</span> obs. of  <span class="dv">6</span> variables<span class="sc">:</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Ozone  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">39</span> <span class="dv">9</span> <span class="dv">16</span> <span class="dv">78</span> <span class="dv">35</span> <span class="dv">66</span> <span class="dv">122</span> <span class="dv">89</span> <span class="dv">110</span> <span class="cn">NA</span> ...</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Solar.R<span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">83</span> <span class="dv">24</span> <span class="dv">77</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="cn">NA</span> <span class="dv">255</span> <span class="dv">229</span> <span class="dv">207</span> <span class="dv">222</span> ...</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Wind   <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="fl">6.9</span> <span class="fl">13.8</span> <span class="fl">7.4</span> <span class="fl">6.9</span> <span class="fl">7.4</span> <span class="fl">4.6</span> <span class="dv">4</span> <span class="fl">10.3</span> <span class="dv">8</span> <span class="fl">8.6</span> ...</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Temp   <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">81</span> <span class="dv">81</span> <span class="dv">82</span> <span class="dv">86</span> <span class="dv">85</span> <span class="dv">87</span> <span class="dv">89</span> <span class="dv">90</span> <span class="dv">90</span> <span class="dv">92</span> ...</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Month  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> <span class="dv">8</span> ...</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day    <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">31</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="dv">9</span><span class="sc">:</span><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>  <span class="dv">30</span> obs. of  <span class="dv">6</span> variables<span class="sc">:</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Ozone  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">96</span> <span class="dv">78</span> <span class="dv">73</span> <span class="dv">91</span> <span class="dv">47</span> <span class="dv">32</span> <span class="dv">20</span> <span class="dv">23</span> <span class="dv">21</span> <span class="dv">24</span> ...</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Solar.R<span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">167</span> <span class="dv">197</span> <span class="dv">183</span> <span class="dv">189</span> <span class="dv">95</span> <span class="dv">92</span> <span class="dv">252</span> <span class="dv">220</span> <span class="dv">230</span> <span class="dv">259</span> ...</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Wind   <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="fl">6.9</span> <span class="fl">5.1</span> <span class="fl">2.8</span> <span class="fl">4.6</span> <span class="fl">7.4</span> <span class="fl">15.5</span> <span class="fl">10.9</span> <span class="fl">10.3</span> <span class="fl">10.9</span> <span class="fl">9.7</span> ...</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Temp   <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">91</span> <span class="dv">92</span> <span class="dv">93</span> <span class="dv">93</span> <span class="dv">87</span> <span class="dv">84</span> <span class="dv">80</span> <span class="dv">78</span> <span class="dv">75</span> <span class="dv">73</span> ...</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Month  <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">9</span> <span class="dv">9</span> <span class="dv">9</span> <span class="dv">9</span> <span class="dv">9</span> <span class="dv">9</span> <span class="dv">9</span> <span class="dv">9</span> <span class="dv">9</span> <span class="dv">9</span> ...</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>  ..<span class="sc">$</span> Day    <span class="sc">:</span> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> ...</span></code></pre></div>
<ul>
<li><code>Month</code> variable in <code>airquality</code> data frame is
an <code>integer</code> variable that has five values (5, 6, 7, 8 and
9), so it is <strong>coerced</strong> into <code>factor</code> class
with <code>five levels</code>.<br />
</li>
<li>Now we have <strong>five sub-data frames</strong> with <em>data of a
single month</em> each.</li>
</ul>
<p>So, for example, if we want the mean of all columns -or some columns-
in each sub-data frame we can use then <code>lapply</code> and
<code>sapply</code> functions over each sub-data frame, applying the
<code>colMeans</code> function, as follows.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Means of each of all columns in each sub-data frame.</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(s, colMeans)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">5</span><span class="st">`</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>   Ozone  Solar.R     Wind     Temp    Month      Day </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA</span>       <span class="cn">NA</span> <span class="fl">11.62258</span> <span class="fl">65.54839</span>  <span class="fl">5.00000</span> <span class="fl">16.00000</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">6</span><span class="st">`</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    Ozone   Solar.R      Wind      Temp     Month       Day </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>       <span class="cn">NA</span> <span class="fl">190.16667</span>  <span class="fl">10.26667</span>  <span class="fl">79.10000</span>   <span class="fl">6.00000</span>  <span class="fl">15.50000</span> </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">7</span><span class="st">`</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>     Ozone    Solar.R       Wind       Temp      Month        Day </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="cn">NA</span> <span class="fl">216.483871</span>   <span class="fl">8.941935</span>  <span class="fl">83.903226</span>   <span class="fl">7.000000</span>  <span class="fl">16.000000</span> </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">8</span><span class="st">`</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    Ozone   Solar.R      Wind      Temp     Month       Day </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>       <span class="cn">NA</span>        <span class="cn">NA</span>  <span class="fl">8.793548</span> <span class="fl">83.967742</span>  <span class="fl">8.000000</span> <span class="fl">16.000000</span> </span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">9</span><span class="st">`</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>   Ozone  Solar.R     Wind     Temp    Month      Day </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA</span> <span class="fl">167.4333</span>  <span class="fl">10.1800</span>  <span class="fl">76.9000</span>   <span class="fl">9.0000</span>  <span class="fl">15.5000</span> </span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Means of some columns in each sub-data frame.</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="co">#  - As we are not applying the colMeans function to the entire sub-data frame, we need an</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co">#    anonymous function to implement the additional subsetting of taking only some columns</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="co">#    of each sub-data frame.</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="co">#  - Infact, the second argument of lapply() is just a function, we cannot make any further</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="co">#    subsetting there (we use the first argument to place the subsets we are interested on),</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="co">#    so if we want to apply any function to &quot;subsets of each subset of the list given as first</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="co">#    argument&quot;, we could get arround this by passing an anonymous function that calls the function</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="co">#    we want over a further subset of each subset that lapply passes to the anonymous function.</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(s, <span class="cf">function</span>(x) {</span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>        <span class="fu">colMeans</span>(x[ , <span class="fu">c</span>(<span class="st">&quot;Ozone&quot;</span>, <span class="st">&quot;Solar.R&quot;</span>, <span class="st">&quot;Wind&quot;</span>)])</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">5</span><span class="st">`</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>   Ozone  Solar.R     Wind </span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA</span>       <span class="cn">NA</span> <span class="fl">11.62258</span> </span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">6</span><span class="st">`</span></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>    Ozone   Solar.R      Wind </span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>       <span class="cn">NA</span> <span class="fl">190.16667</span>  <span class="fl">10.26667</span> </span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">7</span><span class="st">`</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>     Ozone    Solar.R       Wind </span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>        <span class="cn">NA</span> <span class="fl">216.483871</span>   <span class="fl">8.941935</span> </span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">8</span><span class="st">`</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>   Ozone  Solar.R     Wind </span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA</span>       <span class="cn">NA</span> <span class="fl">8.793548</span> </span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">9</span><span class="st">`</span></span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a>   Ozone  Solar.R     Wind </span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA</span> <span class="fl">167.4333</span>  <span class="fl">10.1800</span> </span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Using sapply() might be better here for a more readable output.</span></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(s, <span class="cf">function</span>(x) {</span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a>        <span class="fu">colMeans</span>(x[ , <span class="fu">c</span>(<span class="st">&quot;Ozone&quot;</span>, <span class="st">&quot;Solar.R&quot;</span>, <span class="st">&quot;Wind&quot;</span>)])</span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a>               <span class="dv">5</span>         <span class="dv">6</span>          <span class="dv">7</span>        <span class="dv">8</span>        <span class="dv">9</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a>Ozone         <span class="cn">NA</span>        <span class="cn">NA</span>         <span class="cn">NA</span>       <span class="cn">NA</span>       <span class="cn">NA</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a>Solar.R       <span class="cn">NA</span> <span class="fl">190.16667</span> <span class="fl">216.483871</span>       <span class="cn">NA</span> <span class="fl">167.4333</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a>Wind    <span class="fl">11.62258</span>  <span class="fl">10.26667</span>   <span class="fl">8.941935</span> <span class="fl">8.793548</span>  <span class="fl">10.1800</span></span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a><span class="co"># And even better if we remove all missing values.</span></span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(s, <span class="cf">function</span>(x) {</span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a>        <span class="fu">colMeans</span>(x[ , <span class="fu">c</span>(<span class="st">&quot;Ozone&quot;</span>, <span class="st">&quot;Solar.R&quot;</span>, <span class="st">&quot;Wind&quot;</span>)], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a>                <span class="dv">5</span>         <span class="dv">6</span>          <span class="dv">7</span>          <span class="dv">8</span>         <span class="dv">9</span></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a>Ozone    <span class="fl">23.61538</span>  <span class="fl">29.44444</span>  <span class="fl">59.115385</span>  <span class="fl">59.961538</span>  <span class="fl">31.44828</span></span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a>Solar.R <span class="fl">181.29630</span> <span class="fl">190.16667</span> <span class="fl">216.483871</span> <span class="fl">171.857143</span> <span class="fl">167.43333</span></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a>Wind     <span class="fl">11.62258</span>  <span class="fl">10.26667</span>   <span class="fl">8.941935</span>   <span class="fl">8.793548</span>  <span class="fl">10.18000</span></span></code></pre></div>
</div>
<div
id="splitting-according-to-levels-defined-in-more-than-one-variable.-the-interaction-function."
class="section level3" number="1.5.3">
<h3><span class="header-section-number">1.5.3</span> Splitting according
to levels defined in more than one variable. The
<code>interaction()</code> function.</h3>
<p>We can create a factor with multiple levels by creating an
<code>interaction</code> of two or more factors.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(interaction)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (..., <span class="at">drop =</span> <span class="cn">FALSE</span>, <span class="at">sep =</span> <span class="st">&quot;.&quot;</span>, <span class="at">lex.order =</span> <span class="cn">FALSE</span>)  </span></code></pre></div>
<p>The <code>interaction()</code> function:</p>
<ul>
<li>takes factors or a list of factors;<br />
</li>
<li>and returns a factor wich represents the interaction of the given
factors.
<ul>
<li>The result of interaction is <strong>always
unordered</strong>.<br />
</li>
<li>The new levels of the result are labelled as the levels of the
individual factors joined by <code>sep</code> which is <code>.</code> by
default.<br />
</li>
<li>When <code>lex.order</code> is <code>FALSE</code>, the <em>reverse
of lexicographic ordering occurs</em>, that is, levels are ordered so
the level of the first factor varies fastest, then the second and so
on.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>); x</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]  <span class="fl">0.5962341</span> <span class="sc">-</span><span class="fl">1.1735769</span> <span class="sc">-</span><span class="fl">0.1556425</span> <span class="sc">-</span><span class="fl">1.9189098</span> <span class="sc">-</span><span class="fl">0.1952588</span> <span class="sc">-</span><span class="fl">2.5923277</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>]  <span class="fl">1.3140022</span> <span class="sc">-</span><span class="fl">0.6355430</span> <span class="sc">-</span><span class="fl">0.4299788</span> <span class="sc">-</span><span class="fl">0.1693183</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="dv">2</span>, <span class="dv">5</span>); f1</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> <span class="dv">1</span> <span class="dv">2</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>f2 <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="dv">5</span>, <span class="dv">2</span>); f2</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">5</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="fu">interaction</span>(f1, f2)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="fl">1.1</span> <span class="fl">1.1</span> <span class="fl">1.2</span> <span class="fl">1.2</span> <span class="fl">1.3</span> <span class="fl">2.3</span> <span class="fl">2.4</span> <span class="fl">2.4</span> <span class="fl">2.5</span> <span class="fl">2.5</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> <span class="fl">1.1</span> <span class="fl">2.1</span> <span class="fl">1.2</span> <span class="fl">2.2</span> <span class="fl">1.3</span> <span class="fl">2.3</span> <span class="fl">1.4</span> <span class="fl">2.4</span> <span class="fl">1.5</span> <span class="fl">2.5</span></span></code></pre></div>
<p>Remembering that, when <code>split()</code> function takes a
<strong>list of factors</strong> it calls <code>interaction()</code>, we
can proceed as follows.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">split</span>(x, <span class="fu">list</span>(f1, f2)))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>List of <span class="dv">10</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">1.1</span><span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="fl">0.596</span> <span class="sc">-</span><span class="fl">1.174</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">2.1</span><span class="sc">:</span> <span class="fu">num</span>(<span class="dv">0</span>) </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">1.2</span><span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="sc">-</span><span class="fl">0.156</span> <span class="sc">-</span><span class="fl">1.919</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">2.2</span><span class="sc">:</span> <span class="fu">num</span>(<span class="dv">0</span>) </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">1.3</span><span class="sc">:</span> num <span class="sc">-</span><span class="fl">0.195</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">2.3</span><span class="sc">:</span> num <span class="sc">-</span><span class="fl">2.59</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">1.4</span><span class="sc">:</span> <span class="fu">num</span>(<span class="dv">0</span>) </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">2.4</span><span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="fl">1.314</span> <span class="sc">-</span><span class="fl">0.636</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">1.5</span><span class="sc">:</span> <span class="fu">num</span>(<span class="dv">0</span>) </span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">2.5</span><span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="sc">-</span><span class="fl">0.43</span> <span class="sc">-</span><span class="fl">0.169</span></span></code></pre></div>
<p>An interaction may result in many <strong>levels that are
empty</strong>, that can be <strong>dropped out</strong>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">split</span>(x, <span class="fu">list</span>(f1, f2), <span class="at">drop =</span> <span class="cn">TRUE</span>))</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>List of <span class="dv">6</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">1.1</span><span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="fl">0.596</span> <span class="sc">-</span><span class="fl">1.174</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">1.2</span><span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="sc">-</span><span class="fl">0.156</span> <span class="sc">-</span><span class="fl">1.919</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">1.3</span><span class="sc">:</span> num <span class="sc">-</span><span class="fl">0.195</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">2.3</span><span class="sc">:</span> num <span class="sc">-</span><span class="fl">2.59</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">2.4</span><span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="fl">1.314</span> <span class="sc">-</span><span class="fl">0.636</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> <span class="fl">2.5</span><span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="sc">-</span><span class="fl">0.43</span> <span class="sc">-</span><span class="fl">0.169</span></span></code></pre></div>
</div>
</div>
<div id="tapply-function." class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> <code>tapply()</code>
function.</h2>
<p>This function is used to apply a function over <strong>subsets
(groups) of a</strong> <strong><em>vector</em></strong>.</p>
<ul>
<li><p><code>tapply()</code> can be thought as a combination of
<code>split()</code> and <code>sapply()</code> <strong>for vectors
only</strong>.</p></li>
<li><p>The description given in the documentation, states as
follows:</p>
<ul>
<li><code>tapply</code><em>applies a function to each cell of a ragged
array, that is to each (non-empty)</em> <em>group of values given by a
unique combination of the</em> <strong><em>levels</em></strong> <em>of
certain factors</em>.</li>
</ul></li>
<li><p>By defalut, it will try to <code>simplify</code> the result
(unless the applied function returns more than a single value).</p></li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tapply)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (X, INDEX, <span class="at">FUN =</span> <span class="cn">NULL</span>, ..., <span class="at">default =</span> <span class="cn">NA</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)  </span></code></pre></div>
<p>So, its arguments are:</p>
<ul>
<li><code>X</code> is a <strong>vector</strong>.<br />
</li>
<li><code>INDEX</code> is a <strong>factor</strong> or a <strong>list of
factors</strong> (or else they are <strong>coerced to factors</strong>).
<ul>
<li>This argument has to be of <em>the same length</em> of
<code>X</code>.<br />
</li>
</ul></li>
<li><code>FUN</code> is the function to be applied.<br />
</li>
<li><code>...</code> contains other arguments to be passed to
<code>FUN</code>.</li>
</ul>
<div id="group-means-and-ranges-from-a-vector-of-numbers."
class="section level3" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Group means and
ranges, from a vector of numbers.</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>), <span class="fu">runif</span>(<span class="dv">10</span>), <span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="dv">1</span>)); x</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]  <span class="fl">0.61221817</span>  <span class="fl">0.67834018</span>  <span class="fl">0.56795197</span> <span class="sc">-</span><span class="fl">0.57254260</span> <span class="sc">-</span><span class="fl">1.36329126</span> <span class="sc">-</span><span class="fl">0.38872224</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>]  <span class="fl">0.27791413</span> <span class="sc">-</span><span class="fl">0.82308112</span> <span class="sc">-</span><span class="fl">0.06884093</span> <span class="sc">-</span><span class="fl">1.16766233</span>  <span class="fl">0.49668522</span>  <span class="fl">0.90223775</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>]  <span class="fl">0.55126397</span>  <span class="fl">0.12856468</span>  <span class="fl">0.44200979</span>  <span class="fl">0.19229770</span>  <span class="fl">0.43490062</span>  <span class="fl">0.22513340</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>]  <span class="fl">0.96109628</span>  <span class="fl">0.44842747</span>  <span class="fl">1.76258651</span>  <span class="fl">2.11143108</span>  <span class="fl">0.07679305</span>  <span class="fl">1.16434184</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">25</span>]  <span class="fl">2.15482519</span>  <span class="fl">0.94347858</span> <span class="sc">-</span><span class="fl">1.12936065</span>  <span class="fl">1.34484576</span> <span class="sc">-</span><span class="fl">0.90495545</span>  <span class="fl">0.18882985</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">gl</span>(<span class="dv">3</span>, <span class="dv">10</span>); f</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span> <span class="dv">3</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(x, f, mean)      <span class="co"># equivalent to `sapply(split(x, f), mean)`.</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">1</span>          <span class="dv">2</span>          <span class="dv">3</span> </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="fl">0.2247716</span>  <span class="fl">0.4782617</span>  <span class="fl">0.7712816</span> </span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(x, f, range)     <span class="co"># equivalent to `lapply(split(x, f), mean)`.</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">1</span><span class="st">`</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">1.3632913</span>  <span class="fl">0.6783402</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">2</span><span class="st">`</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.1285647</span> <span class="fl">0.9610963</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">3</span><span class="st">`</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">1.129361</span>  <span class="fl">2.154825</span></span></code></pre></div>
</div>
<div
id="proportion-of-an-indicator-variable-within-each-group-determined-by-another-variable."
class="section level3" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> Proportion of an
<em>indicator</em> variable within each group determined by another
variable.</h3>
<p>We usually find in data frames the so called <em>indicator</em>
variables, that is, binary variables that <em>indicates</em> the
existance -or absence- of a certain characteristic.</p>
<ul>
<li>For example, the <code>am</code> variable in the <code>mtcars</code>
data frame, indicates observed cars that have <em>automatic
transmission</em> (<code>am</code>==0) or <em>manual transmission</em>
(<code>am</code>==1).</li>
</ul>
<p>Noting that if we take the aritmetic <code>mean</code> of a
<em>binary variable</em> we get the <strong>proportion</strong>
<strong>of 1s</strong>, let’s use <code>tapply</code> to apply
<code>mean</code> function to the <code>am</code> variable separately
for each <code>cyl</code> group of cars, thus giving us the
<em>proportion</em> of *manual transmission cars** within <em>each
number of cylinder group of cars</em>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(mtcars<span class="sc">$</span>am, mtcars<span class="sc">$</span>cyl, mean)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>        <span class="dv">4</span>         <span class="dv">6</span>         <span class="dv">8</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fl">0.7272727</span> <span class="fl">0.4285714</span> <span class="fl">0.1428571</span> </span></code></pre></div>
</div>
<div
id="summary-of-a-numerical-variable-within-both-groups-of-an-indicator-variable."
class="section level3" number="1.6.3">
<h3><span class="header-section-number">1.6.3</span> Summary of a
numerical variable within both groups of an <em>indicator</em>
variable.</h3>
<p>For example, we can look at a summary of cars’ gross horsepower
(<code>hp</code> variable) values for automatic and manual transmission
cars.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(mtcars<span class="sc">$</span>hp, mtcars<span class="sc">$</span>am, summary)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">0</span><span class="st">`</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>   <span class="fl">62.0</span>   <span class="fl">116.5</span>   <span class="fl">175.0</span>   <span class="fl">160.3</span>   <span class="fl">192.5</span>   <span class="fl">245.0</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="st">`</span><span class="at">1</span><span class="st">`</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>   <span class="fl">52.0</span>    <span class="fl">66.0</span>   <span class="fl">109.0</span>   <span class="fl">126.8</span>   <span class="fl">113.0</span>   <span class="fl">335.0</span> </span></code></pre></div>
</div>
</div>
<div
id="apply-function-and-its-shortcuts-rowsums-rowmeans-colsums-colmeans."
class="section level2" number="1.7">
<h2><span class="header-section-number">1.7</span> <code>apply()</code>
function, and it’s shortcuts <code>rowSums()</code>,
<code>rowMeans()</code>, <code>colSums()</code>,
<code>colMeans()</code>.</h2>
<p>This function is used to evaluate another function (usually an
anonymous one) <strong>over the margins of</strong> <strong>an
array</strong>.</p>
<ul>
<li>Using <code>apply</code> is not really faster than witing a loop,
but the job gets done in one line of code with it.</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(apply)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (X, MARGIN, FUN, ...)  </span></code></pre></div>
<ul>
<li><code>X</code> is an <strong>array</strong>. It can be:
<ul>
<li>a 1-dimensional array (vector).<br />
</li>
<li>a 2-dimensional array (matrix).<br />
</li>
<li>a n-dimensional array.<br />
</li>
</ul></li>
<li><code>MARGIN</code> an <strong>integer vector</strong> indicating
which <strong>margins</strong> should be <strong>retained</strong>.
<ul>
<li>This argument essentially indicates which
<strong><em>dimension</em></strong> of the array we want to
<strong>preserve or retain</strong>, the other dimensions will be
<strong>collapsed</strong> in the calculation.<br />
</li>
</ul></li>
<li><code>FUN</code> is the function to be applied.<br />
</li>
<li><code>...</code> is for other arguments to be passed to
<code>FUN</code>.</li>
</ul>
<div
id="most-often-use-apply-a-function-to-the-rows-or-columns-of-a-matrix."
class="section level3" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Most often use:
apply a function to the rows or columns of a matrix.</h3>
<p>Let’s calculate the <code>sum()</code> of the rows and the
<code>mean()</code> of the column of a matrix.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">200</span>), <span class="dv">20</span>, <span class="dv">10</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">1</span>, sum)       <span class="co"># take the sum of each row (&quot;preserve&quot; 1st. dimension, &quot;collapse&quot; the 2nd).</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="sc">-</span><span class="fl">6.25761980</span>  <span class="fl">2.68819537</span> <span class="sc">-</span><span class="fl">2.26298591</span> <span class="sc">-</span><span class="fl">2.76100007</span>  <span class="fl">7.31865874</span> <span class="sc">-</span><span class="fl">3.26491606</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>]  <span class="fl">2.80889372</span>  <span class="fl">1.28979665</span> <span class="sc">-</span><span class="fl">4.48298220</span>  <span class="fl">2.06257245</span> <span class="sc">-</span><span class="fl">2.40498391</span>  <span class="fl">4.47050402</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>]  <span class="fl">0.77325929</span>  <span class="fl">0.26416619</span>  <span class="fl">4.85799121</span>  <span class="fl">2.77346122</span> <span class="sc">-</span><span class="fl">6.85225139</span> <span class="sc">-</span><span class="fl">0.13799960</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] <span class="sc">-</span><span class="fl">0.06577448</span> <span class="sc">-</span><span class="fl">2.56289787</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">2</span>, mean)       <span class="co"># take the mean of each column (&quot;preserve&quot; 2nd. dimension, &quot;collapse&quot; the 1st).</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]  <span class="fl">0.26788937</span> <span class="sc">-</span><span class="fl">0.04893217</span> <span class="sc">-</span><span class="fl">0.31775109</span>  <span class="fl">0.04588463</span> <span class="sc">-</span><span class="fl">0.02798894</span>  <span class="fl">0.07064680</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="sc">-</span><span class="fl">0.23878366</span>  <span class="fl">0.10528597</span> <span class="sc">-</span><span class="fl">0.18662038</span>  <span class="fl">0.24307387</span></span></code></pre></div>
<p>Now, we want to compute the <code>quantile()</code> of the rows of a
matrix.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">1</span>, quantile, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>))    <span class="co"># further `probs` argumnet to quintile().</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>          [,<span class="dv">1</span>]       [,<span class="dv">2</span>]       [,<span class="dv">3</span>]        [,<span class="dv">4</span>]       [,<span class="dv">5</span>]       [,<span class="dv">6</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span>% <span class="sc">-</span><span class="fl">1.1668807</span> <span class="sc">-</span><span class="fl">0.5095380</span> <span class="sc">-</span><span class="fl">0.9468340</span> <span class="sc">-</span><span class="fl">0.46364414</span> <span class="sc">-</span><span class="fl">0.3303423</span> <span class="sc">-</span><span class="fl">0.8856327</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="dv">75</span>%  <span class="fl">0.2756788</span>  <span class="fl">0.8000719</span>  <span class="fl">0.6240771</span>  <span class="fl">0.09520197</span>  <span class="fl">1.5001213</span>  <span class="fl">0.1877051</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">7</span>]       [,<span class="dv">8</span>]       [,<span class="dv">9</span>]      [,<span class="dv">10</span>]       [,<span class="dv">11</span>]      [,<span class="dv">12</span>]</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span>% <span class="fl">0.3044124</span> <span class="sc">-</span><span class="fl">0.1948022</span> <span class="sc">-</span><span class="fl">0.9320536</span> <span class="sc">-</span><span class="fl">0.4599205</span> <span class="sc">-</span><span class="fl">0.66625492</span> <span class="sc">-</span><span class="fl">0.2282911</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="dv">75</span>% <span class="fl">0.8129114</span>  <span class="fl">0.7027137</span>  <span class="fl">0.1692388</span>  <span class="fl">0.8105072</span> <span class="sc">-</span><span class="fl">0.03134737</span>  <span class="fl">1.4182423</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">13</span>]      [,<span class="dv">14</span>]       [,<span class="dv">15</span>]      [,<span class="dv">16</span>]      [,<span class="dv">17</span>]      [,<span class="dv">18</span>]</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span>% <span class="sc">-</span><span class="fl">0.5816031</span> <span class="sc">-</span><span class="fl">0.3836818</span> <span class="sc">-</span><span class="fl">0.03457652</span> <span class="sc">-</span><span class="fl">0.2982011</span> <span class="sc">-</span><span class="fl">1.2010605</span> <span class="sc">-</span><span class="fl">0.3919961</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="dv">75</span>%  <span class="fl">0.6542998</span>  <span class="fl">0.4986251</span>  <span class="fl">0.88613152</span>  <span class="fl">1.4696356</span> <span class="sc">-</span><span class="fl">0.1869049</span>  <span class="fl">0.5202375</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">19</span>]      [,<span class="dv">20</span>]</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span>% <span class="sc">-</span><span class="fl">0.6373273</span> <span class="sc">-</span><span class="fl">0.7451648</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="dv">75</span>%  <span class="fl">1.0399184</span>  <span class="fl">0.4839972</span></span></code></pre></div>
</div>
<div id="special-shortcuts-for-rowcolumn-sums-and-means-of-matrices."
class="section level3" number="1.7.2">
<h3><span class="header-section-number">1.7.2</span> Special shortcuts
for row/column sums and means of matrices.</h3>
<p>There are specific and <strong>heavily optimized</strong> “shortcut
functions” of apply, to calculate the sums and the means of rows or
columns of a matrix.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(rowSums)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">dims =</span> 1L)  </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(colSums)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">dims =</span> 1L)  </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(rowMeans)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">dims =</span> 1L)  </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(colMeans)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, <span class="at">na.rm =</span> <span class="cn">FALSE</span>, <span class="at">dims =</span> 1L)  </span></code></pre></div>
<ul>
<li>So, by default, these functions <strong>preserve one
dimension</strong> (<code>dims = 1L</code>), the 1st. -row versions- or
the 2nd. -column versions-.<br />
</li>
<li>And, by default also, they don’t remove missing vaules.</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowSums</span>(x)                     <span class="co"># equivalent to apply(x, 1, sum)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="sc">-</span><span class="fl">6.25761980</span>  <span class="fl">2.68819537</span> <span class="sc">-</span><span class="fl">2.26298591</span> <span class="sc">-</span><span class="fl">2.76100007</span>  <span class="fl">7.31865874</span> <span class="sc">-</span><span class="fl">3.26491606</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>]  <span class="fl">2.80889372</span>  <span class="fl">1.28979665</span> <span class="sc">-</span><span class="fl">4.48298220</span>  <span class="fl">2.06257245</span> <span class="sc">-</span><span class="fl">2.40498391</span>  <span class="fl">4.47050402</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>]  <span class="fl">0.77325929</span>  <span class="fl">0.26416619</span>  <span class="fl">4.85799121</span>  <span class="fl">2.77346122</span> <span class="sc">-</span><span class="fl">6.85225139</span> <span class="sc">-</span><span class="fl">0.13799960</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] <span class="sc">-</span><span class="fl">0.06577448</span> <span class="sc">-</span><span class="fl">2.56289787</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colMeans</span>(x)                    <span class="co"># equivalent to apply(x, 2, mean)</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>]  <span class="fl">0.26788937</span> <span class="sc">-</span><span class="fl">0.04893217</span> <span class="sc">-</span><span class="fl">0.31775109</span>  <span class="fl">0.04588463</span> <span class="sc">-</span><span class="fl">0.02798894</span>  <span class="fl">0.07064680</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="sc">-</span><span class="fl">0.23878366</span>  <span class="fl">0.10528597</span> <span class="sc">-</span><span class="fl">0.18662038</span>  <span class="fl">0.24307387</span></span></code></pre></div>
</div>
<div
id="a-higher-dimensional-example-applying-a-function-to-a-3-dimensional-array-like-an-array-of-matrices."
class="section level3" number="1.7.3">
<h3><span class="header-section-number">1.7.3</span> A higher
dimensional example: applying a function to a 3-dimensional array (like
an array of matrices).</h3>
<p>For example, we can create an array of 2x2 matrices and compute the
mean of the matrices in the array.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">rnorm</span>(<span class="dv">2</span> <span class="sc">*</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">4</span>)); a</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>, , <span class="dv">1</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>           [,<span class="dv">1</span>]      [,<span class="dv">2</span>]</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="sc">-</span><span class="fl">0.2932949</span>  <span class="fl">1.393846</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="sc">-</span><span class="fl">0.1348413</span> <span class="sc">-</span><span class="fl">1.036989</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>, , <span class="dv">2</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>           [,<span class="dv">1</span>]       [,<span class="dv">2</span>]</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="sc">-</span><span class="fl">2.1143351</span> <span class="sc">-</span><span class="fl">0.8161606</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]  <span class="fl">0.7682782</span> <span class="sc">-</span><span class="fl">0.4361069</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>, , <span class="dv">3</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>           [,<span class="dv">1</span>]      [,<span class="dv">2</span>]</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]  <span class="fl">0.9047050</span> <span class="sc">-</span><span class="fl">0.341067</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="sc">-</span><span class="fl">0.7630863</span>  <span class="fl">1.502425</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>, , <span class="dv">4</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>          [,<span class="dv">1</span>]       [,<span class="dv">2</span>]</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="fl">0.5283077</span> <span class="sc">-</span><span class="fl">0.1366734</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="fl">0.5421914</span> <span class="sc">-</span><span class="fl">1.1367339</span></span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a><span class="co"># preserve the 1st and 2nd dimensions, collapse the 3th dimension by taking the mean.</span></span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(a, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), mean)</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>           [,<span class="dv">1</span>]        [,<span class="dv">2</span>]</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="sc">-</span><span class="fl">0.2436543</span>  <span class="fl">0.02498622</span></span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]  <span class="fl">0.1031355</span> <span class="sc">-</span><span class="fl">0.27685123</span></span></code></pre></div>
<p>A <strong>faster way</strong> is, as we already know, via
<strong>rowMeans()</strong> function.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowMeans</span>(a, <span class="at">dims =</span> <span class="dv">2</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>           [,<span class="dv">1</span>]        [,<span class="dv">2</span>]</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="sc">-</span><span class="fl">0.2436543</span>  <span class="fl">0.02498622</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]  <span class="fl">0.1031355</span> <span class="sc">-</span><span class="fl">0.27685123</span></span></code></pre></div>
</div>
</div>
<div id="mapply-function." class="section level2" number="1.8">
<h2><span class="header-section-number">1.8</span> <code>mapply()</code>
function.</h2>
<p>This function is a “multivariate version” of <code>sapply()</code>,
that applies a function <strong>in parallel over</strong> <strong>a set
of arguments</strong>.</p>
<ul>
<li>The other functions of the apply family, iterate over a single R
object.<br />
</li>
<li><code>mapply</code>, instead, <strong>iterates</strong> over
<strong>multiple R objects in parallel</strong>.</li>
</ul>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mapply)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (FUN, ..., <span class="at">MoreArgs =</span> <span class="cn">NULL</span>, <span class="at">SIMPLIFY =</span> <span class="cn">TRUE</span>, <span class="at">USE.NAMES =</span> <span class="cn">TRUE</span>)  </span></code></pre></div>
<p>It has a different argument order:</p>
<ul>
<li>First comes the function <code>FUN</code> thay we want to apply
(rather than the object to iterate over that the other functions of the
family take as it’s first argument).<br />
</li>
<li>Then the <strong>R objects</strong> over which <code>FUN</code> is
going to be applied <strong>in parallel</strong>, are given in the
ellipses <code>...</code> argument because <em>we can apply over an
arbitrary number of R objects</em>.
<ul>
<li><code>FUN</code> is applied to the <em>first elements</em> of each R
object contained in the ellipeses, that is, those first elements are
given in input to <code>FUN</code>, followed by the arguments given in
<code>MoreArgs</code>.<br />
</li>
<li>Then <code>FUN</code> is applied to the <em>second elements</em> of
each R object contained in the ellipeses.</li>
<li>And so on.<br />
</li>
<li>Arguments are <strong>recycled if necessary</strong> (to the length
of the longest, unless any have length zero).<br />
</li>
</ul></li>
<li><code>MoreArgs</code> <strong>must be a list</strong>.</li>
</ul>
<div
id="applying-rep-function-over-two-sequences-two-r-objects-to-construct-a-list."
class="section level3" number="1.8.1">
<h3><span class="header-section-number">1.8.1</span> Applying
<code>rep()</code> function over two sequences (two R objects) to
construct a list.</h3>
<p><code>rep</code> replicates it’s first argument the number of times
specified by it’s second argument.</p>
<p>So if we find ouselves writing several times <code>rep</code> to
construct, lets say a list:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">3</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="dv">4</span>, <span class="dv">1</span>))</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">3</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">4</span>]]</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">4</span></span></code></pre></div>
<p>We should consider <code>mapply</code> to make things simpler, in
order to apply <code>rep</code> over two sequences (the first one to
feed the first argument of rep and the second one to feed the second
argument of rep, each time that <code>rep</code> is applied by
<code>mapply</code>):</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(rep, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">1</span>)     <span class="co"># mapply makes four calls of rep.</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">2</span> <span class="dv">2</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">3</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">4</span>]]</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">4</span></span></code></pre></div>
</div>
<div
id="generating-multiple-sets-of-random-numbers-each-with-a-different-length-and-mean."
class="section level3" number="1.8.2">
<h3><span class="header-section-number">1.8.2</span> Generating multiple
sets of random numbers, each with a different length and mean.</h3>
<p>The random generation function for the normal distribution,
<code>rnorm()</code>, has three arguments: the number of observations,
the mean and the standard deviation.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(rnorm)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (n, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)  </span></code></pre></div>
<p>So we can apply rnorm over sequences of arguments, like this:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate a list of five sets of random numbers, with different length and mean.</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(rnorm, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">2</span>)    <span class="co"># the third argument is recyled.</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">1.993254</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">1.553229</span> <span class="fl">6.003438</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">3.443408</span> <span class="fl">3.328746</span> <span class="fl">3.665247</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">4</span>]]</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">3.229584</span> <span class="fl">1.202492</span> <span class="fl">9.351482</span> <span class="fl">3.152628</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">5</span>]]</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">4.402797</span> <span class="fl">1.415317</span> <span class="fl">4.503984</span> <span class="fl">4.505392</span> <span class="fl">4.488979</span></span></code></pre></div>
<ul>
<li>This is equivalent to:<br />
<code>list(rnorm(1, 1, 2), rnorm(2, 2, 2), rnorm(3, 3, 2), rnorm(4, 4, 2), rnorm(5, 5, 2))</code></li>
</ul>
</div>
<div
id="using-mapply-for-vectorizing-a-function.-theres-also-a-vectorize-function-for-this."
class="section level3" number="1.8.3">
<h3><span class="header-section-number">1.8.3</span> Using
<code>mapply</code> for vectorizing a function. There’s also a
<code>Vectorize()</code> function for this.</h3>
<p>The previous examples show how we can <strong>vectorize</strong> a
function that takes only single arguments with <code>mapply</code>, that
is to say, how can we make a function take vector arguments.</p>
<ul>
<li>This is often needed when we want to <em>plot functions</em>.</li>
</ul>
<p>There’s even a function in R called <code>Vectorize()</code> that
automatically creates a vectorized version of our function.</p>
<ul>
<li>We just pass our function as it’s first argument and specify, as
second argument, a vector of characters with the names of the parameters
of our function that we want to vectorize.</li>
</ul>
<div
id="example-vectorizing-the-function-that-computes-the-sum-of-squares."
class="section level4" number="1.8.3.1">
<h4><span class="header-section-number">1.8.3.1</span> Example:
vectorizing the function that computes the sum of squares.</h4>
<p>The following function computes the sum of squares, given some data,
a mean parameter and a standard deviation: <span
class="math display">\[\sum_{i=1}^{n} \frac{(x_i -
\mu)^2}{\sigma^2}\]</span></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>sumsq <span class="ot">&lt;-</span> <span class="cf">function</span>(mu, sigma, x) {</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sum</span>( ((x <span class="sc">-</span> mu) <span class="sc">/</span> sigma)<span class="sc">^</span><span class="dv">2</span> )</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sumsq</span>(<span class="dv">1</span>, <span class="dv">1</span>, data)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">262.6984</span></span></code></pre></div>
<p>We may want to evaluate or plot this function for <em>many different
values of <code>mu</code> and <code>simga</code></em>, but we
<strong>can’t pass a vector of <code>mu</code>s and <code>sigma</code>s
to it</strong>.</p>
<p>We can solve this by <strong>just using
<code>mapply</code></strong>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(sumsq, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">MoreArgs =</span> <span class="fu">list</span>(<span class="at">x =</span> data))</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">262.6984</span> <span class="fl">149.6525</span> <span class="fl">126.0579</span> <span class="fl">116.9021</span> <span class="fl">112.2538</span></span></code></pre></div>
<ul>
<li>This is equivalent to these five calls of sumsq:<br />
<code>sumsq(1, 1, data); sumsq(2, 2, data); sumsq(3, 3, data); sumsq(4, 4, data); sumsq(5, 5, data);</code></li>
</ul>
<p>Or we can also <strong>create a vectorized version</strong> of our
function, with <code>Vectorize()</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>vsumsq <span class="ot">&lt;-</span> <span class="fu">Vectorize</span>(sumsq, <span class="fu">c</span>(<span class="st">&quot;mu&quot;</span>, <span class="st">&quot;sigma&quot;</span>))</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vsumsq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, data)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">262.6984</span> <span class="fl">149.6525</span> <span class="fl">126.0579</span> <span class="fl">116.9021</span> <span class="fl">112.2538</span></span></code></pre></div>
</div>
</div>
</div>
</div>
<div id="debugging." class="section level1" number="2">
<h1><span class="header-section-number">2</span> Debugging.</h1>
<div id="different-ways-r-indicates-that-somethings-not-right."
class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Different ways R
indicates that something’s not right.</h2>
<p>Executing any function in R may result in the following
<em>conditions</em>.</p>
<ul>
<li><code>message</code>:
<ul>
<li>A generic notification/diagnostic message produced by the
<code>message()</code> function.<br />
</li>
<li>Execution continues.<br />
</li>
</ul></li>
<li><code>warning</code>:
<ul>
<li>An indication that something is wrong but not necessarily fatal,
generated by <code>warning()</code>.<br />
</li>
<li>Execution continues.<br />
</li>
</ul></li>
<li><code>error</code>:
<ul>
<li>An indication that a fatal problem has ocurred, produced bh the
<code>stop()</code> function.<br />
</li>
<li>Excecution of the function stops.<br />
</li>
</ul></li>
<li><code>condition</code>:
<ul>
<li>A generic concept for indicating that something unexpected has
occurred.<br />
</li>
<li>All the previous three categories, are <em>conditions</em>.<br />
</li>
<li>Programmers cona create their own custom conditions.</li>
</ul></li>
</ul>
</div>
<div
id="most-fundamental-debugging-measure-prevent-strange-inputs-from-the-caller."
class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Most fundamental
debugging measure: prevent strange inputs from the caller.</h2>
<p>This is one of the most common source of errors, the caller passing
types of data not required by the function.</p>
<p>The solution is lineal: <strong><em>check your inptus!</em></strong>
and decide what to do if wrong data is given to the function.</p>
<div id="preventing-from-missing-values." class="section level3"
number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Preventing from
missing values.</h3>
<p>Let’s see a simple example.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>printmessage <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">&quot;Your input is greater than zero&quot;</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">&quot;Your input is less than or equal to zero&quot;</span>)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">invisible</span>(x)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="fu">printmessage</span>(<span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Your input is less than or equal to zero&quot;</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="fu">printmessage</span>(<span class="cn">NA</span>)                   <span class="co"># error: if sentences need TRUE/FALSE to make the tests.</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="fu">print</span>(<span class="st">&quot;Your input is greater than zero&quot;</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="st">&quot;Your input is less than or equal to zero&quot;</span>)<span class="sc">:</span> valor ausente donde <span class="cn">TRUE</span><span class="sc">/</span><span class="cn">FALSE</span> es necesario</span></code></pre></div>
<p>So we can check and solve this thing out, like this:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>printmessage <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(x))</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">&quot;Your input is a missing value!&quot;</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">&quot;Your input is greater than zero&quot;</span>)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">&quot;Your input is less than or equal to zero&quot;</span>)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">invisible</span>(x)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="fu">printmessage</span>(<span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Your input is less than or equal to zero&quot;</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="fu">printmessage</span>(<span class="cn">NA</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Your input is a missing value!&quot;</span></span></code></pre></div>
</div>
<div
id="deciding-what-to-do-with-vectorized-inputs-stop-the-function-or-vectorize-it."
class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Deciding what to do
with vectorized inputs: <code>stop()</code> the function or
<code>Vectorize()</code> it.</h3>
<p>Let’s now pass to our function a vector of length greater than
one.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>Warning <span class="cf">in</span> <span class="fu">log</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">2</span>))<span class="sc">:</span> Se han producido NaNs</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]       <span class="cn">NaN</span> <span class="fl">0.6931472</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Our function is not vectorized, so it will ony evaluate the first element</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co"># of the vector given in input.</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="fu">printmessage</span>(x)</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>Warning <span class="cf">in</span> <span class="cf">if</span> (<span class="fu">is.na</span>(x)) <span class="fu">print</span>(<span class="st">&quot;Your input is a missing value!&quot;</span>) <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="er">:</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>la condición tiene longitud <span class="sc">&gt;</span> <span class="dv">1</span> y sólo el primer elemento será usado</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Your input is a missing value!&quot;</span></span></code></pre></div>
<p>We can decide to not allow vectors at all in our function, by using
the <strong>stop()</strong> function for generating an <strong>error
message</strong> and <strong>terminating the execution</strong>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>printmessage <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">length</span>(x) <span class="sc">&gt;</span> 1L)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stop</span>(<span class="st">&quot;Inputs with length &gt; 1 are not allowed.&quot;</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.na</span>(x))                                        <span class="co"># no need of else clause here.</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">&quot;Your input is a missing value!&quot;</span>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">&quot;Your input is greater than zero&quot;</span>)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">print</span>(<span class="st">&quot;Your input is less than or equal to zero&quot;</span>)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">invisible</span>(x)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="fu">printmessage</span>(x)</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">printmessage</span>(x)<span class="sc">:</span> Inputs with length <span class="sc">&gt;</span> <span class="dv">1</span> are not allowed.</span></code></pre></div>
<p>We can also choose to <strong>create a vectorized version</strong> of
our function with <code>Vectorize()</code>.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>v_printmessage <span class="ot">&lt;-</span> <span class="fu">Vectorize</span>(printmessage)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                          <span class="co"># If there it is an invisible returned value, &quot;Vectorize()&quot;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">v_printmessage</span>(x)  <span class="co"># does not preserve the invisibility.</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Your input is a missing value!&quot;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Your input is greater than zero&quot;</span></span></code></pre></div>
</div>
</div>
<div id="debugging-tools-in-r." class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Debugging tools in
R.</h2>
<p>Besides the blunt technique of <strong>inserting <code>print()</code>
or <code>cat()</code></strong> statements in the function, there are
several <strong>interactive tools in R</strong> for debugging functions
in R:</p>
<ul>
<li><code>traceback()</code>:
<ul>
<li><strong>prints out</strong> the <strong>function call stack</strong>
after an error occurs.<br />
</li>
</ul></li>
<li><code>debug()</code>:
<ul>
<li><strong>flags</strong> a function for <strong>debug
mode</strong>.<br />
</li>
</ul></li>
<li><code>browser()</code>:
<ul>
<li><strong>suspends</strong> the execution of the function from the
point at which it is called and <strong>puts the function in debug
mode</strong>.<br />
</li>
</ul></li>
<li><code>trace()</code>:
<ul>
<li>allows us to <strong>insert debugging code</strong> into a function
<strong>without actually editing</strong> the function itself.<br />
</li>
<li>it is handy when debugging someone else’s code, or code in a package
that we can’t easily edit or code in the base of R itself. In short,
code that we don’t want to or cannot edit for some reason.<br />
</li>
</ul></li>
<li><code>recover()</code>:
<ul>
<li>allows us to <strong>modify R’s error behavior</strong> so that we
<strong>can browse the function</strong> <strong>call
stack</strong>.</li>
</ul></li>
</ul>
<div id="traceback." class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span>
<code>traceback()</code>.</h3>
<p>Prints out the <em>function call stack</em> after an error has
occurred.</p>
<ul>
<li>Shows us <em>how many levels deep</em> we were when the error
occurred.<br />
</li>
<li>It must be called <em>inmediately after</em> an error occurs.<br />
</li>
<li>It is <em>useful for figuring out roughly where</em> an error
occurred, but not for more detailed debugging.</li>
</ul>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(y <span class="sc">~</span> x)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">traceback</span>()</span></code></pre></div>
</div>
<div id="debug." class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span>
<code>debug()</code>.</h3>
<p>It <strong>flags</strong> a function <strong>into debug
mode</strong>:</p>
<ul>
<li>When we <strong>call</strong> the function, an <strong>interactive
debugger</strong> initiates (also known in R as <strong>the
browser</strong>).<br />
</li>
<li>We can step through the excecution of the function one
line/epressiont at a time.<br />
</li>
<li>More precisely, the debugger <strong>calls the browser()</strong>
function at the very top level of the function body. And from there we
can write these <strong>special commands</strong>:
<ul>
<li><code>n</code> executes the current expression and moves to the next
expression.<br />
</li>
<li><code>c</code> continues excecution and does not stop until either
an error or the function exits.<br />
</li>
<li><code>Q</code> quits the browser.<br />
</li>
</ul></li>
<li>While we are in the browser:
<ul>
<li>We can excecute any other R function that might be available in a
regular session.<br />
</li>
<li>In particular, we can use <code>ls()</code> to se the current
environment and <code>print()</code> to print out the values of R
objects in the function environment.</li>
</ul></li>
</ul>
<p>We turn this behavior off by calling the
<strong><code>undebug()</code></strong> function.</p>
<ul>
<li>The <code>isdebugged()</code> function tell us the state of this
flag.</li>
</ul>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">debug</span>(lm)              <span class="co"># Flag lm() function for interactive debugging.</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(y <span class="sc">~</span> x)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">undebug</span>(lm)            <span class="co"># Unflag it.</span></span></code></pre></div>
</div>
<div id="recover." class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span>
<code>recover()</code>.</h3>
<p>Normally, when an error occurs, R has the following behavior:</p>
<ul>
<li>Prints out an error message.<br />
</li>
<li>Exits out of the function.<br />
</li>
<li>Returns to our workspace to await further commands.</li>
</ul>
<p><code>recover()</code> function can be use to <strong>modify the
normal error handling of R</strong>:</p>
<ul>
<li>We change R error handler passing the <code>recover()</code>
function as argument of the <code>options()</code> function.
<ul>
<li>This will set a global option and it will last (if we don’t change
it again) as long the current session is open.<br />
</li>
<li>Once the current session is terminated, <code>recover</code> error
handling will not be saved and future sessions will start with the
normal error handler.<br />
</li>
</ul></li>
<li>Doing so, we tell R that it should <strong>halt the execution at the
exact point at which the error</strong> <strong>occurred</strong>.
<ul>
<li>This can give us the opportunity to poke arround in the environment
in which the error occurred.<br />
</li>
<li>This can be useful to see if there are any R objects or data that
have been corrupted or mistankenly modified.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">error =</span> recover)      <span class="co"># Change default R error behavior.</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">&quot;nosuchfile&quot;</span>)        <span class="co"># Recover error behavior begins.</span></span></code></pre></div>
<ul>
<li><code>recover</code> behevior takes the following acions:
<ul>
<li>It will first print out the <em>function call stack</em>.<br />
</li>
<li>Then will ask to enter a <em>frame number</em> so we can choose to
jump arround the call stack and investigate the problem.<br />
</li>
<li>When a frame number is selected, the <em>browser</em> (interactive
debugger) initiates.</li>
</ul></li>
</ul>
<hr />
</div>
</div>
</div>
<div id="session-info." class="section level1" number="3">
<h1><span class="header-section-number">3</span> Session Info.</h1>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>R version <span class="dv">3</span>.<span class="fl">6.3</span> (<span class="dv">2020-02-29</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>Platform<span class="sc">:</span> x86_64<span class="sc">-</span>pc<span class="sc">-</span>linux<span class="sc">-</span><span class="fu">gnu</span> (<span class="dv">64</span><span class="sc">-</span>bit)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>Running under<span class="sc">:</span> Ubuntu <span class="dv">18</span>.<span class="fl">04.6</span> LTS</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>Matrix products<span class="sc">:</span> default</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>BLAS<span class="sc">:</span>   <span class="er">/</span>usr<span class="sc">/</span>lib<span class="sc">/</span>x86_64<span class="sc">-</span>linux<span class="sc">-</span>gnu<span class="sc">/</span>blas<span class="sc">/</span>libblas.so.<span class="dv">3</span>.<span class="fl">7.1</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>LAPACK<span class="sc">:</span> <span class="er">/</span>usr<span class="sc">/</span>lib<span class="sc">/</span>x86_64<span class="sc">-</span>linux<span class="sc">-</span>gnu<span class="sc">/</span>lapack<span class="sc">/</span>liblapack.so.<span class="dv">3</span>.<span class="fl">7.1</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>locale<span class="sc">:</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] LC_CTYPE<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>       LC_NUMERIC<span class="ot">=</span>C              </span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a> [<span class="dv">3</span>] LC_TIME<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>        LC_COLLATE<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>    </span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a> [<span class="dv">5</span>] LC_MONETARY<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>    LC_MESSAGES<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>   </span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] LC_PAPER<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>       LC_NAME<span class="ot">=</span>C                 </span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9</span>] LC_ADDRESS<span class="ot">=</span>C               LC_TELEPHONE<span class="ot">=</span>C            </span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] LC_MEASUREMENT<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span> LC_IDENTIFICATION<span class="ot">=</span>C       </span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>attached base packages<span class="sc">:</span></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>other attached packages<span class="sc">:</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] plyr_1.<span class="fl">8.6</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>loaded via a <span class="fu">namespace</span> (and not attached)<span class="sc">:</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] Rcpp_1.<span class="fl">0.7</span>       highr_0<span class="fl">.9</span>        formatR_1<span class="fl">.14</span>     pillar_1.<span class="fl">7.0</span>    </span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a> [<span class="dv">5</span>] compiler_3.<span class="fl">6.3</span>   bslib_0.<span class="fl">3.0</span>      jquerylib_0.<span class="fl">1.4</span>  tools_3.<span class="fl">6.3</span>     </span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9</span>] digest_0.<span class="fl">6.29</span>    jsonlite_1.<span class="fl">7.2</span>   evaluate_0<span class="fl">.19</span>    lifecycle_1.<span class="fl">0.3</span> </span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>] tibble_3.<span class="fl">1.8</span>     gtable_0.<span class="fl">3.0</span>     lattice_0<span class="fl">.20</span><span class="dv">-45</span>  pkgconfig_2.<span class="fl">0.3</span> </span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>[<span class="dv">17</span>] rlang_1.<span class="fl">0.6</span>      DBI_1.<span class="fl">1.1</span>        cli_3.<span class="fl">6.0</span>        rstudioapi_0<span class="fl">.13</span> </span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>[<span class="dv">21</span>] yaml_2.<span class="fl">2.1</span>       xfun_0<span class="fl">.36</span>        fastmap_1.<span class="fl">1.0</span>    withr_2.<span class="fl">5.0</span>     </span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">25</span>] stringr_1.<span class="fl">4.0</span>    httr_1.<span class="fl">4.2</span>       knitr_1<span class="fl">.41</span>       hms_1.<span class="fl">1.0</span>       </span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>[<span class="dv">29</span>] sass_0.<span class="fl">4.0</span>       generics_0.<span class="fl">1.2</span>   vctrs_0.<span class="fl">5.2</span>      grid_3.<span class="fl">6.3</span>      </span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>[<span class="dv">33</span>] tidyselect_1.<span class="fl">2.0</span> glue_1.<span class="fl">6.2</span>       R6_2.<span class="fl">5.1</span>         fansi_1.<span class="fl">0.2</span>     </span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>[<span class="dv">37</span>] rmarkdown_2<span class="fl">.11</span>   tzdb_0.<span class="fl">3.0</span>       magrittr_2.<span class="fl">0.2</span>   scales_1.<span class="fl">1.1</span>    </span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>[<span class="dv">41</span>] ellipsis_0.<span class="fl">3.2</span>   htmltools_0.<span class="fl">5.2</span>  assertthat_0.<span class="fl">2.1</span> colorspace_2<span class="fl">.0</span><span class="dv">-3</span></span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>[<span class="dv">45</span>] utf8_1.<span class="fl">2.2</span>       stringi_1.<span class="fl">7.6</span>    munsell_0.<span class="fl">5.0</span>    crayon_1.<span class="fl">5.0</span>    </span></code></pre></div>
<hr />
</div>

<div style="width: 100%; padding: 10px; box-sizing: border-box; text-align: justify; border: 1px solid gray;">
  <p style="font-family: 'Playfair Display', serif; font-style: italic;">Copyright &copy; 2020 por <b>Christian A. Karanicolas</b>.  Todos los derechos reservados.  La elaboración de este sitio ha tenido como fuente principal de información el curso de <b>Especialización en Ciencias de Datos</b> brindado por la <b>Johns Hopkins University</b> a través de <b>Coursera</b>.</p>
</div>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap');
</style>


<!--
<p style="font-family: 'Playfair Display', serif; font-style: italic;">Copyright &copy; 2020 por <b>Christian A. Karanicolas</b>.  Todos los derechos reservados.  La elaboración de este sitio ha tenido como fuente principal de información el curso de <b>Especialización en Ciencias de Datos</b> brindado por la <b>Johns Hopkins University</b> a través de <b>Coursera</b>.</p>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap');
</style>
-->


<!--
<p style="font-style: italic;">Copyright &copy; 2020 por <b>Christian A. Karanicolas</b>.  Todos los derechos reservados.  La elaboración de este sitio ha tenido como fuente principal de información el curso de <b>Especialización en Ciencias de Datos</b> brindado por la <b>Johns Hopkins University</b> a través de <b>Coursera</b>.</p>
-->




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
