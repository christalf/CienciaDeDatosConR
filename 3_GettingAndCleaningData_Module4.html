<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Getting and Cleaning Data Course - Module 4</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Aprendiendo ciencia de datos con R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-hand-spock"></span>
     
    Resumen del contenido
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bars"></span>
     
    Contenido
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">Data Science Toolbox</li>
    <li class="divider"></li>
    <li>
      <a href="1_DataScienceToolBox_Resumen.html">Módulo único</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">R</li>
    <li class="divider"></li>
    <li>
      <a href="2_R_Module1_Resumen.html">Módulo 1</a>
    </li>
    <li>
      <a href="2_R_Module2_Resumen.html">Módulo 2</a>
    </li>
    <li>
      <a href="2_R_Module2_ProgAssmt_PrevPract.html">_práctica</a>
    </li>
    <li>
      <a href="2_R_Module2_ProgAssmt.html">_ejercicio</a>
    </li>
    <li>
      <a href="2_R_Module3_Resumen.html">Módulo 3</a>
    </li>
    <li>
      <a href="2_R_Module3_ProgAssmt.html">_ejercicio</a>
    </li>
    <li>
      <a href="2_R_Module4_Resumen.html">Módulo 4</a>
    </li>
    <li>
      <a href="2_R_Module4_ProgAssmt.html">Ejercicio final</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Getting &amp; Cleaning Data</li>
    <li class="divider"></li>
    <li>
      <a href="3_GettingAndCleaningData_Module1_Resumen.html">Módulo 1</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module2_Resumen.html">Módulo 2</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module2_Ejercicios.html">_ejercicios</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module3_Resumen.html">Módulo 3</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module3_Ejercicios.html">_ejercicios</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module4.html">Módulo 4</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_Module4_Ejercicios.html">_ejercicios</a>
    </li>
    <li>
      <a href="3_GettingAndCleaningData_FinalProj.html">Proyecto final</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Exploratory Data Analysis</li>
    <li class="divider"></li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module1.html">Módulo 1</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module1_Ejercicios.html">_ejercicios</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module2.html">Módulo 2</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module3.html">Módulo 3</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_Module4.html">Módulo 4</a>
    </li>
    <li>
      <a href="4_ExploratoryDataAnalysis_FinalProj.html">Proyecto final</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Reproducible Research</li>
    <li class="divider"></li>
    <li>
      <a href="5_ReproducibleResearch_Module1.html">Módulo 1</a>
    </li>
    <li>
      <a href="5_ReproducibleResearch_Module2.html">Módulo 2</a>
    </li>
    <li>
      <a href="5_ReproducibleResearch_Module3.html">Módulo 3</a>
    </li>
    <li>
      <a href="5_ReproducibleResearch_Module4.html">Módulo 4</a>
    </li>
    <li>
      <a href="5_ReproducibleResearch_FinalProj.html">Proyectos finales</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://bookdown.org/yihui/rmarkdown/rmarkdown-site.html">
    <span class="fa fa-gears"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Getting and Cleaning Data Course - Module
4</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#processing-text-variables."
id="toc-processing-text-variables."><span
class="toc-section-number">1</span> Processing text variables.</a>
<ul>
<li><a href="#regular-expressions." id="toc-regular-expressions."><span
class="toc-section-number">1.1</span> Regular expressions.</a>
<ul>
<li><a href="#literals." id="toc-literals."><span
class="toc-section-number">1.1.1</span> Literals.</a></li>
<li><a href="#metacharacters." id="toc-metacharacters."><span
class="toc-section-number">1.1.2</span> Metacharacters.</a>
<ul>
<li><a href="#start-of-a-line" id="toc-start-of-a-line"><span
class="toc-section-number">1.1.2.1</span> Start of a line:
<code>^</code></a></li>
<li><a href="#end-of-a-line" id="toc-end-of-a-line"><span
class="toc-section-number">1.1.2.2</span> End of a line:
<code>$</code></a></li>
<li><a href="#character-classes" id="toc-character-classes"><span
class="toc-section-number">1.1.2.3</span> Character Classes:
<code>[]</code></a></li>
<li><a href="#not-character-classes"
id="toc-not-character-classes"><span
class="toc-section-number">1.1.2.4</span> NOT character classes:
<code>[^]</code></a></li>
<li><a href="#any-character-." id="toc-any-character-."><span
class="toc-section-number">1.1.2.5</span> Any character:
<code>.</code></a></li>
<li><a href="#alternative-expressions"
id="toc-alternative-expressions"><span
class="toc-section-number">1.1.2.6</span> Alternative expressions:
<code>|</code></a></li>
<li><a href="#constrain-alternatives"
id="toc-constrain-alternatives"><span
class="toc-section-number">1.1.2.7</span> Constrain alternatives:
<code>( )</code></a></li>
<li><a href="#optional-expression" id="toc-optional-expression"><span
class="toc-section-number">1.1.2.8</span> Optional expression:
?</a></li>
<li><a href="#repetition-and" id="toc-repetition-and"><span
class="toc-section-number">1.1.2.9</span> Repetition: <code>*</code> and
<code>+</code></a></li>
<li><a href="#interval-quantifiers" id="toc-interval-quantifiers"><span
class="toc-section-number">1.1.2.10</span> Interval quantifiers:
<code>{ }</code></a></li>
<li><a href="#remember-previous-matched-expressions-and-1-2"
id="toc-remember-previous-matched-expressions-and-1-2"><span
class="toc-section-number">1.1.2.11</span> Remember previous matched
expressions: <code>( )</code> and <code>\1</code>, <code>\2</code>,
…</a></li>
<li><a href="#turning-off-the-greediness-of-with"
id="toc-turning-off-the-greediness-of-with"><span
class="toc-section-number">1.1.2.12</span> Turning off the greediness of
<code>*</code> with <code>?</code></a></li>
</ul></li>
<li><a href="#summary" id="toc-summary"><span
class="toc-section-number">1.1.3</span> Summary</a></li>
</ul></li>
<li><a
href="#base-r-package-functions-for-dealing-with-regular-expressions."
id="toc-base-r-package-functions-for-dealing-with-regular-expressions."><span
class="toc-section-number">1.2</span> <code>base</code> R package
functions for dealing with regular expressions.</a>
<ul>
<li><a href="#datasets-that-well-use-as-our-working-examples."
id="toc-datasets-that-well-use-as-our-working-examples."><span
class="toc-section-number">1.2.1</span> Datasets that we’ll use as our
working examples.</a></li>
<li><a href="#searching-by-patterns-with-grep."
id="toc-searching-by-patterns-with-grep."><span
class="toc-section-number">1.2.2</span> Searching by patterns with
<code>grep()</code>.</a>
<ul>
<li><a
href="#risk-of-greping-things-out-of-context-and-comparing-with-setdiff."
id="toc-risk-of-greping-things-out-of-context-and-comparing-with-setdiff."><span
class="toc-section-number">1.2.2.1</span> Risk of greping things out of
context and comparing with <code>setdiff()</code>.</a></li>
<li><a
href="#returning-the-values-not-the-indices-that-satisfy-the-match."
id="toc-returning-the-values-not-the-indices-that-satisfy-the-match."><span
class="toc-section-number">1.2.2.2</span> Returning the values (not the
indices) that satisfy the match.</a></li>
<li><a href="#checking-that-a-particular-value-does-not-appear."
id="toc-checking-that-a-particular-value-does-not-appear."><span
class="toc-section-number">1.2.2.3</span> Checking that a particular
value DOES NOT appear.</a></li>
<li><a href="#all-again-with-another-example."
id="toc-all-again-with-another-example."><span
class="toc-section-number">1.2.2.4</span> All again with another
example.</a></li>
</ul></li>
<li><a href="#searching-by-patterns-with-grepl."
id="toc-searching-by-patterns-with-grepl."><span
class="toc-section-number">1.2.3</span> Searching by patterns with
<code>grepl()</code>.</a>
<ul>
<li><a href="#homicides-example." id="toc-homicides-example."><span
class="toc-section-number">1.2.3.1</span> Homicides example.</a></li>
<li><a href="#cameras-example." id="toc-cameras-example."><span
class="toc-section-number">1.2.3.2</span> Cameras example.</a></li>
</ul></li>
<li><a href="#searching-by-patterns-with-regexpr-and-gregexpr."
id="toc-searching-by-patterns-with-regexpr-and-gregexpr."><span
class="toc-section-number">1.2.4</span> Searching by patterns with
<code>regexpr()</code> and <code>gregexpr()</code>.</a>
<ul>
<li><a href="#limitations-of-grep-and-grepl."
id="toc-limitations-of-grep-and-grepl."><span
class="toc-section-number">1.2.4.1</span> Limitations of
<code>grep()</code> and <code>grepl()</code>.</a></li>
<li><a href="#how-regexpr-and-gregexpr-work."
id="toc-how-regexpr-and-gregexpr-work."><span
class="toc-section-number">1.2.4.2</span> How <code>regexpr()</code> and
<code>gregexpr()</code> work.</a></li>
<li><a href="#homicides-example.-1" id="toc-homicides-example.-1"><span
class="toc-section-number">1.2.4.3</span> Homicides example.</a></li>
<li><a href="#extracting-the-matches-with-substr-and-regmatches."
id="toc-extracting-the-matches-with-substr-and-regmatches."><span
class="toc-section-number">1.2.4.4</span> Extracting the matches with
<code>substr()</code> and <code>regmatches()</code>.</a></li>
<li><a href="#limiting-the-greediness-of-the-pattern."
id="toc-limiting-the-greediness-of-the-pattern."><span
class="toc-section-number">1.2.4.5</span> Limiting the greediness of the
pattern.</a></li>
</ul></li>
<li><a href="#searching-by-pattern-and-replacing-with-sub-and-gsub."
id="toc-searching-by-pattern-and-replacing-with-sub-and-gsub."><span
class="toc-section-number">1.2.5</span> Searching by pattern and
replacing with <code>sub()</code> and <code>gsub()</code>.</a>
<ul>
<li><a href="#homicides-example.-2" id="toc-homicides-example.-2"><span
class="toc-section-number">1.2.5.1</span> Homicides example.</a></li>
<li><a href="#peer-review-experiment-data-example."
id="toc-peer-review-experiment-data-example."><span
class="toc-section-number">1.2.5.2</span> Peer review experiment data
example.</a></li>
</ul></li>
<li><a
href="#searching-by-patterns-with-regexec-and-extracting-matches-with-substr-and-regmatches."
id="toc-searching-by-patterns-with-regexec-and-extracting-matches-with-substr-and-regmatches."><span
class="toc-section-number">1.2.6</span> Searching by patterns with
<code>regexec()</code> and extracting matches with <code>substr()</code>
and <code>regmatches()</code>.</a></li>
<li><a
href="#fixing-character-vectors-with-tolower-or-toupper-strsplit-and-sapply."
id="toc-fixing-character-vectors-with-tolower-or-toupper-strsplit-and-sapply."><span
class="toc-section-number">1.2.7</span> Fixing character vectors with
<code>tolower()</code> or <code>toupper()</code>,
<code>strsplit()</code> and <code>sapply()</code>.</a></li>
<li><a href="#other-useful-base-functions-nchar-paste-paste0."
id="toc-other-useful-base-functions-nchar-paste-paste0."><span
class="toc-section-number">1.2.8</span> Other useful <code>base</code>
functions: <code>nchar()</code>, <code>paste()</code>,
<code>paste0()</code>.</a></li>
</ul></li>
<li><a href="#the-stringr-package-from-the-tydyverse-collection."
id="toc-the-stringr-package-from-the-tydyverse-collection."><span
class="toc-section-number">1.3</span> The <code>stringr</code> package
from the <code>tydyverse</code> collection.</a>
<ul>
<li><a
href="#straightforward-mapping-from-base-functions-to-stringr-functions."
id="toc-straightforward-mapping-from-base-functions-to-stringr-functions."><span
class="toc-section-number">1.3.1</span> Straightforward mapping from
<code>base</code> functions to <code>stringr</code> functions.</a></li>
<li><a href="#grepvalue-true---str_subset"
id="toc-grepvalue-true---str_subset"><span
class="toc-section-number">1.3.2</span> <code>grep(value = TRUE)</code>
—-&gt; <code>str_subset()</code></a></li>
<li><a href="#grepl---str_detect" id="toc-grepl---str_detect"><span
class="toc-section-number">1.3.3</span> <code>grepl()</code> —-&gt;
<code>str_detect()</code></a></li>
<li><a href="#regexpr-and-regmatches---str_extract"
id="toc-regexpr-and-regmatches---str_extract"><span
class="toc-section-number">1.3.4</span> <code>regexpr()</code> and
<code>regmatches()</code> —-&gt; <code>str_extract()</code></a></li>
<li><a href="#regexec-and-regmatches---str_match"
id="toc-regexec-and-regmatches---str_match"><span
class="toc-section-number">1.3.5</span> <code>regexec()</code> and
<code>regmatches()</code> —-&gt; <code>str_match()</code></a></li>
<li><a href="#sub---str_replace" id="toc-sub---str_replace"><span
class="toc-section-number">1.3.6</span> <code>sub()</code> —-&gt;
<code>str_replace()</code></a></li>
<li><a href="#gsub---str_replace_all"
id="toc-gsub---str_replace_all"><span
class="toc-section-number">1.3.7</span> <code>gsub()</code> —-&gt;
<code>str_replace_all()</code></a></li>
<li><a href="#other-useful-stringr-function-str_trim."
id="toc-other-useful-stringr-function-str_trim."><span
class="toc-section-number">1.3.8</span> Other useful
<code>stringr</code> function: <code>str_trim()</code>.</a></li>
</ul></li>
</ul></li>
<li><a href="#working-with-dates." id="toc-working-with-dates."><span
class="toc-section-number">2</span> Working with dates.</a>
<ul>
<li><a href="#starting-simple." id="toc-starting-simple."><span
class="toc-section-number">2.1</span> Starting simple.</a></li>
<li><a
href="#date-class-objects-sys.date-and-separately-sys.time.-also-sys.timezone."
id="toc-date-class-objects-sys.date-and-separately-sys.time.-also-sys.timezone."><span
class="toc-section-number">2.2</span> Date class objects:
<code>Sys.Date()</code>, and separately <code>Sys.time()</code>. Also
<code>Sys.timezone()</code>.</a></li>
<li><a href="#formatting-a-date-object-with-format."
id="toc-formatting-a-date-object-with-format."><span
class="toc-section-number">2.3</span> Formatting a <code>Date</code>
object with <code>format()</code>.</a></li>
<li><a href="#creating-date-objects-not-only-sys.date-also-as.date."
id="toc-creating-date-objects-not-only-sys.date-also-as.date."><span
class="toc-section-number">2.4</span> Creating <code>Date</code>
objects: not only <code>Sys.date()</code>, also
<code>as.Date()</code>.</a></li>
<li><a href="#manipulating-date-objects."
id="toc-manipulating-date-objects."><span
class="toc-section-number">2.5</span> Manipulating <code>Date</code>
objects.</a></li>
<li><a href="#getting-the-weekdays-and-the-months-of-dates-objects."
id="toc-getting-the-weekdays-and-the-months-of-dates-objects."><span
class="toc-section-number">2.6</span> Getting the
<code>weekdays()</code> and the <code>months()</code> of
<code>date</code>s objects.</a></li>
<li><a href="#converting-to-julian."
id="toc-converting-to-julian."><span
class="toc-section-number">2.7</span> Converting to
<code>julian()</code>.</a></li>
<li><a href="#the-lubridate-package."
id="toc-the-lubridate-package."><span
class="toc-section-number">2.8</span> The <code>lubridate</code>
package.</a>
<ul>
<li><a
href="#converting-strings-or-numbers-to-a-date-by-automatically-recongnizing-format-ymd-ydm-mdy-myd-dmy-dym-yq."
id="toc-converting-strings-or-numbers-to-a-date-by-automatically-recongnizing-format-ymd-ydm-mdy-myd-dmy-dym-yq."><span
class="toc-section-number">2.8.1</span> Converting strings or numbers to
a date by automatically recongnizing format: <code>ymd()</code>,
<code>ydm()</code>, <code>mdy()</code>, <code>myd()</code>,
<code>dmy()</code>, <code>dym()</code>, <code>yq()</code>.</a></li>
<li><a href="#dealing-with-times-the-_hms-_hm-_h-family-of-functions."
id="toc-dealing-with-times-the-_hms-_hm-_h-family-of-functions."><span
class="toc-section-number">2.8.2</span> Dealing with times: the
<code>*_hms()</code>, <code>*_hm()</code>, <code>*_h()</code> family of
functions.</a></li>
<li><a
href="#slightly-different-syntax-to-get-the-day-week-month-and-year-day-mday-wday-qday-yday."
id="toc-slightly-different-syntax-to-get-the-day-week-month-and-year-day-mday-wday-qday-yday."><span
class="toc-section-number">2.8.3</span> Slightly different syntax to get
the day, week, month and year: <code>day()</code>, <code>mday()</code>,
<code>wday()</code>, <code>qday()</code>, <code>yday()</code>.</a></li>
</ul></li>
<li><a href="#further-resources." id="toc-further-resources."><span
class="toc-section-number">2.9</span> Further resources.</a></li>
</ul></li>
<li><a href="#data-resources." id="toc-data-resources."><span
class="toc-section-number">3</span> Data resources.</a>
<ul>
<li><a href="#open-government-sites."
id="toc-open-government-sites."><span
class="toc-section-number">3.1</span> Open Government Sites.</a></li>
<li><a href="#gapminder-lots-of-indicators-including-human-health."
id="toc-gapminder-lots-of-indicators-including-human-health."><span
class="toc-section-number">3.2</span> Gapminder (lots of indicators,
including human health).</a></li>
<li><a href="#survey-data-from-the-united-states."
id="toc-survey-data-from-the-united-states."><span
class="toc-section-number">3.3</span> Survey data from the United
States.</a></li>
<li><a href="#infochimps-marketplace."
id="toc-infochimps-marketplace."><span
class="toc-section-number">3.4</span> Infochimps Marketplace.</a></li>
<li><a href="#kaggle." id="toc-kaggle."><span
class="toc-section-number">3.5</span> Kaggle.</a></li>
<li><a href="#collections-by-data-scientists."
id="toc-collections-by-data-scientists."><span
class="toc-section-number">3.6</span> Collections by data
scientists.</a></li>
<li><a href="#more-specialized-collections."
id="toc-more-specialized-collections."><span
class="toc-section-number">3.7</span> More specialized
collections.</a></li>
<li><a href="#some-apis-with-r-interfaces."
id="toc-some-apis-with-r-interfaces."><span
class="toc-section-number">3.8</span> Some API’s with R
interfaces.</a></li>
<li><a href="#conclusion." id="toc-conclusion."><span
class="toc-section-number">3.9</span> Conclusion.</a></li>
</ul></li>
<li><a href="#session-info." id="toc-session-info."><span
class="toc-section-number">4</span> Session Info.</a></li>
</ul>
</div>

<hr />
<div id="processing-text-variables." class="section level1" number="1">
<h1><span class="header-section-number">1</span> Processing text
variables.</h1>
<p>A very common data cleaning issue is to have text variables that are
in nasty format or have extra spaces or periods or underscores that we
need to remove.</p>
<p>We’re going to see how to manipulate those texts programatically in
order to get nice, decent variable names but also texts in the actual
dataset itself.</p>
<ul>
<li><p>First, we’ll dive into <em>regular expressions</em> because it’s
a powerful tool to <em>define search</em> <em>patterns</em> which can be
used by <em>string-serching functions</em> for <em>find</em> or <em>find
and replace</em> operations on strings.</p></li>
<li><p>Then we’re going to focus on those functions of the R language
that work with strings and provide “regex” capablities (that is to say,
functions that can process regular expressions in order to find matches
and eventually make replacements operations on strings).</p>
<ul>
<li>In particular, we’ll see the functions provided by the
<code>base</code> and the <code>stringr</code> R packages.</li>
</ul></li>
</ul>
<div id="regular-expressions." class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Regular
expressions.</h2>
<ul>
<li><p>Regular expressions can be thought of as a
<strong>combination</strong> of <em>literals</em> and
<em>metacharacters</em>.</p></li>
<li><p>To draw an <em>analogy</em> with <strong>natural
language</strong>, think of literal text forming the <em>words</em> of
this language, and the metacharacters defining its
<em>grammar</em>.</p></li>
<li><p>Regular expressions have a rich set of metacharacters.</p></li>
</ul>
<div id="literals." class="section level3" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> Literals.</h3>
<p><strong>Simplest pattern</strong> consists <em>only</em> of
<em>literals</em> (a string of characters).</p>
<p>The literal <em>nuclear</em> would match to the following lines:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Ooh. I just learned that to keep myself alive after a nuclear blast!</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>Laozi says nuclear weapons are mas macho</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>Chaos in a country that has nuclear weapons -- not good.</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>my nephew is trying to teach me nuclear physics, or possibly just trying to</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>lol if you ever say &quot;nuclear&quot; people immediately think DEATH by radiation LOL</span></code></pre></div>
<ul>
<li>So, a match occurs if the literal occurs anywhere in the text being
tested.</li>
</ul>
</div>
<div id="metacharacters." class="section level3" number="1.1.2">
<h3><span class="header-section-number">1.1.2</span>
Metacharacters.</h3>
<p>What if we want to match:</p>
<ul>
<li>exactly the word <em>nuclear</em> (excluding other variants such as
<em>“nulcear”</em>, or <em>nuclearized</em>, etc.)?<br />
</li>
<li>or sentences <strong>that end</strong> in a certain <strong>class of
words</strong> like <em>Clinton</em>, or <em>clinton</em> or
<em>clinto</em> (we could be interested in including misdroppings or
misspellings)?</li>
</ul>
<p>In general, we <strong>need a way to express</strong>:</p>
<ul>
<li>whitespace word boundaries<br />
</li>
<li>sets of literals (classes of words of phrases)<br />
</li>
<li>the beginning and end of a line<br />
</li>
<li>alternatives (“war” or “peace”)</li>
</ul>
<p>And <strong><em>that is what we can do with
metacharacters</em></strong>.</p>
<div id="start-of-a-line" class="section level4" number="1.1.2.1">
<h4><span class="header-section-number">1.1.2.1</span> Start of a line:
<code>^</code></h4>
<p>The <strong>carrot metacharacter, <code>^</code>,</strong> represent
the <em>start of a line</em>.</p>
<p>For example,</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>^i think</span></code></pre></div>
<p>will search for the phrase <em>i</em> followed by a <em>space</em>
followed by <em>t</em> followed by <em>h</em> followed by <em>i</em>
followed by <em>n</em> followed by <em>k</em>, at the <em>start of a
line</em>;</p>
<p>and will match the lines</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>i think we all rule for participating</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>i think i have been outed</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>i think this will be quite fun actually</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>i think i need to go to work</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>i think i first saw zombo in 1999.</span></code></pre></div>
</div>
<div id="end-of-a-line" class="section level4" number="1.1.2.2">
<h4><span class="header-section-number">1.1.2.2</span> End of a line:
<code>$</code></h4>
<p>The <strong>dollar sign</strong> metacharacter, <code>$</code>,
represents the <em>end of a line</em>.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>morning$</span></code></pre></div>
<p>will match the lines</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>well they had something this morning</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>then had to catch a tram home in the morning</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>dog obedience school in the morning</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>and yes happy birthday i forgot to say it earlier this morning</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>I walked in the rain this morning</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>good morning</span></code></pre></div>
</div>
<div id="character-classes" class="section level4" number="1.1.2.3">
<h4><span class="header-section-number">1.1.2.3</span> Character
Classes: <code>[]</code></h4>
<p>With the <strong>square brackets</strong> metacharacter, we can
<em>list a set of characters</em> we will <em>accept</em> at a <em>given
point in the match</em>.</p>
<p>For <strong>example</strong>, the following regular expression:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Bb</span><span class="co">][Uu][</span><span class="ot">Ss</span><span class="co">][Hh]</span></span></code></pre></div>
<p>will accept, for each of the letters of the word we are interested
in, either a capital letter or a lowercase letter;</p>
<p>so, it will match the lines</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>The democrats are playing, &quot;Name the worst thing about Bush!&quot;</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>I smelled the desert creosote bush, brownies, BBQ chicken </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>BBQ and bushwalking at Molonglo Gorge</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>Bush TOLD you that North Korea is part of the Axis of Evil</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>I’m listening to Bush - Hurricane (Album Version)</span></code></pre></div>
<p><strong>Another example</strong>:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>^<span class="co">[</span><span class="ot">Ii</span><span class="co">]</span> am</span></code></pre></div>
<p>will match</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>i am so angry at my boyfriend i can’t even bear to look at him</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>i am boycotting the apple store</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>I am twittering from iPhone</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>I am a very vengeful person when you ruin my sweetheart.</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>I am so over this. I need food. Mmmm bacon...</span></code></pre></div>
<p>Similarly, we can specify a <strong>range of letters or
digits</strong>:</p>
<ul>
<li><code>[a-z]</code> matches any lowercase letter of the english
alphabet.<br />
</li>
<li><code>[a-zA-Z]</code> matches any lowercase or uppercase letter of
the english alphabet (notice that the order <em>doesn’t</em> matter
here).<br />
</li>
<li><code>[0-9]</code> matches any decimal digit.</li>
</ul>
<p>For example, this regular expression:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>^<span class="co">[</span><span class="ot">0-9</span><span class="co">][a-zA-Z]</span></span></code></pre></div>
<p>will search at the beginning of the line, any decimal digit followed
by any letter of the alphabet either uppercase or lowercase (in other
words, we want those lines that begin with a single number followed by a
letter);</p>
<p>so, it will match the lines:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>7th inning stretch</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>2nd half soon to begin. OSU did just win something</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>3am - cant sleep - too hot still.. :(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>5ft 7 sent from heaven</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>1st sign of starvagtion</span></code></pre></div>
</div>
<div id="not-character-classes" class="section level4" number="1.1.2.4">
<h4><span class="header-section-number">1.1.2.4</span> NOT character
classes: <code>[^]</code></h4>
<p>When used <strong>at the beginning of a character class</strong>, the
carrot <code>^</code> is <strong>also a metacharacter</strong> but with
a <strong>different meaning</strong>: it indicates <em>matching
characters NOT in the indicated class</em>.</p>
<p>For example, the regular expression:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[^?.]</span>$</span></code></pre></div>
<p>will search for lines that do <strong>not</strong> have a
<em>question mark</em> or a <em>dot</em> at the <em>end of the
line</em>;</p>
<p>so, it will match the lines</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>i like basketballs</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>6 and 9</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>dont worry... we all die anyway!</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>Not in Baghdad</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>helicopter under water? hmmm</span></code></pre></div>
</div>
<div id="any-character-." class="section level4" number="1.1.2.5">
<h4><span class="header-section-number">1.1.2.5</span> Any character:
<code>.</code></h4>
<p>The <strong>dot or period</strong> metacharacter, <code>.</code>, is
used to refer to <em>any character</em> (including
<em>nothing</em>).</p>
<p>So, the following regular expression:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>9.11</span></code></pre></div>
<p>will search for the literal <em>nine</em> followed by <em>any
characther</em> followed by the literal <em>one</em> followed by another
digit <em>one</em> (in other words, we should be looking for any
reasonable combination of the date “nine eleven”, but we could get other
things though such us ips, times, account numbers, etc.);</p>
<p>so, it will match the lines</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>its stupid the post 9-11 rules</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>if any 1 of us did 9/11 we would have been caught in days.</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>NetBios: scanning ip 203.169.114.66</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>Front Door 9:11:46 AM</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>Sings: 0118999881999119725...3 !</span></code></pre></div>
<ul>
<li><strong>Notice</strong>: in the last line of this example, the
<code>.</code> metacharacter also <strong><em>matches</em></strong>
<strong><em>nothing</em></strong>. Infact, we can see that the only
combination of a <em>nine</em> followed by <em>anything</em> and two
<em>ones</em> in the line, is the sequence <code>...911...</code></li>
</ul>
</div>
<div id="alternative-expressions" class="section level4"
number="1.1.2.6">
<h4><span class="header-section-number">1.1.2.6</span> Alternative
expressions: <code>|</code></h4>
<p>The <strong>vertical line</strong> metacharacter does not mean “pipe”
in the context of regular expressions; instead it translates to
<em>or</em>.</p>
<ul>
<li>We can use it to <em>combine two</em>
<strong><em>expressions</em></strong>.<br />
</li>
<li>The subexpressions are called alternatives.</li>
</ul>
<div class="sourceCode" id="cb16"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>flood|fire</span></code></pre></div>
<p>will match the lines</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>is firewire like usb on none macs?</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>the global flood makes sense within the context of the bible</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>yeah ive had the fire on tonight</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>... and the floods, hurricanes, killer heatwaves, rednecks, gun nuts, etc.￼</span></code></pre></div>
<p>We can include <strong>any number of alternatives…</strong></p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>flood|earthquake|hurricane|coldfire</span></code></pre></div>
<p>will match the lines</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Not a whole lot of hurricanes in the Arctic.</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>We do have earthquakes nearly every day somewhere in our State</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>hurricanes swirl in the other direction</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>coldfire is STRAIGHT!</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>’cause we keep getting earthquakes</span></code></pre></div>
<p>As we said, the alternatives can be <strong><em>real
expressions</em></strong> and <em>not just literals</em>:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>^<span class="co">[</span><span class="ot">Gg</span><span class="co">]</span>ood|<span class="co">[</span><span class="ot">Bb</span><span class="co">]</span>ad</span></code></pre></div>
<p>will match the lines</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>good to hear some good knews from someone here</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>Good afternoon fellow american infidels!</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>good on you-what do you drive?</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>Katie... guess they had bad experiences...</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>my middle name is trouble, Miss Bad News</span></code></pre></div>
</div>
<div id="constrain-alternatives" class="section level4"
number="1.1.2.7">
<h4><span class="header-section-number">1.1.2.7</span> Constrain
alternatives: <code>( )</code></h4>
<p>Subexpressions are often contained in <strong>parentheses</strong> to
<em>constrain or limit the scope</em> <em>of alternatives</em>.</p>
<p>For example, if we want to search for lines that start with one word
belonging to a set of possible words, we can wrap them -constrain them-
within the <strong>parentheses</strong> metacharacters and apply to them
the <em>carrot</em> metacaracter.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>^(<span class="co">[</span><span class="ot">Gg</span><span class="co">]</span>ood|<span class="co">[</span><span class="ot">Bb</span><span class="co">]</span>ad)</span></code></pre></div>
<p>will match the lines</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>bad habbit</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>bad coordination today</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>good, becuase there is nothing worse than a man in kinky underwear</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>Badcop, its because people want to use drugs</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>Good Monday Holiday</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>Good riddance to Limey</span></code></pre></div>
</div>
<div id="optional-expression" class="section level4" number="1.1.2.8">
<h4><span class="header-section-number">1.1.2.8</span> Optional
expression: ?</h4>
<p>The <strong>question mark</strong> metacharacter indicates that the
<em>indicated expression is optional</em>.</p>
<p>Let’s consider this regular expression:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Gg</span><span class="co">]</span>eorge( <span class="co">[</span><span class="ot">Ww</span><span class="co">]</span><span class="sc">\.</span>)? <span class="co">[</span><span class="ot">Bb</span><span class="co">]</span>ush</span></code></pre></div>
<p>It will search for the words <em>George</em> or <em>george</em> and
<em>Bush</em> or <em>bush</em> and, optionally in the middle, a
<em>space</em> followed by a <em>W</em> or <em>w</em> followed by the
literal <em>period</em>. - <strong>Notice</strong> that the
<em>period</em> is interpreted as a <strong>literal</strong> and
<strong>not as the any</strong> <strong>metacharacter</strong>, because
it is <strong>escaped</strong> with a
<strong><em>backslash</em></strong>.</p>
<p>So, it will match the lines</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>i bet i can spell better than you and george bush combined</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>BBC reported that President George W. Bush claimed God told him to invade I</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>a bird in the hand is worth two george bushes</span></code></pre></div>
</div>
<div id="repetition-and" class="section level4" number="1.1.2.9">
<h4><span class="header-section-number">1.1.2.9</span> Repetition:
<code>*</code> and <code>+</code></h4>
<p>The <strong>asterisk or star</strong>, <code>*</code>, and the
<strong>plus</strong>, <code>+</code>, signs are metacharacters used to
<em>indicate repetition</em>.</p>
<ul>
<li><code>*</code> means <em>any number, including none,</em> of the
item (a literal, other metacharacter, expressions) that
<em>preceeds</em> that metacharacter.<br />
</li>
<li><code>+</code> means <em>at least one of the item</em> (a literal,
other metacharacter, expressions) that <em>preceeds</em> that
metacharacter.</li>
</ul>
<p>For <strong>example</strong>, this regular expression:</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="sc">\(</span>.*<span class="sc">\)</span></span></code></pre></div>
<p>searches for the literal <code>(</code>, followed by any character
reapeted any number of times -including none item-, followed by a the
literal <code>)</code> (in other words, we want to find all the
expressions between parenthesis, including “void” parenthesis);</p>
<p>so, it will match the lines</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>anyone wanna chat? (24, m, germany)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>hello, 20.m here... ( east area + drives + webcam )</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>(he means older men)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>()</span></code></pre></div>
<p><strong>Another example</strong>.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">0-9</span><span class="co">]</span>+ (.*)<span class="co">[</span><span class="ot">0-9</span><span class="co">]</span>+</span></code></pre></div>
<p>This regular expression searches for at least one <em>decimal
digit</em>, followed by a <em>space</em>, followed by <em>any number of
characters</em> (including none), followed by at least one
<em>digit</em>.</p>
<p>So, it will match the lines</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>working as MP here 720 MP battallion, 42nd birgade</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>so say 2 or 3 years at colleage and 4 at uni makes us 23 when and if we fin</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>it went down on several occasions for like, 3 or 4 *days*</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>Mmmm its time 4 me 2 go 2 bed</span></code></pre></div>
</div>
<div id="interval-quantifiers" class="section level4" number="1.1.2.10">
<h4><span class="header-section-number">1.1.2.10</span> Interval
quantifiers: <code>{ }</code></h4>
<p>The <strong>curly braces</strong> metacharacters are referred to as
<em>interval quantifiers</em>.</p>
<ul>
<li><code>{m,n}</code> let us specify the <em>minimum</em> and
<em>maximum number of matches</em> of an expression.<br />
</li>
<li><code>{m}</code> means <em>exactly m matches</em>.<br />
</li>
<li><code>{m,}</code> means <em>at least m matches</em>.</li>
</ul>
<p>For example, this regular expression:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Bb</span><span class="co">]</span>ush( +<span class="ot">[^ ]</span>+ +){1,5} debate</span></code></pre></div>
<p>will search for <em>[Bb]ush</em>, followed by at least one
<em>space</em> &lt;<code>+</code>&gt;, followed at least by something
that is <em>not a space</em> &lt;<code>[^ ]+</code>, followed by at
least another <em>space</em> &lt;<code>+</code>&gt;; and we want to see
that between 1 to 5 times &lt;<code>( +[^ ]+ +){1,5}</code>&gt; before a
<em>space</em> an the literal <em>debate</em>. In short, we want to see
between <em>[Bb]ush</em> and <em>debate</em> something like <em>“space
not-space space”</em> (that’s no other thing that <em>a word</em>)
repeated 1 to 5 times;</p>
<p>so, it will match the lines</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>Bush has historically won all major debates he’s done.</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>in my view, Bush doesn’t need these debates..</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>bush doesn’t need the debates? maybe you are right</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>That’s what Bush supporters are doing about the debate.</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>Felix, I don’t disagree that Bush was poorly prepared for the debate.</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>indeed, but still, Bush should have taken the debate more seriously.</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>Keep repeating that Bush smirked and scowled during the debate</span></code></pre></div>
</div>
<div id="remember-previous-matched-expressions-and-1-2"
class="section level4" number="1.1.2.11">
<h4><span class="header-section-number">1.1.2.11</span> Remember
previous matched expressions: <code>( )</code> and <code>\1</code>,
<code>\2</code>, …</h4>
<p>In most implementations of regular expressions, <strong>the
parentheses</strong> metacharacters:</p>
<ul>
<li><strong>not only</strong> <em>limit the scope of alternatives</em>
divided by a “|”,<br />
</li>
<li><strong>but also</strong> can be used to <em>“remember” text matched
by the subexpression enclosed</em>.
<ul>
<li>This is someting called <strong>parenthesized
subexpressions</strong> and it can be very powerful.<br />
</li>
<li>We refer to the matched parethesed subexpressions with escaped
numbers, like <code>\1</code>, <code>\2</code>, etc.</li>
</ul></li>
</ul>
<p>For example:</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a> +(<span class="co">[</span><span class="ot">a-zA-Z</span><span class="co">]</span>+) +\1 +</span></code></pre></div>
<p>This regular expression will search for:</p>
<ul>
<li>at least a <em>space</em>, followed by at least one but possibly
more lowercase or uppercase <em>letters</em>, followed by at least one
<em>space</em> (the sequence “space-letters-space” identifies <em>a
word</em>),<br />
</li>
<li>followed by the <em>exact same match that we saw within the
parenthesis</em> (the <code>\1</code> means “put in here whatever
subexpression within the previous parentheses was matched”).</li>
</ul>
<p>In other words, it finds instances where <strong>any word is
repeated</strong>.</p>
<p>So, it will match the lines</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>time for bed, night night twitter!</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>blah blah blah blah</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>my tattoo is so so itchy today</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>i was standing all all alone against the world outside...</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>hi anybody anybody at home</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>estudiando css css css css.... que desastritooooo</span></code></pre></div>
<ul>
<li><p>Notice that we’re not searching here for a <em>specific word</em>
to be repeated, but<em>any word</em> to be repeated. We don’t know the
pattern that is going to be repeated.</p></li>
<li><p>That’s why we have to use the <code>\1</code> to match whatever
parenthesized subexpression was previously found.</p></li>
</ul>
</div>
<div id="turning-off-the-greediness-of-with" class="section level4"
number="1.1.2.12">
<h4><span class="header-section-number">1.1.2.12</span> Turning off the
greediness of <code>*</code> with <code>?</code></h4>
<p>The <code>*</code> metacharacter is “greedy” so it always matches
<em>the longest possible string</em> that <em>still satisfies the
regular expression</em>.</p>
<p>Infact</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>^s(.*)s</span></code></pre></div>
<p>searches at the beginning of the line for the longest string that
initiates and finishes with an <em>s</em>, with <em>anything in
between</em> -possible nothing-.</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>sitting at starbucks</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>setting up mysql and rails</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>studying stuff for the exams</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>spaghetti with marshmallows</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>stop fighting with crackers</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>sore shoulders, stupid ergonomics</span></code></pre></div>
<ul>
<li>So, notice for instance the <em>first match</em>: it didn’t stop at
the <em>first <code>s</code></em> of the word <em>starbacks</em>, but it
matched the longest possible string going further up to the <em>last
<code>s</code></em> of <em>starbacks</em>.</li>
</ul>
<p>The <strong>greediness</strong> of <code>*</code> <strong>can be
turned off</strong> with the <strong><code>?</code>
metacharacter</strong>.</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>^s(.*?)s$</span></code></pre></div>
<ul>
<li>The <strong>question mark</strong> metacharacter
<strong>tells</strong> the star metacharacter <strong>to be
lazy</strong>, that is to say, instead of searching for the
<em>longest</em> possible matching string, search for the <em>first</em>
possible matching string (basically, the <em>shortest</em> one).</li>
</ul>
</div>
</div>
<div id="summary" class="section level3" number="1.1.3">
<h3><span class="header-section-number">1.1.3</span> Summary</h3>
<ul>
<li><p>Regular expressions are used in many different languages; not
unique to R.</p></li>
<li><p>Regular expressions are composed of literals and metacharacters
that represent sets or classes of characters/words.</p></li>
<li><p>Text processing via regular expressions is a very powerful way to
extract data from “unfriendly” sources (not all data comes as a CSV
file).</p></li>
</ul>
</div>
</div>
<div id="base-r-package-functions-for-dealing-with-regular-expressions."
class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> <code>base</code> R
package functions for dealing with regular expressions.</h2>
<p>Here’s the list of functions that we’re going to talk about:</p>
<ul>
<li><p>Searching by patterns with <code>grep()</code>,
<code>grepl()</code></p>
<ul>
<li>These functions <em>search for matches</em> of a regular
expression/pattern <em>in a character vector</em>.<br />
</li>
<li><code>grep()</code> <strong>returns the indices</strong> into the
character vector that contain a match <strong>or the</strong>
<strong>values -specific strings-</strong> that happen to have the match
(<code>value</code> parameter).<br />
</li>
<li><code>grepl()</code> <strong>returns a logical vector</strong>
indicating which elements of the character vector contain a match.</li>
</ul></li>
<li><p>Searching by patterns with <code>regexpr()</code>,
<code>gregexpr()</code></p>
<ul>
<li>They <em>search a character vector</em> for regular expression
matches and <strong>return the indices</strong> of the <strong>string
where the match begins</strong> and the <strong>length of the
match</strong>.</li>
</ul></li>
<li><p>Searching by patterns and replacing with <code>sub()</code>,
<code>gsub()</code></p>
<ul>
<li>They <em>search a character vector</em> for regular expression
matches and <strong>replace that match</strong> <strong>with another
string</strong>.</li>
</ul></li>
<li><p>Searching by patterns<code>regexec()</code></p>
<ul>
<li>This function <em>searches a character vector</em> for a regular
expression, much like <code>regexpr()</code>, but it will
<strong>additionally return the locations</strong> of <strong>any
parenthesized sub-expressions</strong>.</li>
</ul></li>
<li><p>Fixing character vectors with <code>tolower()</code> or
<code>toupper()</code>, <code>strsplit()</code> and
<code>sapply()</code>.</p></li>
<li><p>Other useful <code>base</code> functions: <code>nchar()</code>,
<code>paste()</code>.</p></li>
</ul>
<div id="datasets-that-well-use-as-our-working-examples."
class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Datasets that we’ll
use as our working examples.</h3>
<p>As our running examples, we’re going alternatively use three
datasets:</p>
<ol style="list-style-type: decimal">
<li><p>The Baltimore city cameras dataset, that we’ve already downloaded
in the <code>cameras.csv</code> file.</p></li>
<li><p>The peer review experiment dataset and it’s files that we’ve also
already downloaded:</p>
<ul>
<li><p><code>reviews.csv</code> is the set of problems that have been
reviewed by peers in this experiment.</p></li>
<li><p><code>solutions.csv</code> is the set of the SAT questions that
have been submitted by people.</p></li>
</ul></li>
<li><p>Finally, we wi’ll use data about <strong>homicides in Baltimore
City</strong>.</p>
<ul>
<li><p>The <em>Baltimore Sun</em> newspaper collects information on all
homicides that occur in the city (it also reports on many of
them).</p></li>
<li><p>That data is presented in a <a
href="http://data.baltimoresun.com/bing-maps/homicides/">map that is
publically available</a>.</p></li>
<li><div class="figure">
<img src="3_data/Baltimore-Sun_homicides.png" alt="" />
<p class="caption">The Baltimore Sun homicides page</p>
</div></li>
<li><p>The data on that web site are not particularly amenable to
analysis.</p></li>
<li><p>In a separate file, <code>homicides.txt</code>, there’re
homicides data from January 2007 to October 2013 directly <em>scraped
from the website</em>.</p></li>
<li><p>This dataset is <strong>formatted</strong> so <strong>each
homicide</strong> is presented on a <strong>single line of</strong>
<strong>text</strong>.</p></li>
<li><p>So we’ll read the data in using <code>readLines()</code> and end
up having a character vector whose elements represent, each, a single
homicide event.</p></li>
</ul></li>
</ol>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>homicides <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">&quot;./3_data/homicides.txt&quot;</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(homicides)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;character&quot;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Total number of events recorded.</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(homicides)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1571</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Inspect some events.</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>homicides[<span class="dv">1</span>]</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.311024, -76.674227, iconHomicideShooting, &#39;p2&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Leon Nelson&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;3400 Clifton Ave.&lt;br /&gt;Baltimore, MD 21216&lt;/dd&gt;&lt;dd&gt;black male, 17 years old&lt;/dd&gt;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at Shock Trauma&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>homicides[<span class="dv">1000</span>]</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.33626300000, -76.55553990000, icon_homicide_shooting, &#39;p1200&#39;, &#39;&lt;dl&gt;&lt;dt&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://essentials.baltimoresun.com/micro_sun/homicides/victim/1200/davon-diggs</span><span class="sc">\&quot;</span><span class="st">&gt;Davon Diggs&lt;/a&gt;&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;4100 Parkwood Ave&lt;br /&gt;Baltimore, MD 21206&lt;/dd&gt;&lt;dd&gt;Race: Black&lt;br /&gt;Gender: male&lt;br /&gt;Age: 21 years old&lt;/dd&gt;&lt;dd&gt;Found on November  5, 2011&lt;/dd&gt;&lt;dd&gt;Victim died at Johns Hopkins Bayview Medical Center &lt;/dd&gt;&lt;dd&gt;Cause: Shooting&lt;/dd&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">popup-note</span><span class="sc">\&quot;</span><span class="st">&gt;&lt;p&gt;Originally reported in 5000 Belair Road; later determined to be rear alley of 4100 block Parkwood&lt;/p&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span></code></pre></div>
<p>A few interesting features stand out:</p>
<ul>
<li>We have the <em>latitude and longitude</em> of where the victim was
found.<br />
</li>
<li>There’s the <em>street address</em>, the <em>age</em>, <em>race</em>
and <em>gender</em> of the victim.<br />
</li>
<li>The <em>date</em> on which the victim was found.<br />
</li>
<li>In <em>which hospital</em> the victim ultimately died.<br />
</li>
<li>The <em>cause of death</em> and for each cause of death is
<em>different icon/flag</em> placed on the map.</li>
</ul>
</div>
<div id="searching-by-patterns-with-grep." class="section level3"
number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Searching by
patterns with <code>grep()</code>.</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(grep)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (pattern, x, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>, <span class="at">perl =</span> <span class="cn">FALSE</span>, <span class="at">value =</span> <span class="cn">FALSE</span>, </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">fixed =</span> <span class="cn">FALSE</span>, <span class="at">useBytes =</span> <span class="cn">FALSE</span>, <span class="at">invert =</span> <span class="cn">FALSE</span>)  </span></code></pre></div>
<p>So suppose we wanted to <strong>identify the records</strong> for all
the victims of <strong>shootings</strong> (as opposed to other causes)?
How could we do that?</p>
<p>Well, we could make some tries based on what we know about the
dataset:</p>
<ul>
<li>Shooting deaths are inidicated with specific lables such
<code>iconHomicideShooting</code> or
<code>icon_homicide_shooting</code>.<br />
</li>
<li>There’s also the cause of death field that seems to have this
format: <code>Cause: shooting</code> or
<code>Cause: Shooting</code>.</li>
</ul>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Matching the literal &quot;iconHomicideShooting&quot;.</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;iconHomicideShooting&quot;</span>, homicides)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(g)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">228</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> ...</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># It’s not uncommon over time for web site maintainers to change the names of files</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># or update files. So let&#39;s grep now both icon names &quot;iconHomicideShoot&quot; or</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;icon_homicide_shooting&quot;</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;iconHomicideShooting|icon_homicide_shooting&quot;</span>, homicides)</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(g)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">1263</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> ...</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Now matching the cause of death field.</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;Cause: shooting&quot;</span>, homicides)</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(g)</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">228</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> ...</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;Cause: [Ss]hooting&quot;</span>, homicides)         <span class="co"># Better.</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(g)</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">1263</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> ...</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;[Cc]ause: [Ss]hooting&quot;</span>, homicides)      <span class="co"># Same result.</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(g)</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">1263</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> ...</span></code></pre></div>
<div
id="risk-of-greping-things-out-of-context-and-comparing-with-setdiff."
class="section level4" number="1.2.2.1">
<h4><span class="header-section-number">1.2.2.1</span> Risk of greping
things out of context and comparing with <code>setdiff()</code>.</h4>
<p>One thing we have to be careful of when processing text data is not
<code>grep</code> things out of context.</p>
<p>For example, suppose we just <code>grep</code>ed on the expression
<code>[Ss]hooting</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;[Ss]hooting&quot;</span>, homicides)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(g)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a> int [<span class="dv">1</span><span class="sc">:</span><span class="dv">1265</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> ...</span></code></pre></div>
<p>Notice that we <em>apparently picked up two extra homicides</em> this
way.</p>
<p>We can figure out which ones they are by <strong>comparing the
results of the two expressions</strong> with <strong>the
<code>setdiff()</code> command</strong>.</p>
<ul>
<li>First we’ll <em>get the indices</em> for the each expresssion
match.<br />
</li>
<li>Then we’ll identify <em>which are the entries</em> that those
vectors <em>do not have in common</em>.</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;Cause: [Ss]hooting&quot;</span>, homicides)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>j <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;[Ss]hooting&quot;</span>, homicides)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(i, j)                  <span class="co"># entries of &quot;i&quot; that are not in &quot;j&quot;.</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">integer</span>(<span class="dv">0</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(j, i)                  <span class="co"># entries of &quot;j&quot; that are not in &quot;i&quot;.</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">318</span> <span class="dv">859</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>homicides[<span class="fu">c</span>(<span class="dv">318</span>, <span class="dv">859</span>)]</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.28322500000, -76.63946800000, icon_homicide_bluntforce, &#39;p472&#39;, &#39;&lt;dl&gt;&lt;dt&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://essentials.baltimoresun.com/micro_sun/homicides/victim/472/lyle-dimeler</span><span class="sc">\&quot;</span><span class="st">&gt;Lyle Dimeler&lt;/a&gt;&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;400 S. Calhoun St.&lt;br /&gt;Baltimore, MD 21223&lt;/dd&gt;&lt;dd&gt;Race: Unknown&lt;br /&gt;Gender: male&lt;br /&gt;Age: 53 years old&lt;/dd&gt;&lt;dd&gt;Found on November 18, 2008&lt;/dd&gt;&lt;dd&gt;Victim died at Maryland Shock Trauma Center&lt;/dd&gt;&lt;dd&gt;Cause: Blunt Force&lt;/dd&gt;&lt;dd&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://www.baltimoresun.com/news/local/bal-shootingdeath1118,0,3571249.story</span><span class="sc">\&quot;</span><span class="st">&gt;Read the article&lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span>      </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] <span class="st">&quot;39.33743900000, -76.66316500000, icon_homicide_bluntforce, &#39;p914&#39;, &#39;&lt;dl&gt;&lt;dt&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://essentials.baltimoresun.com/micro_sun/homicides/victim/914/steven-harris</span><span class="sc">\&quot;</span><span class="st">&gt;Steven Harris&lt;/a&gt;&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;4200 Pimlico Road&lt;br /&gt;Baltimore, MD 21215&lt;/dd&gt;&lt;dd&gt;Race: Black&lt;br /&gt;Gender: male&lt;br /&gt;Age: 38 years old&lt;/dd&gt;&lt;dd&gt;Found on July 29, 2010&lt;/dd&gt;&lt;dd&gt;Victim died at Scene&lt;/dd&gt;&lt;dd&gt;Cause: Blunt Force&lt;/dd&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">popup-note</span><span class="sc">\&quot;</span><span class="st">&gt;&lt;p&gt;Harris was found dead July 22 and ruled a shooting victim; an autopsy subsequently showed that he had not been shot,...&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span></code></pre></div>
<ul>
<li>We can see that the word <em>shooting</em> appears in the narrative
text that accompanies the data, but the ultimate cause of death was in
fact <em>blunt force</em>.</li>
</ul>
<blockquote>
<p><strong>Conclusion</strong>: When developing a regular expression to
extract entries from a large dataset, it’s important that we
<strong>understand the formatting</strong> of the dataset <strong>well
enough</strong> so that we can develop a <strong>specific
expression</strong> that doesn’t accidentally grep data out of
context.</p>
</blockquote>
</div>
<div id="returning-the-values-not-the-indices-that-satisfy-the-match."
class="section level4" number="1.2.2.2">
<h4><span class="header-section-number">1.2.2.2</span> Returning the
values (not the indices) that satisfy the match.</h4>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>victims13 <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;13 years old&quot;</span>, homicides, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>victims13</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.343826, -76.679404, iconHomicideStabbing, &#39;p270&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Tywonde Jones&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;5000 Cordelia Ave.&lt;br /&gt;Baltimore, MD 21215&lt;/dd&gt;&lt;dd&gt;black male, 13 years old&lt;/dd&gt;&lt;dd&gt;Found on November 29, 2007&lt;/dd&gt;&lt;dd&gt;Cause: stabbing&lt;/dd&gt;&lt;dd&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://www.baltimoresun.com/news/local/baltimore_city/bal-stabbing1130,0,3512865.story</span><span class="sc">\&quot;</span><span class="st">&gt;Read the article&lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span>                                                                                                                                          </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] <span class="st">&quot;39.31537200000, -76.59555500000, icon_homicide_shooting, &#39;p1249&#39;, &#39;&lt;dl&gt;&lt;dt&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://data.baltimoresun.com/bing-maps/homicides/victim/1249/monae-turnage</span><span class="sc">\&quot;</span><span class="st">&gt;Monae Turnage&lt;/a&gt;&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;1600 Cliftview Ave&lt;br /&gt;Baltimore, MD 21213&lt;/dd&gt;&lt;dd&gt;Race: Black&lt;br /&gt;Gender: female&lt;br /&gt;Age: 13 years old&lt;/dd&gt;&lt;dd&gt;Found on March  4, 2012&lt;/dd&gt;&lt;dd&gt;Victim died at Scene&lt;/dd&gt;&lt;dd&gt;Cause: Shooting&lt;/dd&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">popup-note</span><span class="sc">\&quot;</span><span class="st">&gt;&lt;p&gt;Found under trash bags in backyard; had been earlier reported missing&lt;/p&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span></code></pre></div>
</div>
<div id="checking-that-a-particular-value-does-not-appear."
class="section level4" number="1.2.2.3">
<h4><span class="header-section-number">1.2.2.3</span> Checking that a
particular value DOES NOT appear.</h4>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">&quot;UnicornioAzul&quot;</span>, homicides)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(g)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">0</span></span></code></pre></div>
</div>
<div id="all-again-with-another-example." class="section level4"
number="1.2.2.4">
<h4><span class="header-section-number">1.2.2.4</span> All again with
another example.</h4>
<p>This time we go back to the Baltimore fixed camera data that we’ve
already downloaded in the <code>camera.csv</code> file and read it in as
a data frame.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>camerasData <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./3_data/cameras.csv&quot;</span>)</span></code></pre></div>
<p>So, let’s assume we want to know if there’s a camera along a certain
street, say <strong>“Alameda”</strong> street.</p>
<p>This example is very straightforward because all we have to do is
take that <strong>literal</strong> and search for a match in the
<code>intersection</code> column of the <code>camerasData</code> data
frame, that is going to be the character vector that we’re going to give
as input to these functions.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(camerasData<span class="sc">$</span>intersection)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a> Factor w<span class="sc">/</span> <span class="dv">74</span> levels <span class="st">&quot;</span><span class="sc">\n</span><span class="st">Pulaski Hwy </span><span class="sc">\n</span><span class="st"> &amp; Moravia Park Drive&quot;</span>,..<span class="sc">:</span> <span class="dv">21</span> <span class="dv">29</span> <span class="dv">10</span> <span class="dv">74</span> <span class="dv">62</span> <span class="dv">37</span> <span class="dv">48</span> <span class="dv">42</span> <span class="dv">6</span> <span class="dv">43</span> ...</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Search expression: the literal &quot;Alameda&quot;. Returns the indices of the elements</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># that contains the searched expression.</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Alameda&quot;</span>, camerasData<span class="sc">$</span>intersection)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">65</span> <span class="dv">69</span> <span class="dv">79</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>camerasData<span class="sc">$</span>intersection[<span class="fu">c</span>(<span class="dv">65</span>, <span class="dv">69</span>, <span class="dv">79</span>)]</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] E 33rd  <span class="sc">&amp;</span> The Alameda    The Alameda  <span class="sc">&amp;</span> 33rd St   Harford \n <span class="sc">&amp;</span> The Alameda</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="dv">74</span> Levels<span class="sc">:</span> \nPulaski Hwy \n <span class="sc">&amp;</span> Moravia Park Drive  <span class="sc">&amp;</span> ... York Rd \n <span class="sc">&amp;</span> Gitting Ave</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns the actual values.</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Alameda&quot;</span>, camerasData<span class="sc">$</span>intersection, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;E 33rd  &amp; The Alameda&quot;</span>    <span class="st">&quot;The Alameda  &amp; 33rd St&quot;</span>  </span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;Harford </span><span class="sc">\n</span><span class="st"> &amp; The Alameda&quot;</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking that a particular value DOES NOT appear.</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;UnicornioAzul&quot;</span>, camerasData<span class="sc">$</span>intersection)</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="fu">integer</span>(<span class="dv">0</span>)</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">grep</span>(<span class="st">&quot;UnicornioAzul&quot;</span>, camerasData<span class="sc">$</span>intersection))</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">0</span></span></code></pre></div>
</div>
</div>
<div id="searching-by-patterns-with-grepl." class="section level3"
number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Searching by
patterns with <code>grepl()</code>.</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(grepl)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (pattern, x, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>, <span class="at">perl =</span> <span class="cn">FALSE</span>, <span class="at">fixed =</span> <span class="cn">FALSE</span>, </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">useBytes =</span> <span class="cn">FALSE</span>)  </span></code></pre></div>
<p>This function works much like <code>grep()</code> except that it
differs in its return value.</p>
<ul>
<li><p><code>grepl()</code> <strong>returns a logical vector</strong>
indicating which element of a character vector contains the
match.</p></li>
<li><p>That logical vector can of course be used to subset the original
dataset.</p></li>
</ul>
<div id="homicides-example." class="section level4" number="1.2.3.1">
<h4><span class="header-section-number">1.2.3.1</span> Homicides
example.</h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>victims13 <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">&quot;13 years old&quot;</span>, homicides)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(victims13)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a> logi [<span class="dv">1</span><span class="sc">:</span><span class="dv">1571</span>] <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> ...</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(victims13)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>victims13</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span>  <span class="cn">TRUE</span> </span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">1569</span>     <span class="dv">2</span> </span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>homicides[victims13]</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.343826, -76.679404, iconHomicideStabbing, &#39;p270&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Tywonde Jones&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;5000 Cordelia Ave.&lt;br /&gt;Baltimore, MD 21215&lt;/dd&gt;&lt;dd&gt;black male, 13 years old&lt;/dd&gt;&lt;dd&gt;Found on November 29, 2007&lt;/dd&gt;&lt;dd&gt;Cause: stabbing&lt;/dd&gt;&lt;dd&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://www.baltimoresun.com/news/local/baltimore_city/bal-stabbing1130,0,3512865.story</span><span class="sc">\&quot;</span><span class="st">&gt;Read the article&lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span>                                                                                                                                          </span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] <span class="st">&quot;39.31537200000, -76.59555500000, icon_homicide_shooting, &#39;p1249&#39;, &#39;&lt;dl&gt;&lt;dt&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://data.baltimoresun.com/bing-maps/homicides/victim/1249/monae-turnage</span><span class="sc">\&quot;</span><span class="st">&gt;Monae Turnage&lt;/a&gt;&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;1600 Cliftview Ave&lt;br /&gt;Baltimore, MD 21213&lt;/dd&gt;&lt;dd&gt;Race: Black&lt;br /&gt;Gender: female&lt;br /&gt;Age: 13 years old&lt;/dd&gt;&lt;dd&gt;Found on March  4, 2012&lt;/dd&gt;&lt;dd&gt;Victim died at Scene&lt;/dd&gt;&lt;dd&gt;Cause: Shooting&lt;/dd&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">popup-note</span><span class="sc">\&quot;</span><span class="st">&gt;&lt;p&gt;Found under trash bags in backyard; had been earlier reported missing&lt;/p&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span></code></pre></div>
</div>
<div id="cameras-example." class="section level4" number="1.2.3.2">
<h4><span class="header-section-number">1.2.3.2</span> Cameras
example.</h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>logicalVec <span class="ot">&lt;-</span> <span class="fu">grepl</span>(<span class="st">&quot;Alameda&quot;</span>, camerasData<span class="sc">$</span>intersection)  </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(logicalVec)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a> logi [<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>] <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> ...</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(logicalVec)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>logicalVec</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span>  <span class="cn">TRUE</span> </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>   <span class="dv">77</span>     <span class="dv">3</span> </span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>camerasData2 <span class="ot">&lt;-</span> camerasData[logicalVec, ]</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>camerasData2</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>                    address direction      street crossStreet</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="dv">65</span>  E 33RD ST <span class="sc">&amp;</span> THE ALAMEDA       E<span class="sc">/</span>B      E 33rd The Alameda</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="dv">69</span>  THE ALAMEDA <span class="sc">&amp;</span> E 33RD ST       S<span class="sc">/</span>B The Alameda     33rd St</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="dv">79</span> HARFORD RD <span class="sc">&amp;</span> THE ALAMEDA       N<span class="sc">/</span>B  Harford \n The Alameda</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>               intersection              Location<span class="fl">.1</span> X2010.Census.Neighborhoods</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="dv">65</span>    E 33rd  <span class="sc">&amp;</span> The <span class="fu">Alameda</span> (<span class="fl">39.328341</span>, <span class="sc">-</span><span class="fl">76.595359</span>)                         <span class="dv">77</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a><span class="dv">69</span>   The Alameda  <span class="sc">&amp;</span> 33rd <span class="fu">St</span> (<span class="fl">39.328501</span>, <span class="sc">-</span><span class="fl">76.595355</span>)                         <span class="dv">77</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="dv">79</span> Harford \n <span class="sc">&amp;</span> The <span class="fu">Alameda</span> (<span class="fl">39.321207</span>, <span class="sc">-</span><span class="fl">76.590771</span>)                         <span class="dv">54</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>   X2010.Census.Wards.Precincts Zip.Codes</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a><span class="dv">65</span>                          <span class="dv">180</span>     <span class="dv">27307</span></span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a><span class="dv">69</span>                          <span class="dv">186</span>     <span class="dv">27307</span></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a><span class="dv">79</span>                          <span class="dv">189</span>     <span class="dv">27307</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>camerasData3 <span class="ot">&lt;-</span> camerasData[<span class="sc">!</span>logicalVec, ]</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(camerasData3)</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>                                    address direction          street</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>                GARRISON BLVD <span class="sc">&amp;</span> WABASH AVE       E<span class="sc">/</span>B     Garrison \n</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>                    HILLEN ST <span class="sc">&amp;</span> FORREST ST       W<span class="sc">/</span>B       Hillen \n</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>               EDMONDSON AVE <span class="sc">&amp;</span> N ATHOL AVE       E<span class="sc">/</span>B      Edmonson\n</span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>                    YORK RD <span class="sc">&amp;</span> GITTINGS AVE       S<span class="sc">/</span>B      York Rd \n</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>                 RUSSELL ST <span class="sc">&amp;</span> W HAMBURG ST       S<span class="sc">/</span>B       Russell\n</span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> S MARTIN LUTHER KING JR BLVD <span class="sc">&amp;</span> W PRATT ST       S<span class="sc">/</span>B MLK Jr. Blvd \n</span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>     crossStreet                 intersection              Location<span class="fl">.1</span></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     Wabash Ave     Garrison \n <span class="sc">&amp;</span> Wabash <span class="fu">Ave</span> (<span class="fl">39.341209</span>, <span class="sc">-</span><span class="fl">76.683117</span>)</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     Forrest St       Hillen \n <span class="sc">&amp;</span> Forrest <span class="fu">St</span>  (<span class="fl">39.29686</span>, <span class="sc">-</span><span class="fl">76.605532</span>)</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> Woodbridge Ave Edmonson\n  <span class="sc">&amp;</span> Woodbridge <span class="fu">Ave</span> (<span class="fl">39.293453</span>, <span class="sc">-</span><span class="fl">76.689391</span>)</span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    Gitting Ave     York Rd \n <span class="sc">&amp;</span> Gitting <span class="fu">Ave</span> (<span class="fl">39.370493</span>, <span class="sc">-</span><span class="fl">76.609812</span>)</span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>     Hamburg St      Russell\n  <span class="sc">&amp;</span> Hamburg <span class="fu">St</span> (<span class="fl">39.279819</span>, <span class="sc">-</span><span class="fl">76.623911</span>)</span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>       Pratt St   MLK Jr. Blvd \n <span class="sc">&amp;</span> Pratt <span class="fu">St</span> (<span class="fl">39.286027</span>, <span class="sc">-</span><span class="fl">76.627846</span>)</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a>  X2010.Census.Neighborhoods X2010.Census.Wards.Precincts Zip.Codes</span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>                        <span class="dv">252</span>                           <span class="dv">63</span>     <span class="dv">27295</span></span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>                        <span class="dv">179</span>                          <span class="dv">108</span>     <span class="dv">13645</span></span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>                        <span class="dv">213</span>                           <span class="dv">75</span>     <span class="dv">27950</span></span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>                         <span class="dv">37</span>                          <span class="dv">270</span>     <span class="dv">14009</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>                        <span class="dv">250</span>                          <span class="dv">178</span>     <span class="dv">27953</span></span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>                         <span class="dv">11</span>                          <span class="dv">168</span>     <span class="dv">27953</span></span></code></pre></div>
</div>
</div>
<div id="searching-by-patterns-with-regexpr-and-gregexpr."
class="section level3" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Searching by
patterns with <code>regexpr()</code> and <code>gregexpr()</code>.</h3>
<div id="limitations-of-grep-and-grepl." class="section level4"
number="1.2.4.1">
<h4><span class="header-section-number">1.2.4.1</span> Limitations of
<code>grep()</code> and <code>grepl()</code>.</h4>
<p>In particular, both functions tell us which strings in a character
vector match a certain pattern but they:</p>
<ul>
<li><strong>don’t tell us</strong> <strong><em>exactly
where</em></strong> <strong>the match occurs</strong>, or<br />
</li>
<li><strong><em>what the match is</em></strong> for a <strong>more
complicated regular expression</strong>.</li>
</ul>
</div>
<div id="how-regexpr-and-gregexpr-work." class="section level4"
number="1.2.4.2">
<h4><span class="header-section-number">1.2.4.2</span> How
<code>regexpr()</code> and <code>gregexpr()</code> work.</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(regexpr)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (pattern, text, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>, <span class="at">perl =</span> <span class="cn">FALSE</span>, <span class="at">fixed =</span> <span class="cn">FALSE</span>, </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">useBytes =</span> <span class="cn">FALSE</span>)  </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gregexpr)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (pattern, text, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>, <span class="at">perl =</span> <span class="cn">FALSE</span>, <span class="at">fixed =</span> <span class="cn">FALSE</span>, </span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">useBytes =</span> <span class="cn">FALSE</span>)  </span></code></pre></div>
<p>The <code>regexr()</code> function <strong>returns</strong>:</p>
<ol style="list-style-type: decimal">
<li>An integer vector of the same length as <code>text</code> parameter,
giving:
<ul>
<li>the <strong>starting position of the first match</strong>, or<br />
</li>
<li><strong><code>-1</code> if there is none</strong>.<br />
</li>
</ul></li>
<li>That vector is returned with <strong>attribute
<code>match.length</code></strong> giving:
<ul>
<li>the <strong>length of the matched text</strong>, or<br />
</li>
<li><strong>-1 for no match</strong>.</li>
</ul></li>
</ol>
<p>While <code>regexpr()</code> only gives us the first match of the
string (reading left to right), <strong><code>gregexpr()</code></strong>
will give us <strong>all of the matches</strong> in a given string
<strong>if there are more</strong> <strong>than one match</strong>.</p>
</div>
<div id="homicides-example.-1" class="section level4" number="1.2.4.3">
<h4><span class="header-section-number">1.2.4.3</span> Homicides
example.</h4>
<p>In our <strong>Baltimore City homicides dataset</strong>, we might be
interested in finding the <em>date on which each victim was
found</em>.</p>
<p>Taking a look at the dataset:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>homicides[<span class="dv">1</span>]</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.311024, -76.674227, iconHomicideShooting, &#39;p2&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Leon Nelson&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;3400 Clifton Ave.&lt;br /&gt;Baltimore, MD 21216&lt;/dd&gt;&lt;dd&gt;black male, 17 years old&lt;/dd&gt;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at Shock Trauma&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span></code></pre></div>
<p>it <em>seems that</em> we might be able to <em>just grep on the word
“Found”</em>.</p>
<p>However, the <em>word “found”</em> may <strong>appear
elsewhere</strong> in the entry, such as in this entry, where the word
“found” appears in the narrative text at the end.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>homicides[<span class="dv">954</span>]</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.30677400000, -76.59891100000, icon_homicide_shooting, &#39;p816&#39;, &#39;&lt;dl&gt;&lt;dt&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://essentials.baltimoresun.com/micro_sun/homicides/victim/816/kenly-wheeler</span><span class="sc">\&quot;</span><span class="st">&gt;Kenly Wheeler&lt;/a&gt;&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;1400 N Caroline St&lt;br /&gt;Baltimore, MD 21213&lt;/dd&gt;&lt;dd&gt;Race: Black&lt;br /&gt;Gender: male&lt;br /&gt;Age: 29 years old&lt;/dd&gt;&lt;dd&gt;Found on March  3, 2010&lt;/dd&gt;&lt;dd&gt;Victim died at Scene&lt;/dd&gt;&lt;dd&gt;Cause: Shooting&lt;/dd&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">popup-note</span><span class="sc">\&quot;</span><span class="st">&gt;&lt;p&gt;Wheeler</span><span class="sc">\\</span><span class="st">&#39;s body was&amp;nbsp;found on the grounds of Dr. Bernard Harris Sr.&amp;nbsp;Elementary School&lt;/p&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span></code></pre></div>
<p>But we can see that the date is:</p>
<ul>
<li><strong>typically preceded</strong> by <em>“Found on”</em>,
and<br />
</li>
<li>is <strong>surrounded by</strong> *
<dd>
</dd>
tags*.</li>
</ul>
<p>So let’s use the <strong>pattern</strong>
<code>&lt;dd&gt;[F|f]ound(.*)&lt;/dd&gt;</code> and see what it brings
up, taking only the first 10 entries.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">regexpr</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound(.*)&lt;/dd&gt;&quot;</span>, homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">177</span> <span class="dv">178</span> <span class="dv">188</span> <span class="dv">189</span> <span class="dv">178</span> <span class="dv">182</span> <span class="dv">178</span> <span class="dv">187</span> <span class="dv">182</span> <span class="dv">183</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="dv">93</span> <span class="dv">86</span> <span class="dv">89</span> <span class="dv">90</span> <span class="dv">89</span> <span class="dv">84</span> <span class="dv">85</span> <span class="dv">84</span> <span class="dv">88</span> <span class="dv">84</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<ul>
<li>So we have now, <strong>for each one of the strings or
entries</strong>, the position of the first match and it’s length.</li>
</ul>
</div>
<div id="extracting-the-matches-with-substr-and-regmatches."
class="section level4" number="1.2.4.4">
<h4><span class="header-section-number">1.2.4.4</span> Extracting the
matches with <code>substr()</code> and <code>regmatches()</code>.</h4>
<p><code>substr()</code> is a useful function of the <code>base</code>
package that we can naturally combine with <code>regexpr()</code>, in
the sense that we can use <code>substr()</code> to <strong>extract the
first match</strong> in a given string (or vector entry in our
example).</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(substr)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (x, start, stop)  </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(homicides[<span class="dv">1</span>], <span class="dv">177</span>, <span class="dv">177</span> <span class="sc">+</span> <span class="dv">93-1</span>)</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at Shock Trauma&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&quot;</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(homicides[<span class="dv">2</span>], <span class="dv">178</span>, <span class="dv">178</span> <span class="sc">+</span> <span class="dv">86-1</span>)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at scene&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&quot;</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], </span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="dv">177</span>, <span class="dv">178</span>, <span class="dv">188</span>), </span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="dv">177</span> <span class="sc">+</span> <span class="dv">93-1</span>, <span class="dv">178</span> <span class="sc">+</span> <span class="dv">86-1</span>, <span class="dv">188</span> <span class="sc">+</span> <span class="dv">89-1</span>))</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at Shock Trauma&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&quot;</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at scene&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&quot;</span>       </span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at scene&lt;/dd&gt;&lt;dd&gt;Cause: blunt force&lt;/dd&gt;&quot;</span>    </span></code></pre></div>
<p>While it’s straightforward to take the output of
<code>regexpr()</code> and feed it into <code>substr()</code> to get the
matches out of the original data, <strong>another handy function is
<code>regmatches()</code></strong> which *extracts the matches in the
strings/entries<strong> for us </strong>without you having to use**
<code>substr()</code>.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>matchedEntries <span class="ot">&lt;-</span> <span class="fu">regexpr</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound(.*)&lt;/dd&gt;&quot;</span>, homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], matchedEntries)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at Shock Trauma&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&quot;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at scene&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&quot;</span>       </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at scene&lt;/dd&gt;&lt;dd&gt;Cause: blunt force&lt;/dd&gt;&quot;</span>    </span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>] <span class="st">&quot;&lt;dd&gt;Found on January 3, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at scene&lt;/dd&gt;&lt;dd&gt;Cause: asphyxiation&lt;/dd&gt;&quot;</span>   </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at scene&lt;/dd&gt;&lt;dd&gt;Cause: blunt force&lt;/dd&gt;&quot;</span>    </span></code></pre></div>
</div>
<div id="limiting-the-greediness-of-the-pattern." class="section level4"
number="1.2.4.5">
<h4><span class="header-section-number">1.2.4.5</span> Limiting the
greediness of the pattern.</h4>
<p>Immediately, we can see that the previous regular expression picked
up too much information. This is because the <strong>pattern was too
greedy</strong> and matched too much of the string.</p>
<p>We need to use <strong>the <code>?</code> metacharacter</strong> to
make the regular expression <em>lazy</em> so that it <strong>stops at
the first <code>&lt;/dd&gt;</code> tag</strong>.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>matchedEntries <span class="ot">&lt;-</span> <span class="fu">regexpr</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound(.*?)&lt;/dd&gt;&quot;</span>, homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>matchedEntries</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">177</span> <span class="dv">178</span> <span class="dv">188</span> <span class="dv">189</span> <span class="dv">178</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">33</span> <span class="dv">33</span> <span class="dv">33</span> <span class="dv">33</span> <span class="dv">33</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(homicides[<span class="dv">1</span>], <span class="dv">177</span>, <span class="dv">177</span> <span class="sc">+</span> <span class="dv">33-1</span>)</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], matchedEntries)</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 3, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span></span></code></pre></div>
</div>
</div>
<div id="searching-by-pattern-and-replacing-with-sub-and-gsub."
class="section level3" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> Searching by
pattern and replacing with <code>sub()</code> and
<code>gsub()</code>.</h3>
<p>Sometimes we need to clean things up or modify strings by matching a
pattern and replacing it with something else.</p>
<p>We can make that job using these functions:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(sub)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (pattern, replacement, x, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>, <span class="at">perl =</span> <span class="cn">FALSE</span>, <span class="at">fixed =</span> <span class="cn">FALSE</span>, </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">useBytes =</span> <span class="cn">FALSE</span>)  </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gsub)</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (pattern, replacement, x, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>, <span class="at">perl =</span> <span class="cn">FALSE</span>, <span class="at">fixed =</span> <span class="cn">FALSE</span>, </span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">useBytes =</span> <span class="cn">FALSE</span>)  </span></code></pre></div>
<ul>
<li><code>sub()</code> performs replacement of the <em>first match
only</em>.<br />
</li>
<li><code>gsub()</code> performs replacment of <em>all
matches</em>.<br />
</li>
<li>Both functions can take in input a vector of strings.</li>
</ul>
<div id="homicides-example.-2" class="section level4" number="1.2.5.1">
<h4><span class="header-section-number">1.2.5.1</span> Homicides
example.</h4>
<p>For example, how can we <strong>extract the date</strong> from this
string?</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">substr</span>(homicides[<span class="dv">1</span>], <span class="dv">177</span>, <span class="dv">177</span> <span class="sc">+</span> <span class="dv">33-1</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span></span></code></pre></div>
<p>We want to <strong>strip out the stuff surrounding the “January 1,
2007” portion</strong>:</p>
<ul>
<li>we can do that by <em>matching on the text that comes before and
after it</em> using the <code>| operator</code>, and<br />
</li>
<li>then <em>replacing</em> it with the <em>empty string</em>.</li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on |&lt;/dd&gt;&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&lt;/dd&gt;&quot;</span></span></code></pre></div>
<ul>
<li>Using <strong><code>sub()</code> didn’t solve entirely the
problem</strong> because it found the first match (at the beginning of
the string) and repaced but <em>then stopped</em>.<br />
</li>
<li>So, we use <strong><code>gsub()</code> to replace all
matches</strong>.</li>
</ul>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on |&lt;/dd&gt;&quot;</span>, <span class="st">&quot;&quot;</span>, x)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&quot;</span></span></code></pre></div>
<p>Let’s pass a <strong>vector of strings to process</strong>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>positions <span class="ot">&lt;-</span> <span class="fu">regexpr</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound(.*?)&lt;/dd&gt;&quot;</span>, homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>strvector <span class="ot">&lt;-</span> <span class="fu">regmatches</span>(homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], positions)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>strvector</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 3, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on |&lt;/dd&gt;&quot;</span>, <span class="st">&quot;&quot;</span>, strvector)</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>dates</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 3, 2007&quot;</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;January 5, 2007&quot;</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;January&quot;</span>, <span class="st">&quot;Enero&quot;</span>, dates)</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>dates</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Enero 1, 2007&quot;</span> <span class="st">&quot;Enero 2, 2007&quot;</span> <span class="st">&quot;Enero 2, 2007&quot;</span> <span class="st">&quot;Enero 3, 2007&quot;</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;Enero 5, 2007&quot;</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(dates, <span class="st">&quot;%B %d, %Y&quot;</span>)</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2007-01-01&quot;</span> <span class="st">&quot;2007-01-02&quot;</span> <span class="st">&quot;2007-01-02&quot;</span> <span class="st">&quot;2007-01-03&quot;</span> <span class="st">&quot;2007-01-05&quot;</span></span></code></pre></div>
</div>
<div id="peer-review-experiment-data-example." class="section level4"
number="1.2.5.2">
<h4><span class="header-section-number">1.2.5.2</span> Peer review
experiment data example.</h4>
<p>Let’s load the files of the peer review experiment dataset.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>reviews <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./3_data/reviews.csv&quot;</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(reviews)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;id&quot;</span>          <span class="st">&quot;solution_id&quot;</span> <span class="st">&quot;reviewer_id&quot;</span> <span class="st">&quot;start&quot;</span>       <span class="st">&quot;stop&quot;</span>       </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] <span class="st">&quot;time_left&quot;</span>   <span class="st">&quot;accept&quot;</span>     </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>solutions <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./3_data/solutions.csv&quot;</span>)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(solutions)</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;id&quot;</span>         <span class="st">&quot;problem_id&quot;</span> <span class="st">&quot;subject_id&quot;</span> <span class="st">&quot;start&quot;</span>      <span class="st">&quot;stop&quot;</span>      </span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] <span class="st">&quot;time_left&quot;</span>  <span class="st">&quot;answer&quot;</span>    </span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>testName <span class="ot">&lt;-</span> <span class="st">&quot;this_is_a_test&quot;</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>testName</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;this_is_a_test&quot;</span></span></code></pre></div>
<p>We want to <strong>remove the</strong>
<strong><em>undersocres</em></strong> from the names of the
variables.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Substitue the first &quot;underscore&quot; in each element with &quot;nothing&quot;.</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">&quot;_&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="fu">names</span>(reviews))</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;id&quot;</span>         <span class="st">&quot;solutionid&quot;</span> <span class="st">&quot;reviewerid&quot;</span> <span class="st">&quot;start&quot;</span>      <span class="st">&quot;stop&quot;</span>      </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] <span class="st">&quot;timeleft&quot;</span>   <span class="st">&quot;accept&quot;</span>    </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">&quot;_&quot;</span>, <span class="st">&quot;&quot;</span>, testName)</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;thisis_a_test&quot;</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Substitute multiple instances of &quot;underscore&quot; in the same element.</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;_&quot;</span>, <span class="st">&quot;&quot;</span>, testName)</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;thisisatest&quot;</span></span></code></pre></div>
</div>
</div>
<div
id="searching-by-patterns-with-regexec-and-extracting-matches-with-substr-and-regmatches."
class="section level3" number="1.2.6">
<h3><span class="header-section-number">1.2.6</span> Searching by
patterns with <code>regexec()</code> and extracting matches with
<code>substr()</code> and <code>regmatches()</code>.</h3>
<p>The <code>regexec()</code> function works like <code>regexpr()</code>
except it gives further information about the <strong>indices for
parenthesized sub-expressions</strong>.</p>
<p>For example, let’s take this regular expression
<code>&lt;dd&gt;[F|f]ound on (.*?)&lt;/dd&gt;</code>:</p>
<ul>
<li>It has a <strong>portion in parentheses</strong> (the portion of the
expression that we presume will contain the date).</li>
</ul>
<p>So, if we give this pattern to <code>regexec()</code> for searching
in, say, the first string or entry of our <code>homicides</code> vector
of string:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>matched <span class="ot">&lt;-</span> <span class="fu">regexec</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on (.*?)&lt;/dd&gt;&quot;</span>, homicides[<span class="dv">1</span>])</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>matched</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">177</span> <span class="dv">190</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">33</span> <span class="dv">15</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(homicides[<span class="dv">1</span>], <span class="dv">177</span>, <span class="dv">177</span> <span class="sc">+</span> <span class="dv">33-1</span>)                <span class="co"># overall expression match.</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(homicides[<span class="dv">1</span>], <span class="dv">190</span>, <span class="dv">190</span> <span class="sc">+</span> <span class="dv">15-1</span>)                <span class="co"># parenthesized sub-expression.</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&quot;</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(homicides[<span class="dv">1</span>], matched)</span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 1, 2007&quot;</span>                  </span></code></pre></div>
<p>we can see in the output of <code>regexec()</code> that there are
<strong>two indices</strong> giving two pieces of information about the
searching string:</p>
<ul>
<li>The <strong>first index</strong> (character 177) tells us, just like
<code>regexpr</code> did, <strong>where the overall</strong>
<strong>match begins</strong>.<br />
</li>
<li>The <strong>second index</strong> (character 190) tells us where the
sub-expression in the parentheses begins.<br />
</li>
<li>We can then use:
<ul>
<li><code>substr()</code> to extract either the overall expression match
or the parenthesized sub-expression.<br />
</li>
<li><code>regmatches()</code> to <strong>more easily</strong> get both
things at once in a list.</li>
</ul></li>
</ul>
<p>If we feed <code>regexec()</code> with a <strong>vector of
strings</strong>, it <strong>returns a list</strong> with all that
information for each string.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>matchesList <span class="ot">&lt;-</span> <span class="fu">regexec</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on (.*?)&lt;/dd&gt;&quot;</span>, homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>matchesList</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">177</span> <span class="dv">190</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">33</span> <span class="dv">15</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">178</span> <span class="dv">191</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">33</span> <span class="dv">15</span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">188</span> <span class="dv">201</span></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">33</span> <span class="dv">15</span></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], matchesList)</span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 1, 2007&quot;</span>                  </span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span>                  </span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span>                  </span></code></pre></div>
<p><strong>Notice:</strong> if we give to <code>regexec()</code> a
pattern without any parenthesized sub-expression, we get a list with the
same information that <code>regexpr()</code> gives us in the form of a
vector.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">regexec</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on .*?&lt;/dd&gt;&quot;</span>, homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">177</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">33</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">178</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">33</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a><span class="fu">regexpr</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on .*?&lt;/dd&gt;&quot;</span>, homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">177</span> <span class="dv">178</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;match.length&quot;</span>)</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">33</span> <span class="dv">33</span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;index.type&quot;</span>)</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;chars&quot;</span></span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;useBytes&quot;</span>)</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>As a <strong>final example</strong>, we can <strong>make a plot of
monthly homicide counts</strong>.</p>
<p>First we need a <em>regular expression to capture the dates</em>.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>positions <span class="ot">&lt;-</span> <span class="fu">regexec</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on (.*?)&lt;/dd&gt;&quot;</span>, homicides)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>strlist <span class="ot">&lt;-</span> <span class="fu">regmatches</span>(homicides, positions)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(strlist)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1571</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(strlist)</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 1, 2007&quot;</span>                  </span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span>                  </span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span>                  </span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">4</span>]]</span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 3, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 3, 2007&quot;</span>                  </span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">5</span>]]</span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 5, 2007&quot;</span>                  </span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">6</span>]]</span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 5, 2007&quot;</span>                  </span></code></pre></div>
<p>Then we can <em>loop through the list returned</em> by
<code>regmatches()</code> and <em>extract the second</em>
<em>element</em> (the parenthesized sub-expression) of each.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>secondElement <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {x[<span class="dv">2</span>]}</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">sapply</span>(strlist, secondElement)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dates)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 3, 2007&quot;</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;January 5, 2007&quot;</span> <span class="st">&quot;January 5, 2007&quot;</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(dates))</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">is.na</span>(dates))     <span class="co"># NA at 515 index, only one missing value doesn&#39;t matter.</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">515</span></span></code></pre></div>
<p>Finally, we can <em>convert the date strings</em> into the
<code>Date</code> class and <em>make an histogram</em> of the
counts.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First we need to adjust months names to my local system date format.</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>months <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;January&quot;</span>, <span class="st">&quot;February&quot;</span>, <span class="st">&quot;March&quot;</span>, <span class="st">&quot;April&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;June&quot;</span>, <span class="st">&quot;July&quot;</span>, <span class="st">&quot;August&quot;</span>,</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;September&quot;</span>, <span class="st">&quot;October&quot;</span>, <span class="st">&quot;November&quot;</span>, <span class="st">&quot;December&quot;</span>)</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>meses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Enero&quot;</span>, <span class="st">&quot;Febrero&quot;</span>, <span class="st">&quot;Marzo&quot;</span>, <span class="st">&quot;Abril&quot;</span>, <span class="st">&quot;Mayo&quot;</span>, <span class="st">&quot;Junio&quot;</span>, <span class="st">&quot;Julio&quot;</span>, <span class="st">&quot;Agosto&quot;</span>,</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;Septiembre&quot;</span>, <span class="st">&quot;Octubre&quot;</span>, <span class="st">&quot;Noviembre&quot;</span>, <span class="st">&quot;Diciembre&quot;</span>)</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(months)) {</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    dates <span class="ot">&lt;-</span> <span class="fu">gsub</span>(months[i], meses[i], dates)</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dates)</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>   Length     Class      Mode </span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>     <span class="dv">1571</span> character character </span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dates)</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Enero 1, 2007&quot;</span> <span class="st">&quot;Enero 2, 2007&quot;</span> <span class="st">&quot;Enero 2, 2007&quot;</span> <span class="st">&quot;Enero 3, 2007&quot;</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;Enero 5, 2007&quot;</span> <span class="st">&quot;Enero 5, 2007&quot;</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Now we can convert.</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(dates, <span class="st">&quot;%B %d, %Y&quot;</span>)</span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dates)</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>        Min.      1st Qu.       Median         Mean      3rd Qu.         Max. </span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;2007-01-01&quot;</span> <span class="st">&quot;2008-07-08&quot;</span> <span class="st">&quot;2010-03-15&quot;</span> <span class="st">&quot;2010-04-02&quot;</span> <span class="st">&quot;2012-01-04&quot;</span> <span class="st">&quot;2013-10-14&quot;</span> </span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>        NA<span class="st">&#39;s </span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a><span class="st">         &quot;1&quot; </span></span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a><span class="st">hist(dates, &quot;month&quot;, freq = TRUE, main = &quot;Monthly Homicides in Baltimore&quot;)</span></span></code></pre></div>
<p><img src="3_GettingAndCleaningData_Module4_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<ul>
<li>We can see from the picture that homicides do not occur uniformly
throughout the year and appear to have some seasonality to them.</li>
</ul>
</div>
<div
id="fixing-character-vectors-with-tolower-or-toupper-strsplit-and-sapply."
class="section level3" number="1.2.7">
<h3><span class="header-section-number">1.2.7</span> Fixing character
vectors with <code>tolower()</code> or <code>toupper()</code>,
<code>strsplit()</code> and <code>sapply()</code>.</h3>
<p>Let’s look now at the names of the variables in the
<code>cameras.csv</code> dataset. We’ll focus on some common issues
regarding the problem of cleaning data:</p>
<ul>
<li>First, the issue of having variables <strong>names with capitalized
letters</strong> like <code>crossStreet</code>.<br />
This seems like not a big deal, but every time that we’re going to type
that name into R, we might miss that extra capital letter and so, R
might give us an error. Whenever possible we’d like to have all
lowercase because missing caps can make the error checking process
(debugging) very difficult in data analysis.
<ul>
<li>We can solve this problem withe <strong>the <code>tolower()</code>
command</strong> (there’s also a <code>toupper()</code> comand).<br />
</li>
</ul></li>
<li>Another thing that we might want to do is <strong>separate out
variables names</strong> that have some kind of “separators”, tipically
periods. That often happens when we load variable names into R from
files. It’s important in data analisys to have variable names that are
unique (not duplicated) and usually we’ll want also variable names
without underscores or dots.
<ul>
<li>Here we can use <strong>the `strsplit() command</strong>, and we can
tell it to split on periods for instance (remember that we have to
<strong>escape</strong> the <em>period</em> character in order to tell
the interpreter that we want to use the <em>literal</em> value instead
fo the <em>metacharacter</em>).<br />
</li>
</ul></li>
<li>Once we have our variables names splitted out, we might want to
<strong>subset out</strong> and just take the part of variable name that
doesn’t have the dot in it.
<ul>
<li>That’s someting we can do with <code>sapply()</code>.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>camerasData <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./3_data/cameras.csv&quot;</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(camerasData)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;address&quot;</span>                      <span class="st">&quot;direction&quot;</span>                   </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;street&quot;</span>                       <span class="st">&quot;crossStreet&quot;</span>                 </span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;intersection&quot;</span>                 <span class="st">&quot;Location.1&quot;</span>                  </span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">&quot;X2010.Census.Neighborhoods&quot;</span>   <span class="st">&quot;X2010.Census.Wards.Precincts&quot;</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">9</span>] <span class="st">&quot;Zip.Codes&quot;</span>                   </span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>camerasNames <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(camerasData))</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>camerasNames</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;address&quot;</span>                      <span class="st">&quot;direction&quot;</span>                   </span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;street&quot;</span>                       <span class="st">&quot;crossstreet&quot;</span>                 </span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;intersection&quot;</span>                 <span class="st">&quot;location.1&quot;</span>                  </span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">7</span>] <span class="st">&quot;x2010.census.neighborhoods&quot;</span>   <span class="st">&quot;x2010.census.wards.precincts&quot;</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">9</span>] <span class="st">&quot;zip.codes&quot;</span>                   </span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>splitedNames <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(camerasNames, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>splitedNames</span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span>]]</span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;address&quot;</span></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">2</span>]]</span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;direction&quot;</span></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">3</span>]]</span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;street&quot;</span></span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">4</span>]]</span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;crossstreet&quot;</span></span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">5</span>]]</span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;intersection&quot;</span></span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">6</span>]]</span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;location&quot;</span> <span class="st">&quot;1&quot;</span>       </span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">7</span>]]</span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;x2010&quot;</span>         <span class="st">&quot;census&quot;</span>        <span class="st">&quot;neighborhoods&quot;</span></span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">8</span>]]</span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;x2010&quot;</span>     <span class="st">&quot;census&quot;</span>    <span class="st">&quot;wards&quot;</span>     <span class="st">&quot;precincts&quot;</span></span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">9</span>]]</span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;zip&quot;</span>   <span class="st">&quot;codes&quot;</span></span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a>firstElement <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {x[<span class="dv">1</span>]}</span>
<span id="cb69-48"><a href="#cb69-48" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(splitedNames, firstElement)</span>
<span id="cb69-49"><a href="#cb69-49" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;address&quot;</span>      <span class="st">&quot;direction&quot;</span>    <span class="st">&quot;street&quot;</span>       <span class="st">&quot;crossstreet&quot;</span>  <span class="st">&quot;intersection&quot;</span></span>
<span id="cb69-50"><a href="#cb69-50" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] <span class="st">&quot;location&quot;</span>     <span class="st">&quot;x2010&quot;</span>        <span class="st">&quot;x2010&quot;</span>        <span class="st">&quot;zip&quot;</span>         </span></code></pre></div>
</div>
<div id="other-useful-base-functions-nchar-paste-paste0."
class="section level3" number="1.2.8">
<h3><span class="header-section-number">1.2.8</span> Other useful
<code>base</code> functions: <code>nchar()</code>, <code>paste()</code>,
<code>paste0()</code>.</h3>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(<span class="st">&quot;Unicornio Azul&quot;</span>)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">14</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;Unicornio&quot;</span>, <span class="st">&quot;Azul&quot;</span>)     <span class="co"># Space separator by default.</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Unicornio Azul&quot;</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;Unicornio&quot;</span>, <span class="st">&quot;Azul&quot;</span>)     <span class="co"># No separator at all by default.</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;UnicornioAzul&quot;</span></span></code></pre></div>
</div>
</div>
<div id="the-stringr-package-from-the-tydyverse-collection."
class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> The
<code>stringr</code> package from the <code>tydyverse</code>
collection.</h2>
<p>The <code>package</code> is part of the <code>tidyverse</code>
collection of packages and <em>wraps</em> they <em>underlying
<code>stringi</code></em> package in a series of convenience
functions.</p>
<p>Some of <strong>the complexity</strong> of using the
<code>base</code> R regular expression functions is usefully
<strong>hidden</strong> by the <code>stringr</code> functions.</p>
<p>In addition, the <code>stringr</code> functions provide a
<strong>more rational interface to regular expressions</strong> with
<strong>more consistency in the arguments</strong> and <strong>argument
ordering</strong>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<div
id="straightforward-mapping-from-base-functions-to-stringr-functions."
class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Straightforward
mapping from <code>base</code> functions to <code>stringr</code>
functions.</h3>
<p>In general, for the <code>stringr</code> functions:</p>
<ul>
<li><p>the <em>data</em> are the <em>first argument</em>, and</p></li>
<li><p>the <em>regular expression</em> is the <em>second argument</em>,
with</p></li>
<li><p><em>optional arguments afterwards</em>.</p></li>
</ul>
</div>
<div id="grepvalue-true---str_subset" class="section level3"
number="1.3.2">
<h3><span class="header-section-number">1.3.2</span>
<code>grep(value = TRUE)</code> —-&gt; <code>str_subset()</code></h3>
<p><code>str_subset()</code> is much like
<code>grep(value = TRUE)</code> and <strong>returns a character vector
of</strong> <strong>strings</strong> that <em>contain a given
match</em>.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">str_subset</span>(homicides, <span class="st">&quot;iconHomicideShooting|icon_homicide_shooting&quot;</span>)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(g)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1263</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(g)</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.311024, -76.674227, iconHomicideShooting, &#39;p2&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Leon Nelson&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;3400 Clifton Ave.&lt;br /&gt;Baltimore, MD 21216&lt;/dd&gt;&lt;dd&gt;black male, 17 years old&lt;/dd&gt;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at Shock Trauma&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span> </span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] <span class="st">&quot;39.312641, -76.698948, iconHomicideShooting, &#39;p3&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Eddie Golf&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;4900 Challedon Road&lt;br /&gt;Baltimore, MD 21207&lt;/dd&gt;&lt;dd&gt;black male, 26 years old&lt;/dd&gt;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at scene&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span>       </span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;39.352676, -76.607979, iconHomicideShooting, &#39;p7&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Michael Cunningham&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;5200 Ready Ave.&lt;br /&gt;Baltimore, MD 21212&lt;/dd&gt;&lt;dd&gt;black male, 46 years old&lt;/dd&gt;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at JHH&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span>     </span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>] <span class="st">&quot;39.310999, -76.622023, iconHomicideShooting, &#39;p8&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Ray Alston&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;300 West North Ave.&lt;br /&gt;Baltimore, MD 21217&lt;/dd&gt;&lt;dd&gt;black male, 27 years old&lt;/dd&gt;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at UMMC&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span>        </span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;39.311103, -76.584475, iconHomicideShooting, &#39;p9&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Yule Henderson&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;1800 North Montford Ave.&lt;br /&gt;Baltimore, MD 21213&lt;/dd&gt;&lt;dd&gt;black male, 21 years old&lt;/dd&gt;&lt;dd&gt;Found on January 7, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at JHH&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span>] <span class="st">&quot;39.348101, -76.564960, iconHomicideShooting, &#39;p10&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Marcus McDowell&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;5100 Harford Road&lt;br /&gt;Baltimore, MD 21214&lt;/dd&gt;&lt;dd&gt;black male, 16 years old&lt;/dd&gt;&lt;dd&gt;Found on January 8, 2007&lt;/dd&gt;&lt;dd&gt;Victim died at Bayview&lt;/dd&gt;&lt;dd&gt;Cause: shooting&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span> </span></code></pre></div>
</div>
<div id="grepl---str_detect" class="section level3" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span>
<code>grepl()</code> —-&gt; <code>str_detect()</code></h3>
<p><code>str_detect()</code> is essentially <code>grepl()</code></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>victims13 <span class="ot">&lt;-</span> <span class="fu">str_detect</span>(homicides, <span class="st">&quot;13 years old&quot;</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(victims13)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a> logi [<span class="dv">1</span><span class="sc">:</span><span class="dv">1571</span>] <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> ...</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(victims13)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>victims13</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span>  <span class="cn">TRUE</span> </span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">1569</span>     <span class="dv">2</span> </span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>homicides[victims13]</span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;39.343826, -76.679404, iconHomicideStabbing, &#39;p270&#39;, &#39;&lt;dl&gt;&lt;dt&gt;Tywonde Jones&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;5000 Cordelia Ave.&lt;br /&gt;Baltimore, MD 21215&lt;/dd&gt;&lt;dd&gt;black male, 13 years old&lt;/dd&gt;&lt;dd&gt;Found on November 29, 2007&lt;/dd&gt;&lt;dd&gt;Cause: stabbing&lt;/dd&gt;&lt;dd&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://www.baltimoresun.com/news/local/baltimore_city/bal-stabbing1130,0,3512865.story</span><span class="sc">\&quot;</span><span class="st">&gt;Read the article&lt;/a&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span>                                                                                                                                          </span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>] <span class="st">&quot;39.31537200000, -76.59555500000, icon_homicide_shooting, &#39;p1249&#39;, &#39;&lt;dl&gt;&lt;dt&gt;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">http://data.baltimoresun.com/bing-maps/homicides/victim/1249/monae-turnage</span><span class="sc">\&quot;</span><span class="st">&gt;Monae Turnage&lt;/a&gt;&lt;/dt&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">address</span><span class="sc">\&quot;</span><span class="st">&gt;1600 Cliftview Ave&lt;br /&gt;Baltimore, MD 21213&lt;/dd&gt;&lt;dd&gt;Race: Black&lt;br /&gt;Gender: female&lt;br /&gt;Age: 13 years old&lt;/dd&gt;&lt;dd&gt;Found on March  4, 2012&lt;/dd&gt;&lt;dd&gt;Victim died at Scene&lt;/dd&gt;&lt;dd&gt;Cause: Shooting&lt;/dd&gt;&lt;dd class=</span><span class="sc">\&quot;</span><span class="st">popup-note</span><span class="sc">\&quot;</span><span class="st">&gt;&lt;p&gt;Found under trash bags in backyard; had been earlier reported missing&lt;/p&gt;&lt;/dd&gt;&lt;/dl&gt;&#39;&quot;</span></span></code></pre></div>
</div>
<div id="regexpr-and-regmatches---str_extract" class="section level3"
number="1.3.4">
<h3><span class="header-section-number">1.3.4</span>
<code>regexpr()</code> and <code>regmatches()</code> —-&gt;
<code>str_extract()</code></h3>
<p><code>str_extract()</code> plays the role of <code>regexpr()</code>
<strong>and</strong> <code>regmatches()</code> , extracting the matches
from the output.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>], <span class="st">&quot;&lt;dd&gt;[F|f]ound(.*?)&lt;/dd&gt;&quot;</span>)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">3</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 3, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a> [<span class="dv">5</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 7, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9</span>] <span class="st">&quot;&lt;dd&gt;Found on January 8, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 8, 2007&lt;/dd&gt;&quot;</span></span></code></pre></div>
</div>
<div id="regexec-and-regmatches---str_match" class="section level3"
number="1.3.5">
<h3><span class="header-section-number">1.3.5</span>
<code>regexec()</code> and <code>regmatches()</code> —-&gt;
<code>str_match()</code></h3>
<p><code>str_match()</code> does the job of <code>regexec()</code> and
<code>regmatches()</code> by providing a <strong>matrix</strong>
(instead of a list) <em>containing</em> the <em>parenthesized
sub-expressions</em>.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">str_match</span>(homicides[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="st">&quot;&lt;dd&gt;[F|f]ound on (.*?)&lt;/dd&gt;&quot;</span>)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>m</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>]                                [,<span class="dv">2</span>]             </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 1, 2007&quot;</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="st">&quot;&lt;dd&gt;Found on January 3, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 3, 2007&quot;</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 5, 2007&quot;</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>m[, <span class="dv">2</span>]</span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 3, 2007&quot;</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;January 5, 2007&quot;</span></span></code></pre></div>
<ul>
<li><p>Now the <em>second column</em> of the matrix contains the values
of the <em>parenthesized</em> <em>sub-expressions</em>.</p></li>
<li><p>If there had been more parenthesized sub-expressions, there would
have been more columns in the output matrix.</p></li>
</ul>
</div>
<div id="sub---str_replace" class="section level3" number="1.3.6">
<h3><span class="header-section-number">1.3.6</span> <code>sub()</code>
—-&gt; <code>str_replace()</code></h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>strvector</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 3, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on |&lt;/dd&gt;&quot;</span>, <span class="st">&quot;&quot;</span>, strvector)</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>] <span class="st">&quot;January 3, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 5, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(strvector, <span class="st">&quot;&lt;dd&gt;[F|f]ound on |&lt;/dd&gt;&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 2, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>] <span class="st">&quot;January 3, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;January 5, 2007&lt;/dd&gt;&quot;</span></span></code></pre></div>
</div>
<div id="gsub---str_replace_all" class="section level3" number="1.3.7">
<h3><span class="header-section-number">1.3.7</span> <code>gsub()</code>
—-&gt; <code>str_replace_all()</code></h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>strvector</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;&lt;dd&gt;Found on January 1, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>] <span class="st">&quot;&lt;dd&gt;Found on January 2, 2007&lt;/dd&gt;&quot;</span> <span class="st">&quot;&lt;dd&gt;Found on January 3, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;&lt;dd&gt;Found on January 5, 2007&lt;/dd&gt;&quot;</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;&lt;dd&gt;[F|f]ound on |&lt;/dd&gt;&quot;</span>, <span class="st">&quot;&quot;</span>, strvector)</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 3, 2007&quot;</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;January 5, 2007&quot;</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(strvector, <span class="st">&quot;&lt;dd&gt;[F|f]ound on |&lt;/dd&gt;&quot;</span>, <span class="st">&quot;&quot;</span>)</span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;January 1, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 2, 2007&quot;</span> <span class="st">&quot;January 3, 2007&quot;</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;January 5, 2007&quot;</span></span></code></pre></div>
</div>
<div id="other-useful-stringr-function-str_trim." class="section level3"
number="1.3.8">
<h3><span class="header-section-number">1.3.8</span> Other useful
<code>stringr</code> function: <code>str_trim()</code>.</h3>
<p>In the <code>stringr</code> package there’s a very nice function
called <code>str_trim()</code>.</p>
<ul>
<li>It <strong>trim off any excess space</strong> that appears at the
<strong>beginnng</strong> or the <strong>end</strong> of a string.</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(str_trim)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="cf">function</span> (string, <span class="at">side =</span> <span class="fu">c</span>(<span class="st">&quot;both&quot;</span>, <span class="st">&quot;left&quot;</span>, <span class="st">&quot;right&quot;</span>))  </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">&quot;Unicornio           &quot;</span>)   <span class="co"># Get rid of white spaces at the end...</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Unicornio&quot;</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">&quot;     Unicornio           &quot;</span>)   <span class="co"># ... and the beginning.</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Unicornio&quot;</span></span></code></pre></div>
<ul>
<li>It’s important in data analisys to have variable names that are
unique (not duplicated), without underscores or dots, but also without
white spaces.</li>
</ul>
<hr />
</div>
</div>
</div>
<div id="working-with-dates." class="section level1" number="2">
<h1><span class="header-section-number">2</span> Working with
dates.</h1>
<div id="starting-simple." class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Starting simple.</h2>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">=</span> <span class="fu">date</span>()</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>d1</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Sat Feb 18 08:04:25 2023&quot;</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(d1)</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;character&quot;</span></span></code></pre></div>
</div>
<div
id="date-class-objects-sys.date-and-separately-sys.time.-also-sys.timezone."
class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Date class objects:
<code>Sys.Date()</code>, and separately <code>Sys.time()</code>. Also
<code>Sys.timezone()</code>.</h2>
<p>We can create a <code>Date</code> object with the
<code>Sys.Date()</code> command, which <strong>returns</strong> the
<strong>system’s current day in the current time zone</strong>.</p>
<ul>
<li>It doesn’t return <em>the time</em>. To get the date and the time
values, we can use <code>Sys.time()</code></li>
</ul>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">=</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>d2</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2023-02-18&quot;</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(d2)</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Date&quot;</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.time</span>()</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2023-02-18 08:04:25 -03&quot;</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;America/Argentina/Rio_Gallegos&quot;</span></span></code></pre></div>
<ul>
<li>So we can see that <code>Sys.Date()</code> returns an object that
has some different properties (a <code>Date</code> object instead of a
<code>character</code> object) that make it:
<ul>
<li>a little bit nicer in terms of analyzing date data,<br />
</li>
<li>but a little bit more difficult or tricky than dealing with just
text files in some respects.</li>
</ul></li>
</ul>
</div>
<div id="formatting-a-date-object-with-format." class="section level2"
number="2.3">
<h2><span class="header-section-number">2.3</span> Formatting a
<code>Date</code> object with <code>format()</code>.</h2>
<p>So one thing that we might want to do is reformat a <code>Date</code>
object to get a format that is nice and visually appealing.</p>
<p>We can use the <code>format()</code> command for this.</p>
<ul>
<li>After giving the <code>Date</code> object as first argument, we can
specify as second argument the proper <em>format string</em> wich
conforms to the following syntax:
<ul>
<li><code>%d</code> = day as number (0-31)<br />
</li>
<li><code>%a</code> = abbreviated weekday<br />
</li>
<li><code>%A</code> = unabbreviated weekday<br />
</li>
<li><code>%m</code> = month (00-12)<br />
</li>
<li><code>%b</code> = abbreviated month<br />
</li>
<li><code>%B</code> = unabbrevidated month<br />
</li>
<li><code>%y</code> = 2 digit year<br />
</li>
<li><code>%Y</code> = four digit year<br />
</li>
</ul></li>
<li>This function <strong>returns</strong> an object of similar
structure to that given as input, containing <strong>character
representations of the elements</strong> of that objet in a common
format, and in the <strong>current locale’s encoding</strong>.</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(d2,<span class="st">&quot;%a %b %d&quot;</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;sáb feb 18&quot;</span></span></code></pre></div>
</div>
<div id="creating-date-objects-not-only-sys.date-also-as.date."
class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Creating
<code>Date</code> objects: not only <code>Sys.date()</code>, also
<code>as.Date()</code>.</h2>
<p>We can also create a <code>Date</code> object with the
<code>as.Date()</code> command.</p>
<p>For example, if we happen to have a <em>character vector</em> with a
bunch of different dates, we can <strong>turn it into
<code>date</code>s</strong> by telling the function
<code>as.Date()</code>, using the format syntax we’ve seen before, that
it should be looking for a day, for a month and then for a year:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;1ene1960&quot;</span>, <span class="st">&quot;2ene1960&quot;</span>, <span class="st">&quot;31mar1960&quot;</span>, <span class="st">&quot;30jul1960&quot;</span>)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">as.Date</span>(x, <span class="st">&quot;%d%b%Y&quot;</span>)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>z</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;1960-01-01&quot;</span> <span class="st">&quot;1960-01-02&quot;</span> <span class="st">&quot;1960-03-31&quot;</span> <span class="st">&quot;1960-07-30&quot;</span></span></code></pre></div>
</div>
<div id="manipulating-date-objects." class="section level2"
number="2.5">
<h2><span class="header-section-number">2.5</span> Manipulating
<code>Date</code> objects.</h2>
<p>We can also manipulate <code>Date</code> objects.</p>
<p>For example, we can <strong>figure out how far apart they</strong>
are among other things.</p>
<ul>
<li>If we look at the <strong>difference in time</strong> between the
first day and the second day, there’s a time difference in days.</li>
<li>In particular, if we subtract off the <em>second day from the first
day</em> we’ll get -1 days (one day behind).</li>
</ul>
<p>So we can actually turn that into a numeric variable and get the
differences between dates in terms of the number of days apart that they
are, very easily using dates.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>z[<span class="dv">1</span>] <span class="sc">-</span> z[<span class="dv">2</span>]</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>Time difference of <span class="sc">-</span><span class="dv">1</span> days</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(z[<span class="dv">1</span>]<span class="sc">-</span>z[<span class="dv">2</span>])</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="dv">1</span></span></code></pre></div>
</div>
<div id="getting-the-weekdays-and-the-months-of-dates-objects."
class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Getting the
<code>weekdays()</code> and the <code>months()</code> of
<code>date</code>s objects.</h2>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">weekdays</span>(d2)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;sábado&quot;</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="fu">months</span>(d2)</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;febrero&quot;</span></span></code></pre></div>
</div>
<div id="converting-to-julian." class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Converting to
<code>julian()</code>.</h2>
<p>We can also convert a <code>Date</code> object to Julian, that is to
say, to the number of <strong>days that have occurred since the
origin</strong>.</p>
<ul>
<li>The origin is the <em>first of January, 1970</em>.</li>
</ul>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">julian</span>(d2)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">19406</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;origin&quot;</span>)</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;1970-01-01&quot;</span></span></code></pre></div>
</div>
<div id="the-lubridate-package." class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> The
<code>lubridate</code> package.</h2>
<p>The <code>lubridate</code> package is actually very nice and makes
working with dates even simpler.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<div
id="converting-strings-or-numbers-to-a-date-by-automatically-recongnizing-format-ymd-ydm-mdy-myd-dmy-dym-yq."
class="section level3" number="2.8.1">
<h3><span class="header-section-number">2.8.1</span> Converting strings
or numbers to a date by automatically recongnizing format:
<code>ymd()</code>, <code>ydm()</code>, <code>mdy()</code>,
<code>myd()</code>, <code>dmy()</code>, <code>dym()</code>,
<code>yq()</code>.</h3>
<p>We can <strong>convert</strong> a <strong>character or numeric
vector</strong> to a <code>date</code> object using the above
<code>lubridate</code> commands.</p>
<ul>
<li><p>These functions <strong>recognize</strong> <em>arbitrary
non-digit separators</em> as well as <em>no separator</em>.</p></li>
<li><p>As long as the <em>order of formats</em> is <em>correct</em>,
these functions <strong>will parse dates correctly</strong> <em>even
when</em> the <em>input vectors contain differently formatted
dates</em>.</p></li>
</ul>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(<span class="st">&quot;20140108&quot;</span>)</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2014-01-08&quot;</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy</span>(<span class="st">&quot;08/04/2013&quot;</span>)</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2013-08-04&quot;</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy</span>(<span class="st">&quot;03-04-2013&quot;</span>)</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2013-04-03&quot;</span></span></code></pre></div>
<ul>
<li>So this is very nice because we don’t have to actually format the
dates or the characters before we turn them into dates.</li>
</ul>
</div>
<div id="dealing-with-times-the-_hms-_hm-_h-family-of-functions."
class="section level3" number="2.8.2">
<h3><span class="header-section-number">2.8.2</span> Dealing with times:
the <code>*_hms()</code>, <code>*_hm()</code>, <code>*_h()</code> family
of functions.</h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd_hms</span>(<span class="st">&quot;2011-08-03 10:15:03&quot;</span>)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2011-08-03 10:15:03 UTC&quot;</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dmy_hms</span>(<span class="st">&quot;03-04-2013 10:15:03&quot;</span>, <span class="at">tz=</span><span class="st">&quot;Pacific/Auckland&quot;</span>)</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;2013-04-03 10:15:03 NZDT&quot;</span></span></code></pre></div>
</div>
<div
id="slightly-different-syntax-to-get-the-day-week-month-and-year-day-mday-wday-qday-yday."
class="section level3" number="2.8.3">
<h3><span class="header-section-number">2.8.3</span> Slightly different
syntax to get the day, week, month and year: <code>day()</code>,
<code>mday()</code>, <code>wday()</code>, <code>qday()</code>,
<code>yday()</code>.</h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">dmy</span>(<span class="fu">c</span>(<span class="st">&quot;1ene2013&quot;</span>, <span class="st">&quot;2ene2013&quot;</span>, <span class="st">&quot;31mar2013&quot;</span>, <span class="st">&quot;30jul2013&quot;</span>))</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">wday</span>(x[<span class="dv">1</span>])                                 <span class="co"># in base packge is weekdays()</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="fu">wday</span>(x[<span class="dv">1</span>], <span class="at">label =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] mar</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> dom <span class="sc">&lt;</span> lun <span class="sc">&lt;</span> mar <span class="sc">&lt;</span> mié <span class="sc">&lt;</span> jue <span class="sc">&lt;</span> vie <span class="sc">&lt;</span> sáb</span></code></pre></div>
</div>
</div>
<div id="further-resources." class="section level2" number="2.9">
<h2><span class="header-section-number">2.9</span> Further
resources.</h2>
<ul>
<li><p>More information in <a
href="http://www.r-statistics.com/2012/03/do-more-with-dates-and-times-in-r-with-lubridate-1-1-0/">this
nice lubridate tutorial</a></p></li>
<li><p>The <a
href="http://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html">lubridate
vignette is the same content</a></p></li>
<li><p>Ultimately we want our dates and times as class <code>Date</code>
or the classes <code>POSIXct</code>, <code>POSIXlt</code>.</p>
<ul>
<li>For more information type <code>?POSIXlt</code>.</li>
</ul></li>
</ul>
<hr />
</div>
</div>
<div id="data-resources." class="section level1" number="3">
<h1><span class="header-section-number">3</span> Data resources.</h1>
<p>Let’s just point out some free data resources, which we can use to do
some of analysis if we don’t happen to have any at the organization that
we’re at.</p>
<div id="open-government-sites." class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Open Government
Sites.</h2>
<ul>
<li>United Nations <a
href="http://data.un.org/">http://data.un.org/</a><br />
</li>
<li>U.S. <a href="http://www.data.gov/">http://www.data.gov/</a>
<ul>
<li>List of <a
href="http://simplystatistics.org/2012/01/02/list-of-cities-states-with-open-data-help-me-find/">cities/states
with open data</a><br />
</li>
</ul></li>
<li>United Kingdom <a
href="http://data.gov.uk/">http://data.gov.uk/</a><br />
</li>
<li>France <a
href="http://www.data.gouv.fr/">http://www.data.gouv.fr/</a><br />
</li>
<li>Ghana <a href="http://data.gov.gh/">http://data.gov.gh/</a><br />
</li>
<li>Australia <a
href="http://data.gov.au/">http://data.gov.au/</a><br />
</li>
<li>Germany <a
href="https://www.govdata.de/">https://www.govdata.de/</a><br />
</li>
<li>Hong Kong <a
href="http://www.gov.hk/en/theme/psi/datasets/">http://www.gov.hk/en/theme/psi/datasets/</a><br />
</li>
<li>Japan <a
href="http://www.data.go.jp/">http://www.data.go.jp/</a><br />
</li>
<li>Many more <a
href="http://www.data.gov/opendatasites">http://www.data.gov/opendatasites</a>
<ul>
<li>This last website actually gives information on <strong>data sites
for countries all around</strong> <strong>the world</strong>.<br />
</li>
<li>So that’s a good place to start if we don’t know if our country has
an open government data site.<br />
</li>
<li>Infact, taking Argentina as an example, we can find that this
country has these data sites available:<br />
<a href="https://data.buenosaires.gob.ar/">Buenos Aires Data</a>.<br />
<a href="http://www.datos.misiones.gov.ar/">Misiones Datos
Abiertos</a>.</li>
</ul></li>
</ul>
</div>
<div id="gapminder-lots-of-indicators-including-human-health."
class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Gapminder (lots of
indicators, including human health).</h2>
<p>Gapminder is another website that has a lot of data about world
development, in particular in human heath.</p>
<p><a href="http://www.gapminder.org/">http://www.gapminder.org/</a></p>
</div>
<div id="survey-data-from-the-united-states." class="section level2"
number="3.3">
<h2><span class="header-section-number">3.3</span> Survey data from the
United States.</h2>
<p><a href="http://www.asdfree.com/">http://www.asdfree.com/</a></p>
<p>This website gives us a lot of information about <strong>how do we
actually access the surveys</strong> <strong>and process them in
R</strong>.</p>
<p>It’s actually really nice because the <em>surveys are often very big
and unwieldy</em>, and this website gives us a lot of information on how
to access them.</p>
</div>
<div id="infochimps-marketplace." class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Infochimps
Marketplace.</h2>
<p><a
href="http://www.infochimps.com/marketplace">http://www.infochimps.com/marketplace</a></p>
<p>The Infochimps Marketplace has a bunch of different data sets which
we can sort by various different tags, and we can identify data sets
that we might be interest to.</p>
<p>Some of them are free, and some of them cost money.</p>
</div>
<div id="kaggle." class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Kaggle.</h2>
<p><a href="http://www.kaggle.com/">http://www.kaggle.com/</a></p>
<p>Kaggle is a company that offers <strong>data science
competitions</strong>, and they often have very interesting data sets
that they make available as part of those competitions.</p>
<p>So they’re <strong>good for practice</strong>, but they’re also good
for potentially discovering new, interesting things that can help
companies <strong>solve real problems</strong>.</p>
</div>
<div id="collections-by-data-scientists." class="section level2"
number="3.6">
<h2><span class="header-section-number">3.6</span> Collections by data
scientists.</h2>
<p>There’s also some collections that have been put together by famous
data scientists.</p>
<p>The following are several data scientists, Hilary Mason, Jeff
Hammerbacher and others who have put together data sets that are
research quality and that might be useful.</p>
<ul>
<li><a href="http://bitly.com/bundles/hmason/1">Hilary Mason</a><br />
</li>
<li><a href="https://delicious.com/pskomoroch/dataset">Peter
Skomoroch</a><br />
</li>
<li><a
href="http://www.quora.com/Jeff-Hammerbacher/Introduction-to-Data-Science-Data-Sets">Jeff
Hammerbacher</a><br />
</li>
<li><a href="http://www.kdnuggets.com/gps.html">Gregory
Piatetsky-Shapiro</a></li>
</ul>
<p>These all come from this blog post which talks about several other
data sets, they’re curated by other data scientists as well.</p>
<ul>
<li><a
href="http://blog.mortardata.com/post/67652898761/6-dataset-lists-curated-by-data-scientists">Mortardata
blog</a></li>
</ul>
</div>
<div id="more-specialized-collections." class="section level2"
number="3.7">
<h2><span class="header-section-number">3.7</span> More specialized
collections.</h2>
<p>There are also a large variety of other, more specialised
collections.</p>
<p>So for example, the Stanford Large Network Data Archive has a large
number of data sets that focus on <strong>network data</strong>,
<strong>machine learning</strong>.</p>
<ul>
<li><a href="http://snap.stanford.edu/data/">Stanford Large Network
Data</a></li>
</ul>
<p>The UCI Machine Learning archive has a variety of data sets that can
be used to practice our <strong>classification or
predictions</strong>.</p>
<ul>
<li><a href="http://archive.ics.uci.edu/ml/">UCI Machine
Learning</a></li>
</ul>
<p>There’re also these famous sets of datasets available:</p>
<ul>
<li><a href="http://www.kdnuggets.com/datasets/index.html">KDD Nugets
Datasets</a></li>
<li><a href="http://lib.stat.cmu.edu/datasets/">CMU Statlib</a></li>
<li><a href="http://www.ncbi.nlm.nih.gov/geo/">Gene expression
omnibus</a></li>
<li><a href="http://arxiv.org/help/bulk_data">ArXiv Data</a></li>
<li><a href="http://aws.amazon.com/publicdatasets/">Public Data Sets on
Amazon Web Services</a></li>
</ul>
</div>
<div id="some-apis-with-r-interfaces." class="section level2"
number="3.8">
<h2><span class="header-section-number">3.8</span> Some API’s with R
interfaces.</h2>
<p>Finally, there a large number of APIs that we’ve now learned how to
use, for example, the <code>twitteR</code> package which can be used to
access the Twitter API, in an easier way than trying to set up a
application ourselves.</p>
<ul>
<li><a
href="http://cran.r-project.org/web/packages/twitteR/index.html">twitteR</a>
package.</li>
</ul>
<p>We can similarly get access to <strong>figshare data</strong></p>
<ul>
<li><a
href="http://api.figshare.com/docs/intro.html">figshare</a>,<br />
</li>
<li><a
href="http://cran.r-project.org/web/packages/rfigshare/index.html">rfigshare</a></li>
</ul>
<p>Or to data from <strong>publications like Plos</strong>.</p>
<ul>
<li><a href="http://api.plos.org/">PLoS</a>,<br />
</li>
<li><a
href="http://cran.r-project.org/web/packages/rplos/rplos.pdf">rplos</a></li>
</ul>
<p><code>rOpenSci</code> has a large number of very nice packages that
allow us to access data from a <strong>variety of sources that are
focused on academics</strong>.</p>
<ul>
<li><a href="http://ropensci.org/packages/index.html">rOpenSci</a></li>
</ul>
<p>There’s also dedicated R packages for <em>Facebook</em> and
<em>Google Maps</em>.</p>
<ul>
<li><a href="https://developers.facebook.com/">Facebook</a>,<br />
</li>
<li><a
href="http://cran.r-project.org/web/packages/Rfacebook/">RFacebook</a><br />
</li>
<li><a href="https://developers.google.com/maps/">Google maps</a>,<br />
</li>
<li><a
href="http://cran.r-project.org/web/packages/RgoogleMaps/index.html">RGoogleMaps</a></li>
</ul>
</div>
<div id="conclusion." class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> Conclusion.</h2>
<blockquote>
<p>All of these mean that there is <strong>really no excuse</strong> to
not be able to find real data to focus on any project that we might be
interested in.</p>
</blockquote>
<hr />
</div>
</div>
<div id="session-info." class="section level1" number="4">
<h1><span class="header-section-number">4</span> Session Info.</h1>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>R version <span class="dv">3</span>.<span class="fl">6.3</span> (<span class="dv">2020-02-29</span>)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>Platform<span class="sc">:</span> x86_64<span class="sc">-</span>pc<span class="sc">-</span>linux<span class="sc">-</span><span class="fu">gnu</span> (<span class="dv">64</span><span class="sc">-</span>bit)</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>Running under<span class="sc">:</span> Ubuntu <span class="dv">18</span>.<span class="fl">04.6</span> LTS</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>Matrix products<span class="sc">:</span> default</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>BLAS<span class="sc">:</span>   <span class="er">/</span>usr<span class="sc">/</span>lib<span class="sc">/</span>x86_64<span class="sc">-</span>linux<span class="sc">-</span>gnu<span class="sc">/</span>blas<span class="sc">/</span>libblas.so.<span class="dv">3</span>.<span class="fl">7.1</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>LAPACK<span class="sc">:</span> <span class="er">/</span>usr<span class="sc">/</span>lib<span class="sc">/</span>x86_64<span class="sc">-</span>linux<span class="sc">-</span>gnu<span class="sc">/</span>lapack<span class="sc">/</span>liblapack.so.<span class="dv">3</span>.<span class="fl">7.1</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>locale<span class="sc">:</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] LC_CTYPE<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>          LC_NUMERIC<span class="ot">=</span>C                 </span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a> [<span class="dv">3</span>] LC_TIME<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>           LC_COLLATE<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>       </span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a> [<span class="dv">5</span>] LC_MONETARY<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>       LC_MESSAGES<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>      </span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] LC_PAPER<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>          LC_NAME<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>          </span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9</span>] LC_ADDRESS<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>        LC_TELEPHONE<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>     </span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] LC_MEASUREMENT<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span>    LC_IDENTIFICATION<span class="ot">=</span>es_AR.UTF<span class="dv">-8</span></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>attached base packages<span class="sc">:</span></span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span id="cb90-20"><a href="#cb90-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-21"><a href="#cb90-21" aria-hidden="true" tabindex="-1"></a>other attached packages<span class="sc">:</span></span>
<span id="cb90-22"><a href="#cb90-22" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] stringr_1.<span class="fl">4.0</span>     lubridate_1.<span class="fl">9.2</span>   quantmod_0.<span class="fl">4.20</span>   TTR_0.<span class="fl">24.2</span>       </span>
<span id="cb90-23"><a href="#cb90-23" aria-hidden="true" tabindex="-1"></a> [<span class="dv">5</span>] xts_0.<span class="fl">12.1</span>        zoo_1<span class="fl">.8</span><span class="dv">-9</span>         readr_2.<span class="fl">0.1</span>       tidyr_1.<span class="fl">2.0</span>      </span>
<span id="cb90-24"><a href="#cb90-24" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9</span>] dplyr_1.<span class="fl">0.8</span>       reshape2_1.<span class="fl">4.4</span>    Hmisc_4<span class="fl">.4</span><span class="dv">-0</span>       ggplot2_3.<span class="fl">3.5</span>    </span>
<span id="cb90-25"><a href="#cb90-25" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>] Formula_1<span class="fl">.2</span><span class="dv">-3</span>     survival_3<span class="fl">.4</span><span class="dv">-0</span>    lattice_0<span class="fl">.20</span><span class="dv">-45</span>   jpeg_0<span class="fl">.1-8.1</span>     </span>
<span id="cb90-26"><a href="#cb90-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">17</span>] gitignore_0.<span class="fl">1.3</span>   rhdf5_2.<span class="fl">30.1</span>      httr_1.<span class="fl">4.2</span>        httpuv_1.<span class="fl">6.3</span>     </span>
<span id="cb90-27"><a href="#cb90-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">21</span>] sqldf_0<span class="fl">.4</span><span class="dv">-11</span>      RSQLite_2.<span class="fl">2.0</span>     gsubfn_0<span class="fl">.7</span>        proto_1.<span class="fl">0.0</span>      </span>
<span id="cb90-28"><a href="#cb90-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">25</span>] DBI_1.<span class="fl">1.1</span>         data.table_1.<span class="fl">14.0</span> jsonlite_1.<span class="fl">7.2</span>    XML_3<span class="fl">.99-0.3</span>     </span>
<span id="cb90-29"><a href="#cb90-29" aria-hidden="true" tabindex="-1"></a>[<span class="dv">29</span>] xlsx_0.<span class="fl">6.3</span>        plyr_1.<span class="fl">8.6</span>       </span>
<span id="cb90-30"><a href="#cb90-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-31"><a href="#cb90-31" aria-hidden="true" tabindex="-1"></a>loaded via a <span class="fu">namespace</span> (and not attached)<span class="sc">:</span></span>
<span id="cb90-32"><a href="#cb90-32" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] bit64_4.<span class="fl">0.5</span>         RColorBrewer_1<span class="fl">.1</span><span class="dv">-2</span>  tools_3.<span class="fl">6.3</span>        </span>
<span id="cb90-33"><a href="#cb90-33" aria-hidden="true" tabindex="-1"></a> [<span class="dv">4</span>] backports_1.<span class="fl">4.1</span>     bslib_0.<span class="fl">3.0</span>         utf8_1.<span class="fl">2.2</span>         </span>
<span id="cb90-34"><a href="#cb90-34" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] R6_2.<span class="fl">5.1</span>            rpart_4.<span class="fl">1.19</span>        colorspace_2<span class="fl">.0</span><span class="dv">-3</span>   </span>
<span id="cb90-35"><a href="#cb90-35" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span>] nnet_7<span class="fl">.3</span><span class="dv">-18</span>         withr_2.<span class="fl">5.0</span>         tidyselect_1.<span class="fl">2.0</span>   </span>
<span id="cb90-36"><a href="#cb90-36" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>] gridExtra_2<span class="fl">.3</span>       bit_4.<span class="fl">0.4</span>           curl_4.<span class="fl">3.2</span>         </span>
<span id="cb90-37"><a href="#cb90-37" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] compiler_3.<span class="fl">6.3</span>      chron_2<span class="fl">.3</span><span class="dv">-55</span>        cli_3.<span class="fl">6.0</span>          </span>
<span id="cb90-38"><a href="#cb90-38" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] formatR_1<span class="fl">.14</span>        htmlTable_2.<span class="fl">0.1</span>     sass_0.<span class="fl">4.0</span>         </span>
<span id="cb90-39"><a href="#cb90-39" aria-hidden="true" tabindex="-1"></a>[<span class="dv">22</span>] scales_1.<span class="fl">1.1</span>        checkmate_2.<span class="fl">0.0</span>     askpass_1<span class="fl">.1</span>        </span>
<span id="cb90-40"><a href="#cb90-40" aria-hidden="true" tabindex="-1"></a>[<span class="dv">25</span>] digest_0.<span class="fl">6.29</span>       foreign_0<span class="fl">.8</span><span class="dv">-76</span>      rmarkdown_2<span class="fl">.11</span>     </span>
<span id="cb90-41"><a href="#cb90-41" aria-hidden="true" tabindex="-1"></a>[<span class="dv">28</span>] base64enc_0<span class="fl">.1</span><span class="dv">-3</span>     pkgconfig_2.<span class="fl">0.3</span>     htmltools_0.<span class="fl">5.2</span>    </span>
<span id="cb90-42"><a href="#cb90-42" aria-hidden="true" tabindex="-1"></a>[<span class="dv">31</span>] fastmap_1.<span class="fl">1.0</span>       highr_0<span class="fl">.9</span>           htmlwidgets_1.<span class="fl">5.4</span>  </span>
<span id="cb90-43"><a href="#cb90-43" aria-hidden="true" tabindex="-1"></a>[<span class="dv">34</span>] rlang_1.<span class="fl">0.6</span>         rstudioapi_0<span class="fl">.13</span>     jquerylib_0.<span class="fl">1.4</span>    </span>
<span id="cb90-44"><a href="#cb90-44" aria-hidden="true" tabindex="-1"></a>[<span class="dv">37</span>] generics_0.<span class="fl">1.2</span>      acepack_1.<span class="fl">4.1</span>       magrittr_2.<span class="fl">0.2</span>     </span>
<span id="cb90-45"><a href="#cb90-45" aria-hidden="true" tabindex="-1"></a>[<span class="dv">40</span>] Matrix_1<span class="fl">.5</span><span class="dv">-1</span>        Rcpp_1.<span class="fl">0.7</span>          munsell_0.<span class="fl">5.0</span>      </span>
<span id="cb90-46"><a href="#cb90-46" aria-hidden="true" tabindex="-1"></a>[<span class="dv">43</span>] Rhdf5lib_1.<span class="fl">8.0</span>      fansi_1.<span class="fl">0.2</span>         clipr_0.<span class="fl">7.1</span>        </span>
<span id="cb90-47"><a href="#cb90-47" aria-hidden="true" tabindex="-1"></a>[<span class="dv">46</span>] lifecycle_1.<span class="fl">0.3</span>     stringi_1.<span class="fl">7.6</span>       yaml_2.<span class="fl">2.1</span>         </span>
<span id="cb90-48"><a href="#cb90-48" aria-hidden="true" tabindex="-1"></a>[<span class="dv">49</span>] grid_3.<span class="fl">6.3</span>          blob_1.<span class="fl">2.2</span>          promises_1.<span class="dv">2</span>.<span class="fl">0.1</span>   </span>
<span id="cb90-49"><a href="#cb90-49" aria-hidden="true" tabindex="-1"></a>[<span class="dv">52</span>] crayon_1.<span class="fl">5.0</span>        splines_3.<span class="fl">6.3</span>       xlsxjars_0.<span class="fl">6.1</span>     </span>
<span id="cb90-50"><a href="#cb90-50" aria-hidden="true" tabindex="-1"></a>[<span class="dv">55</span>] hms_1.<span class="fl">1.0</span>           knitr_1<span class="fl">.41</span>          pillar_1.<span class="fl">7.0</span>       </span>
<span id="cb90-51"><a href="#cb90-51" aria-hidden="true" tabindex="-1"></a>[<span class="dv">58</span>] tcltk_3.<span class="fl">6.3</span>         glue_1.<span class="fl">6.2</span>          evaluate_0<span class="fl">.19</span>      </span>
<span id="cb90-52"><a href="#cb90-52" aria-hidden="true" tabindex="-1"></a>[<span class="dv">61</span>] latticeExtra_0<span class="fl">.6</span><span class="dv">-29</span> vctrs_0.<span class="fl">5.2</span>         png_0<span class="fl">.1</span><span class="dv">-7</span>          </span>
<span id="cb90-53"><a href="#cb90-53" aria-hidden="true" tabindex="-1"></a>[<span class="dv">64</span>] tzdb_0.<span class="fl">3.0</span>          gtable_0.<span class="fl">3.0</span>        openssl_2.<span class="fl">0.5</span>      </span>
<span id="cb90-54"><a href="#cb90-54" aria-hidden="true" tabindex="-1"></a>[<span class="dv">67</span>] purrr_0.<span class="fl">3.4</span>         assertthat_0.<span class="fl">2.1</span>    xfun_0<span class="fl">.36</span>          </span>
<span id="cb90-55"><a href="#cb90-55" aria-hidden="true" tabindex="-1"></a>[<span class="dv">70</span>] later_1.<span class="fl">3.0</span>         tibble_3.<span class="fl">1.8</span>        rJava_0<span class="fl">.9</span><span class="dv">-13</span>       </span>
<span id="cb90-56"><a href="#cb90-56" aria-hidden="true" tabindex="-1"></a>[<span class="dv">73</span>] memoise_1.<span class="fl">1.0</span>       cluster_2.<span class="fl">1.4</span>       timechange_0.<span class="fl">2.0</span>   </span>
<span id="cb90-57"><a href="#cb90-57" aria-hidden="true" tabindex="-1"></a>[<span class="dv">76</span>] ellipsis_0.<span class="fl">3.2</span>     </span></code></pre></div>
<hr />
</div>

<div style="width: 100%; padding: 10px; box-sizing: border-box; text-align: justify; border: 1px solid gray;">
  <p style="font-family: 'Playfair Display', serif; font-style: italic;">Copyright &copy; 2020 por <b>Christian A. Karanicolas</b>.  Todos los derechos reservados.  La elaboración de este sitio ha tenido como fuente principal de información el curso de <b>Especialización en Ciencias de Datos</b> brindado por la <b>Johns Hopkins University</b> a través de <b>Coursera</b>.</p>
</div>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap');
</style>


<!--
<p style="font-family: 'Playfair Display', serif; font-style: italic;">Copyright &copy; 2020 por <b>Christian A. Karanicolas</b>.  Todos los derechos reservados.  La elaboración de este sitio ha tenido como fuente principal de información el curso de <b>Especialización en Ciencias de Datos</b> brindado por la <b>Johns Hopkins University</b> a través de <b>Coursera</b>.</p>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap');
</style>
-->


<!--
<p style="font-style: italic;">Copyright &copy; 2020 por <b>Christian A. Karanicolas</b>.  Todos los derechos reservados.  La elaboración de este sitio ha tenido como fuente principal de información el curso de <b>Especialización en Ciencias de Datos</b> brindado por la <b>Johns Hopkins University</b> a través de <b>Coursera</b>.</p>
-->




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
